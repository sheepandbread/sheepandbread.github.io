

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="咩包">
  <meta name="keywords" content="">
  
    <meta name="description" content="之前java的笔记整理 之 2">
<meta property="og:type" content="article">
<meta property="og:title" content="java基础——中">
<meta property="og:url" content="http://example.com/2023/10/28/2023/java%E5%9F%BA%E7%A1%80%EF%BC%88%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5-%E4%B8%8A%EF%BC%89/index.html">
<meta property="og:site_name" content="咩包">
<meta property="og:description" content="之前java的笔记整理 之 2">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221010090822904.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221010091600549.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221010093354436.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221014233347086.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221014233518973.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015220138980.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015220743762.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015221106785.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015222414360.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015223604445.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015225420578.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015230627576.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015232513107.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015233106759.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015233416207.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015233448332.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016144202025.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016154126410.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016154302252.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016154538557.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016154749199.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016160659378.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016160935275.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016161811839.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221028160835539.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221028164714674.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221028170331045.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221028171609848.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221029001540649.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221029154749534.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221030004713846.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221031174106963.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221031175002331.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221102214250619.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221103113040832.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221104120717090.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221104123354849.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221106170327944.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107104350300.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107153226551.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108173934476.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107163049201.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107164957355.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107164929559.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108000733354.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108001443174.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108001631339.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108162417848.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108163012104.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108163038281.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108163554906.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108172127749.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108172811298.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108173105006.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108215134036.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108215639035.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108221725822.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111144958617.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111192927423.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111194411642.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111195410636.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112114153189.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112122631995.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112152600330.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112163943852.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112175503010.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112181324051.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221113005253653.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221118202731626.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/%E6%88%AA%E5%B1%8F2023-02-26%20%E4%B8%8B%E5%8D%885.21.50.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226173136070.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226182417321.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226183944829.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226230214790.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226230227432.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226231154729.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227132801592.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227180456118.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227180716337.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227184822789.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227185338539.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227185538723.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227201014255.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230228222455417.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301112321131.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301194358937.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301200224233.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301195431430.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301201549141.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301213136992.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230302004934704.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230302005059128.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230302011839673.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230302012505885.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/20230302012813.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230306204836888.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230303174405971.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230303174319784.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304094503016.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304100604329.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304102751204.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304103408044.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304103824737.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227180716337.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230305120023477.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230305031504111.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230305213233217.png">
<meta property="og:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230312155028492.png">
<meta property="article:published_time" content="2023-10-27T18:44:00.000Z">
<meta property="article:modified_time" content="2023-10-27T18:45:42.321Z">
<meta property="article:author" content="咩包">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221010090822904.png">
  
  
  
  <title>java基础——中 - 咩包</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":false,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>咩包</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="java基础——中"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-10-28 02:44" pubdate>
          2023年10月28日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          162k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          1351 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">java基础——中</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="变量、常量、对象"><a href="#变量、常量、对象" class="headerlink" title="变量、常量、对象"></a><strong>变量、常量、对象</strong></h1><p><strong>变量：</strong></p>
<p>程序的基本组成单位，相当于内存中一个数据存储空间的表示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> a;<br>a = <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure>

<p><strong>常量</strong>：</p>
<p>final修饰的属性又叫常量，一般 用XX_XX_XX来命名。</p>
<p>在定义时<strong>，</strong>必须赋初值，并且以后不能再修改。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AA</span><span class="hljs-params">()</span>&#123;<span class="hljs-comment">//在构造器中</span><br>        TAX_RATE2=<span class="hljs-number">1.1</span>;<br>    &#125;<br>    &#123;<span class="hljs-comment">//在代码块赋值</span><br>        TAX_RATE3=<span class="hljs-number">8.8</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>对象：</strong></p>
<p>Java 是面向对象的编程语言，对象就是面向对象程序设计的核心。</p>
<p>所谓<strong>对象就是真实世界中的实体，对象与实体是一一对应的，也就是说现实世界中每一个实体都是一个对象，它是一种具体的概念</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Cat cat;<span class="hljs-comment">//声明对象</span><br>cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(); <span class="hljs-comment">//创建</span><br></code></pre></td></tr></table></figure>



<h1 id="一些接口"><a href="#一些接口" class="headerlink" title="一些接口"></a>一些接口</h1><ul>
<li><strong>Iterable</strong> ——可迭代</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">java.util.<span class="hljs-built_in">Iterator</span><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>Comparable</strong> ——可比较</li>
</ul>
<h1 id="章节十"><a href="#章节十" class="headerlink" title="章节十"></a>章节十</h1><p>类的五大成员：</p>
<p>（1）属性 </p>
<p>（2）方法 </p>
<p>（3）构造器</p>
<p>（4）代码块</p>
<p>（5）内部类</p>
<h2 id="1-类变量"><a href="#1-类变量" class="headerlink" title="1.类变量"></a>1.类变量</h2><h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p>实例：加入小孩，统计小孩个数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.static_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChildGame</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        Child child1= <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">&quot;白骨精&quot;</span>);<br>        child1.join();<br>        child1.count++;<br>        Child child2= <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">&quot;狐狸精&quot;</span>);<br>        child2.join();<br>        child2.count++;<br>        Child child3= <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">&quot;黑熊精&quot;</span>);<br>        child3.join();<br>        child3.count++;<br>        System.out.println(child1.count+<span class="hljs-string">&quot;个小孩加入了游戏。&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-comment">//定义一个变量count，是一个类变量（静态变量）static 静态</span><br>    <span class="hljs-comment">//该变量最大的特点就是会被所有的对象实例共享</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span><span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Child</span><span class="hljs-params">(String name)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">join</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(name+<span class="hljs-string">&quot;加入了游戏&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>关于类的内存布局：不同的教材有不同的说法，jdk不同或许存放的地点不同。</p>
<p>但static类量是对象共享的，不管static变量在哪里。</p>
<p><strong>共识：</strong></p>
<p><strong>（1）static变量是同一个类所有对象共享。</strong></p>
<p><strong>（2）static变量在类加载时就生成了。</strong></p>
<h3 id="类变量"><a href="#类变量" class="headerlink" title="类变量"></a>类变量</h3><p>类变量也叫静态变量&#x2F;静态属性，是该类的所有对象共享的变量，任何一个该类的对象去访问它时，取到的都是相同的值。</p>
<p><strong>定义语法：</strong></p>
<p>访问修饰符 static 数据类型 变量名;[推荐]</p>
<p>static 访问修饰符 数据类型 变量名;</p>
<p><strong>访问变量：</strong></p>
<p>类名.类变量名[推荐]</p>
<p>对象名.类变量名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VisitStatic</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//方法1</span><br>        <span class="hljs-comment">//类变量是随着类的加载而创建，所以及时没有创建对象实例也可以访问</span><br>        System.out.println(A.name);<br>        <span class="hljs-comment">//方法2</span><br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>        System.out.println(a.name);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;韩顺平教育&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>韩顺平教育</p>
<p>韩顺平教育</p>
</blockquote>
<h3 id="注意事项-amp-使用细节"><a href="#注意事项-amp-使用细节" class="headerlink" title="注意事项&amp;使用细节"></a>注意事项&amp;使用细节</h3><ol>
<li><p><strong>什么时候</strong>需要使用类变量？</p>
<p>当我们需要让某个类的所有对象都<strong>共享一个变量</strong>时，就可以考虑使用类变量（静态变量）。例如：定义学生类，统计所有学生共交多少钱。</p>
</li>
<li><p>类变量和实例变量（普通变量）<strong>区别</strong>？</p>
<p>类变量是该类所有对象共享的。</p>
<p>而实例变量是每个对象独享的。</p>
</li>
<li><p>加上static成为类变量或静态变量，否则成为实例变量&#x2F;普通变量&#x2F;非静态变量。</p>
</li>
<li><p>访问需要满足修饰符的访问权限和范围。</p>
</li>
<li><p>类变量的生命周期是随类的加载开始，随着类的消亡而销毁。</p>
</li>
</ol>
<h2 id="2-类方法"><a href="#2-类方法" class="headerlink" title="2.类方法"></a>2.类方法</h2><p>也叫静态方法。</p>
<p>形式：</p>
<p>访问修饰符 static 数据返回类型 方法名(){ } [推荐]</p>
<p>static 访问修饰符 数据返回类型 方法名(){ }</p>
<p>使用方法：类名.类方法名 或者 对象名.类对象名</p>
<p>举例：学生总学费</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.static_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticMethod</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Stu</span> <span class="hljs-variable">tom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stu</span>(<span class="hljs-string">&quot;tom&quot;</span>);<br>        tom.payFee(<span class="hljs-number">100</span>);<br>        <span class="hljs-type">Stu</span> <span class="hljs-variable">mary</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stu</span>(<span class="hljs-string">&quot;mary&quot;</span>);<br>        mary.payFee(<span class="hljs-number">200</span>);<br>        Stu.showFee();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Stu</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-comment">//定义一个静态变量，累计学费</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-variable">fee</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Stu</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-comment">//定义两个静态方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">payFee</span><span class="hljs-params">(<span class="hljs-type">double</span> fee)</span>&#123;<br>        Stu.fee +=fee; <span class="hljs-comment">//累计到静态变量</span><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showFee</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;总学费有：&quot;</span>+Stu.fee);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>总学费有：300.0</p>
</blockquote>
<h3 id="经典使用场景"><a href="#经典使用场景" class="headerlink" title="经典使用场景"></a>经典使用场景</h3><p>当方法不涉及到任何和对象相关的成员，可以将方法设计成静态方法，提高开发效率。</p>
<p>例如：工具类中的方法utils</p>
<p>Math类、Array类、Collection集合类。</p>
<p>实际开发中，程序员往往会将一些通用的方法，设计成静态方法，这样我们不需要创建对象就可以使用了。例如打印一维数组，冒泡排序，完成某个计算任务等……</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mytools</span>&#123;<br>    <span class="hljs-comment">//求出两个数的和</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calSum</span><span class="hljs-params">(<span class="hljs-type">double</span> n1,<span class="hljs-type">double</span> n2)</span>&#123;<br>        <span class="hljs-keyword">return</span> n1+n2;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="注意事项-amp-使用细节-1"><a href="#注意事项-amp-使用细节-1" class="headerlink" title="注意事项&amp;使用细节"></a>注意事项&amp;使用细节</h3><p>1）类方法和普通方法都是随着类的加载而加载，将结构信息存储在方法区：</p>
<p><strong>类方法中无this的参数。</strong></p>
<p>普通方法中隐含着this的参数。</p>
<p>2）类方法可以通过类名调用，也可以通过对象名调用。</p>
<p>3）普通方法和对象有关，需要通过对象名调用，比如<strong>对象名．方法名</strong>（参数），不能通过类名用。</p>
<p>4）类方法中<strong>不允许使用和对象有关的关键字</strong>，比如<strong>this和super</strong>。普通方法（成员方法）可以。</p>
<p>5）<strong>类方法</strong>（静态方法）中<strong>只能访问静态变量或静态方法</strong> 。</p>
<p>6）普通成员方法，既可以访问普通变量（方法），也可以访问静态变量（方法）。</p>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><h4 id="题目1"><a href="#题目1" class="headerlink" title="题目1"></a><strong>题目1</strong></h4><blockquote>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221010090822904.png" srcset="/img/loading.gif" lazyload alt="image-20221010090822904"></p>
</blockquote>
<p>9、10、11</p>
<h4 id="题目2"><a href="#题目2" class="headerlink" title="题目2"></a><strong>题目2</strong></h4><blockquote>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221010091600549.png" srcset="/img/loading.gif" lazyload alt="image-20221010091600549"></p>
</blockquote>
<p>private int id改成private static int id，因为getTotalPerson是类方法，无法调用普通变量。</p>
<p>输出0、1。</p>
<h4 id="题目3"><a href="#题目3" class="headerlink" title="题目3"></a>题目3</h4><blockquote>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221010093354436.png" srcset="/img/loading.gif" lazyload alt="image-20221010093354436"></p>
</blockquote>
<p>去掉this.total &#x3D; total。因为类方法不能使用this和super。</p>
<h2 id="3-深入理解main语法"><a href="#3-深入理解main语法" class="headerlink" title="3.深入理解main语法"></a>3.深入理解main语法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br></code></pre></td></tr></table></figure>

<ol>
<li>main方法是java虚拟机调用</li>
<li><strong>java虚拟机</strong>需要调用类的main()方法，所以该对象的访问权限必须是<strong>public</strong></li>
<li>java虚拟机在执行main()方法时，<strong>不必创建对象</strong>，所以该方法必须是<strong>static</strong></li>
<li>该方法接受String类型的数组参数，该数组中保存执行java命令时传递给所运行的类的参数</li>
<li>java执行的程序 参数1 参数2 参数3</li>
</ol>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221014233347086.png" srcset="/img/loading.gif" lazyload alt="image-20221014233347086"></p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">hello</span>&#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>		<span class="hljs-comment">//args 是如何传入</span><br>		<span class="hljs-comment">//遍历显示</span><br>		<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;i &lt; args.length;i++) &#123;<br>			System.out.println(<span class="hljs-string">&quot;第&quot;</span>+(i+<span class="hljs-number">1</span>)+<span class="hljs-string">&quot;个参数=&quot;</span> + args[i]);<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>命令行输入如下：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">java hello <span class="hljs-regexp">//</span>无输出<br>java hello jack tom smith<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221014233518973.png" srcset="/img/loading.gif" lazyload alt="image-20221014233518973" style="zoom:50%;" />

<p>特别提示：</p>
<ul>
<li>在mian()方法中，我们可以直接调用main所在类的静态方法或静态属性</li>
<li>但是，不能直接访问该类中的非静态成员，必须创建该类的一个实例对象后，才能通过这个对象去访问类中的非静态成员</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main01</span> &#123;<br>    <span class="hljs-comment">//静态的变量，属性</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;韩顺平教育&quot;</span>;<br>    <span class="hljs-comment">//非静态的变量，属性</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;<br>    <span class="hljs-comment">//静态方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Main01的 hi方法&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//非静态的方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Main01的 cry方法&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        <span class="hljs-comment">//可以直接使用name</span><br>        <span class="hljs-comment">//1.因为静态方法可以访问本类的静态成员</span><br>        System.out.println(<span class="hljs-string">&quot;name = &quot;</span>+name);<br>        hi();<br>        <span class="hljs-comment">//2.静态方法main不可访问本类的非静态成员</span><br>        <span class="hljs-comment">//3.如果静态方法main要访问本类的非静态成员，需要先创建对象，再调用即可</span><br>        <span class="hljs-type">Main01</span> <span class="hljs-variable">main01</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Main01</span>();<br>        System.out.println(main01.n1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="4-代码块"><a href="#4-代码块" class="headerlink" title="4.代码块"></a>4.代码块</h2><p><strong>介绍：</strong></p>
<p>代码化块又称为<strong>初始化块</strong>，属于类中的成员[即 是类的一部分]，类似于方法，将逻辑语句封装在方法体中，通过{}包围起来。</p>
<p>但和方法不同，没有方法名，没有返回，没有参数，只有方法体，而且不用通过对象或类显示调用，而是加载类时，或创建对象时隐式调用。</p>
<p><strong>基本语法：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">[修饰符]&#123;<br>	代码<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ol>
<li>修饰符，可选，只能写static</li>
<li>代码块分两类，使用static叫静态代码块，没有static修饰的，叫普通代码块&#x2F;非静态代码块</li>
<li>逻辑语句可以为任何逻辑语句（输入、输出、方法调用、循环、判断等）</li>
<li>;号可以写上，也可以省略。</li>
</ol>
<p><strong>优点</strong></p>
<ol>
<li>相当于另一种形式的构造器（对构造器的补充机制），可以做初始化的操作</li>
<li>场景：如果多个构造器中都有重复的语句，可以抽取到初始化块中，<strong>提高代码的重用性</strong></li>
</ol>
<p>案例：电影</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeBlock01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Movie</span> <span class="hljs-variable">movie1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Movie</span>(<span class="hljs-string">&quot;你好李焕英&quot;</span>);<br>        <span class="hljs-type">Movie</span> <span class="hljs-variable">movie2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Movie</span>(<span class="hljs-string">&quot;唐探3&quot;</span>, <span class="hljs-number">100</span>, <span class="hljs-string">&quot;陈思诚&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Movie</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;<br>    <span class="hljs-keyword">private</span> String director;<br><br>    <span class="hljs-comment">//3个构造器 = &gt;重载</span><br>    <span class="hljs-comment">//（1）下面的三个构造器都有相同的语句</span><br>    <span class="hljs-comment">//（2）这样看起来比较冗余</span><br>    <span class="hljs-comment">//（3）可以把相同的语句，放入同一个代码块中</span><br>    <span class="hljs-comment">//（4）这样无论调用哪一个构造器，都会先调用代码块的内容</span><br>    <span class="hljs-comment">//（5）代码块的调用优先于构造器</span><br><br><br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;电影屏幕打开...&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;广告开始...&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;电影正式开始...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Movie</span><span class="hljs-params">(String name)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        System.out.println(<span class="hljs-string">&quot;Movie(String name)被调用&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Movie</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.price = price;<br>        System.out.println(<span class="hljs-string">&quot;Movie(String name, double price)被调用&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Movie</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> price, String director)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.price = price;<br>        <span class="hljs-built_in">this</span>.director = director;<br>        System.out.println(<span class="hljs-string">&quot;Movie(String name, double price, String director)被调用&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="使用细节"><a href="#使用细节" class="headerlink" title="使用细节"></a>使用细节</h3><h4 id="1）static代码块"><a href="#1）static代码块" class="headerlink" title="1）static代码块"></a>1）<strong>static代码块</strong></h4><p>也叫静态代码块，作用是<strong>对类进行初始化。</strong></p>
<p>而且它<strong>随着类的加载而执行</strong>，并且<strong>只能执行一次</strong>。如果是普通代码块，每创建一个对象，就执行。</p>
<h4 id="2）类什么时候被加载"><a href="#2）类什么时候被加载" class="headerlink" title="2）类什么时候被加载"></a><strong>2）类什么时候被加载</strong></h4><ul>
<li><strong>创建对象实例时（new）</strong></li>
<li><strong>创建子类对象实例，父类也会被加载</strong></li>
<li><strong>使用类的静态成员时（静态方法，静态属性）</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeBlock02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//类被加载的情况举例</span><br><span class="hljs-comment">//        1.创建对象实例时(new)</span><br><span class="hljs-comment">//        AA aa = new AA();</span><br><span class="hljs-comment">//        2.创建子类对象实例，父类也会被加载</span><br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AA</span>();<br><span class="hljs-comment">//        3.使用类的静态成员时（静态方法，静态属性）</span><br>        System.out.println(Cat.n1);<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">999</span>;<span class="hljs-comment">//静态属性</span><br>    <span class="hljs-comment">//静态代码块</span><br>    <span class="hljs-keyword">static</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Cat 的静态代码1被执行&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span>&#123;<br>    <span class="hljs-comment">//静态代码块</span><br>    <span class="hljs-keyword">static</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;BB的静态代码块1被执行&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BB</span>&#123;<br>    <span class="hljs-comment">//静态代码块</span><br>    <span class="hljs-keyword">static</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;AA的静态代码块1被执行&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015220138980.png" srcset="/img/loading.gif" lazyload alt="image-20221015220138980" style="zoom:50%;" />



<h4 id="3）普通的代码块，在创建对象实例时，会被隐式的调用。"><a href="#3）普通的代码块，在创建对象实例时，会被隐式的调用。" class="headerlink" title="3）普通的代码块，在创建对象实例时，会被隐式的调用。"></a><strong>3）普通的代码块，在创建对象实例时，会被隐式的调用。</strong></h4><p><strong>被创建一次，就会调用一次。</strong></p>
<p><strong>如果只是使用类的静态成员时，普通代码块并不会执行。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//...        </span><br>				<span class="hljs-type">DD</span> <span class="hljs-variable">dd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DD</span>();<br>        <span class="hljs-type">DD</span> <span class="hljs-variable">dd1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DD</span>();<br><span class="hljs-comment">//...</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DD</span>&#123;<br>    <span class="hljs-comment">//静态代码块</span><br>    <span class="hljs-keyword">static</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;DD 的静态代码1被执行...&quot;</span>);<br>    &#125;<br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;DD 的普通代码块...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>静态代码块随着类的<strong>加载</strong>而执行，只会调用一次。</p>
<p>而普通代码块，new对象时被调用。被创建一次，就会调用一次。</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015220743762.png" srcset="/img/loading.gif" lazyload alt="image-20221015220743762" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//...</span><br>				System.out.println(DD.n1);<br><span class="hljs-comment">//...</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DD</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">8888</span>;<br>    <span class="hljs-comment">//静态代码块</span><br>    <span class="hljs-keyword">static</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;DD 的静态代码1被执行...&quot;</span>);<br>    &#125;<br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;DD 的普通代码块...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>此处无创建对象，只有类被加载，所以只执行静态代码块。</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015221106785.png" srcset="/img/loading.gif" lazyload alt="image-20221015221106785" style="zoom:50%;" />



<p>小结：</p>
<ol>
<li>static代码是类加载时，执行，只会执行一次</li>
<li>普通代码块是在创建对象时调用的，创建一次，调用一次</li>
<li>类加载的三种情况。</li>
</ol>
<h4 id="4）创建一个对象时，在一个类调用顺序（重点）"><a href="#4）创建一个对象时，在一个类调用顺序（重点）" class="headerlink" title="4）创建一个对象时，在一个类调用顺序（重点）"></a><strong>4）创建一个对象时，在一个类调用顺序（重点）</strong></h4><ol>
<li><strong>首先调用静态代码块和静态属性初始化</strong></li>
<li>然后调用普通代码块和普通属性的初始化</li>
<li>再调用构造方法</li>
</ol>
<p>1.<strong>首先调用静态代码块和静态属性初始化</strong></p>
<p>注意：静态代码块和静态属性初始化的调用优先级一样，如果有多个静态代码块和多个静态变量初始化，则<strong>按他们定义的顺序调用</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.codeblock_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeBlockDetail02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> getN1();<br>    <span class="hljs-keyword">static</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;A 静态代码块01&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getN1</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getN1被调用...&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015222414360.png" srcset="/img/loading.gif" lazyload alt="image-20221015222414360" style="zoom:50%;" />

<p><strong>2.调用普通代码块和普通属性的初始化</strong></p>
<p>注意：普通代码块和普通属性初始化调用的优先级一样，如果有多个普通代码块和多个普通属性初始化，则按定义顺序调用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeBlockDetail02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> getN2(); <span class="hljs-comment">//普通属性的初始化</span><br>    &#123;<br>        <span class="hljs-comment">//普通代码块</span><br>        System.out.println(<span class="hljs-string">&quot;A 普通代码块01&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">static</span>&#123; <span class="hljs-comment">//静态代码块</span><br>        System.out.println(<span class="hljs-string">&quot;A 静态代码块01&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> getN1(); <span class="hljs-comment">//静态属性的初始化</span><br>    <span class="hljs-comment">//静态属性初始化</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getN1</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getN1被调用...&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getN2</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">//普通方法</span><br>        System.out.println(<span class="hljs-string">&quot;getN2被调用...&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">200</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015223604445.png" srcset="/img/loading.gif" lazyload alt="image-20221015223604445" style="zoom:50%;" />

<p>3.<strong>调用构造方法</strong></p>
<p>上面的例子加一个无参构造器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//无参构造器</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">()</span>&#123;<br>    System.out.println(<span class="hljs-string">&quot;A无参构造器被调用&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015225420578.png" srcset="/img/loading.gif" lazyload alt="image-20221015225420578" style="zoom:50%;" />



<h4 id="5）构造器的最前面隐含了super-和普通代码块"><a href="#5）构造器的最前面隐含了super-和普通代码块" class="headerlink" title="5）构造器的最前面隐含了super()和普通代码块"></a>5）构造器的最前面隐含了super()和普通代码块</h4><p>静态相关的代码块，属性初始化，在类加载时，就执行完完毕。</p>
<p>因此是优先于 构造器和普通代码块执行的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">A</span><span class="hljs-params">()</span>&#123;<span class="hljs-comment">//构造器</span><br>	<span class="hljs-comment">//（1）super(); </span><br>	<span class="hljs-comment">//（2）调用普通代码块的</span><br>	System.out.println(<span class="hljs-string">&quot;ok&quot;</span>);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>例子:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeBlockDetail03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">BBB</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AAA</span>&#123;<span class="hljs-comment">//父类OBject</span><br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;AAA的普通代码块&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AAA</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//(1)super()</span><br>        <span class="hljs-comment">//(2)调用本类的普通代码块</span><br>        System.out.println(<span class="hljs-string">&quot;AAA() 构造器被调用...&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BBB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AAA</span>&#123;<br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;BBB的普通代码块...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BBB</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//(1)super()</span><br>        <span class="hljs-comment">//(2)调用本类的普通代码块</span><br>        System.out.println(<span class="hljs-string">&quot;BBB() 构造器被调用...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015230627576.png" srcset="/img/loading.gif" lazyload alt="image-20221015230627576" style="zoom:50%;" />



<h4 id="6）创建一个子类时的调用顺序"><a href="#6）创建一个子类时的调用顺序" class="headerlink" title="6）创建一个子类时的调用顺序"></a>6）创建一个子类时的调用顺序</h4><ol>
<li>父类的静态代码块和静态属性（优先级一样，按定义顺序执行）</li>
<li>子类的静态代码块和静态属性（优先级一样，按定义顺序执行）</li>
<li>父类的普通代码块和普通属性初始化（优先级一样，按定义顺序执行）</li>
<li>父类的构造方法</li>
<li>子类的普通代码块和普通属性初始化（优先级一样，按定义顺序执行）</li>
<li>子类的构造方法</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeBlockDetail04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//(1)进行类的加载</span><br>        <span class="hljs-comment">//1.1 先加载 父类 A02 1.2 再加载 B02</span><br>        <span class="hljs-comment">//(2)创建对象</span><br>        <span class="hljs-comment">//2.1先执行子类的构造器</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">B02</span>(); <span class="hljs-comment">//对象</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A02</span>&#123; <span class="hljs-comment">//父类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> getVal01();<br>    <span class="hljs-keyword">static</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;A02的一个静态代码块..&quot;</span>);<br>    &#125;<br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;A02的一个普通代码块..&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> getVal02();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal01</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getVal01&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal02</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getVal02&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">A02</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;A02的构造器&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B02</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A02</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> getVal03();<br>    <span class="hljs-keyword">static</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;B02的一个静态代码块..&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n5</span> <span class="hljs-operator">=</span> getVal04();<br><br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;B02的一个普通代码块&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal03</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getVal03&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVal04</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;getVal04&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">B02</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//super()</span><br>        <span class="hljs-comment">//普通代码和普通属性的初始化...</span><br>        System.out.println(<span class="hljs-string">&quot;B02的构造器&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015232513107.png" srcset="/img/loading.gif" lazyload alt="image-20221015232513107" style="zoom:50%;" />



<h4 id="7）静态代码块只能直接调用静态成员（静态属性和静态方法），普通代码块可以调用任意成员。"><a href="#7）静态代码块只能直接调用静态成员（静态属性和静态方法），普通代码块可以调用任意成员。" class="headerlink" title="7）静态代码块只能直接调用静态成员（静态属性和静态方法），普通代码块可以调用任意成员。"></a>7）静态代码块只能直接调用静态成员（静态属性和静态方法），普通代码块可以调用任意成员。</h4><h3 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h3><h4 id="题1："><a href="#题1：" class="headerlink" title="题1："></a>题1：</h4><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015233106759.png" srcset="/img/loading.gif" lazyload alt="image-20221015233106759" style="zoom:50%;" />

<p>in static block!</p>
<p>total&#x3D;100</p>
<p>total&#x3D;100</p>
<h4 id="题2："><a href="#题2：" class="headerlink" title="题2："></a>题2：</h4><p>下面的代码输出什么？</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015233416207.png" srcset="/img/loading.gif" lazyload alt="image-20221015233416207" style="zoom:50%;" />

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221015233448332.png" srcset="/img/loading.gif" lazyload alt="image-20221015233448332" style="zoom:50%;" />

<p>静态成员sam初始化</p>
<p>static块执行</p>
<p>sam1成员初始化</p>
<p>Test默认构造函数被调用</p>
<h2 id="5-单例模式"><a href="#5-单例模式" class="headerlink" title="5.单例模式"></a>5.单例模式</h2><p>设计模式是什么：</p>
<blockquote>
<p>设计模式（Design pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的<strong>总结</strong>。</p>
<p>使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的，设计模式使代码编制真正工程化，设计模式是软件工程的基石，如同大厦的一块块砖石一样。项目中合理的运用设计模式可以完美的解决很多问题，每种模式在现在中都有相应的原理来与之对应，每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案，这也是它能被广泛应用的原因。<br>————————————————<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/cputao/article/details/121822980">https://blog.csdn.net/cputao/article/details/121822980</a></p>
</blockquote>
<p>常见的有23种。</p>
<p><strong>单例模式</strong>：就是采取一定的方法保证在整个的软件系统中，对某个类<strong>只能存在一个对象实例</strong>，并且该类值提供一个取得其对象实例的方法。</p>
<p>步骤：</p>
<ol>
<li>构造器私有化 &#x3D; 》防止直接new</li>
<li>类的内部创造对象</li>
<li>向外暴露一个静态的公共方法 getinstance </li>
<li>代码实现</li>
</ol>
<h3 id="饿汉式"><a href="#饿汉式" class="headerlink" title="饿汉式"></a>饿汉式</h3><p><em>饿汉模式：在<strong>程序启动</strong>或<strong>单例模式类</strong>被加载的时候，单例模式实例就已经被创建。</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleTon01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//        GirlFriend gf1 = new GirlFriend(&quot;小花&quot;);</span><br>        <span class="hljs-type">GirlFriend</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> GirlFriend.getInstance();<br>        System.out.println(instance);<br>        <span class="hljs-type">GirlFriend</span> <span class="hljs-variable">instance1</span> <span class="hljs-operator">=</span> GirlFriend.getInstance();<br>        System.out.println(instance1);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GirlFriend</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-comment">//为了能在静态方法中，返回gf对象，需要将其修饰为static</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">GirlFriend</span> <span class="hljs-variable">gf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GirlFriend</span>(<span class="hljs-string">&quot;小红&quot;</span>);<br>    <span class="hljs-comment">//如何保障我们只能创建一个GirlFriend对象</span><br>    <span class="hljs-comment">//步骤[单例模式-饿汉式]</span><br>    <span class="hljs-comment">//1.构造器私有化</span><br>    <span class="hljs-comment">//2.在类的内部直接创建</span><br>    <span class="hljs-comment">//3.提供一个公共的static方法，返回gf对象</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">GirlFriend</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GirlFriend <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> gf;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;GirlFriend&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016144202025.png" srcset="/img/loading.gif" lazyload alt="image-20221016144202025"></p>
<h3 id="懒汉式"><a href="#懒汉式" class="headerlink" title="懒汉式"></a>懒汉式</h3><p>*懒汉模式：只有在**用户调用方法时,*<em>才会创建对象,之后再次调用,返回的是同一对象</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.single_;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleTon02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> Cat.getInstance();<br>        System.out.println(instance);<br>        <span class="hljs-comment">//再次调用getInstance</span><br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">instance2</span> <span class="hljs-operator">=</span> Cat.getInstance();<br>        System.out.println(instance2);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Cat cat;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">999</span>;<br>    <span class="hljs-comment">//1.仍然构造器私有化</span><br>    <span class="hljs-comment">//2.定义一个static静态属性对象</span><br>    <span class="hljs-comment">//3.提供一个public的static方法,可以返回一个Cat对象</span><br>    <span class="hljs-comment">//4.懒汉式，只有当用户使用getinstance时，才返回cat对象，而后面再次调用时，会返回上次创建的cat对象，从而保证了单利</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Cat</span><span class="hljs-params">(String name)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        System.out.println(<span class="hljs-string">&quot;构造器被调用...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Cat <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">if</span> (cat == <span class="hljs-literal">null</span>)&#123; <span class="hljs-comment">//如果还没有创建cat对象</span><br>            cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">&quot;小可爱&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> cat;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Cat&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="饿汉式和懒汉式的区别"><a href="#饿汉式和懒汉式的区别" class="headerlink" title="饿汉式和懒汉式的区别"></a>饿汉式和懒汉式的区别</h3><ol>
<li>两者最主要的区别在于创建对象的<strong>时机不同</strong>：饿汉式是在类加载就创建了对象实例，而懒汉式是在使用时才创建。</li>
<li>饿汉式不存在线程安全问题，<strong>懒汉式存在线程安全问题</strong>。</li>
<li>饿汉式存在<strong>浪费资源</strong>的问题。如果程序员一个对象实例都没有使用，那么饿汉式创建的对象就浪费了。</li>
<li>在javaSE标准类中，java.lang.Runtime就是经典的单例模式</li>
</ol>
<h2 id="6-final"><a href="#6-final" class="headerlink" title="6.final"></a>6.final</h2><p>final可以修饰类、属性、方法和局部变量。</p>
<p>在某些情况下会使用到final：</p>
<ol>
<li><p>当不希望类被继承时，可以用final修饰</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016154126410.png" srcset="/img/loading.gif" lazyload alt="image-20221016154126410" style="zoom:50%;" />
</li>
<li><p>当不希望父类的某个方法被子类覆盖&#x2F;重写时，可以用final关键字修饰</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016154302252.png" srcset="/img/loading.gif" lazyload alt="image-20221016154302252" style="zoom:50%;" />
</li>
<li><p>当不希望类的某个属性的值被修改，可以用final修饰</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016154538557.png" srcset="/img/loading.gif" lazyload alt="image-20221016154538557" style="zoom:50%;" />
</li>
<li><p>当不希望某个局部变量被修改，可以用final修饰</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016154749199.png" srcset="/img/loading.gif" lazyload alt="image-20221016154749199" style="zoom:50%;" /></li>
</ol>
<h3 id="注意事项和细节讨论"><a href="#注意事项和细节讨论" class="headerlink" title="注意事项和细节讨论"></a>注意事项和细节讨论</h3><ol>
<li><p>final修饰的属性又叫常量，一般 用XX_XX_XX来命名</p>
</li>
<li><p>final修饰的属性<strong>在定义时</strong>，<strong>必须赋初值</strong>，并且以后不能再修改，赋值可以在如下位置之一【选择一个位置赋初值即可】：</p>
<ol>
<li>定义时：如public final double TAX_RATE &#x3D; 0.08;</li>
<li>在构造器中</li>
<li>在代码块中</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> <span class="hljs-variable">TAX_RATE</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.08</span>;<span class="hljs-comment">//定义时</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> TAX_RATE2;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> TAX_RATE3;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AA</span><span class="hljs-params">()</span>&#123;<span class="hljs-comment">//在构造器中</span><br>        TAX_RATE2=<span class="hljs-number">1.1</span>;<br>    &#125;<br>    &#123;<span class="hljs-comment">//在代码块赋值</span><br>        TAX_RATE3=<span class="hljs-number">8.8</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>如果final修饰的属性是静态的，则初始化的位置只能是</p>
<ol>
<li>在定义时</li>
<li>在静态代码块</li>
</ol>
<p>不能再构造器中赋值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> <span class="hljs-variable">TAX_RATE</span> <span class="hljs-operator">=</span> <span class="hljs-number">99.9</span>;<span class="hljs-comment">//定义时</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> TAX_RATE2;<br>    <span class="hljs-keyword">static</span>&#123;<span class="hljs-comment">//静态代码块</span><br>        TAX_RATE2 = <span class="hljs-number">3.3</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>final类不能继承，但是可以实例化对象（new）</p>
</li>
<li><p>如果类不是final类，但是含有final方法，则该方法虽然不能重写，但是可以被继承</p>
</li>
<li><p>一般来说，如果一个类已经是final类了，就没有必要再将方法修饰成final方法</p>
</li>
<li><p>final不能修饰构造方法（即构造器）</p>
</li>
<li><p>final和static往往搭配使用，效率更高，不会导致类加载，底层编译器做了优化处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FinalDetail01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(BBB.num);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BBB</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;<br>    <span class="hljs-keyword">static</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;BBB静态代码块被执行&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016160659378.png" srcset="/img/loading.gif" lazyload alt="image-20221016160659378" style="zoom:50%;" />


</li>
<li><p>包装类（Integer,Double,Float,Boolean等都是final),String也是final类</p>
</li>
</ol>
<h3 id="练习-1"><a href="#练习-1" class="headerlink" title="练习"></a>练习</h3><h4 id="题目1-1"><a href="#题目1-1" class="headerlink" title="题目1"></a>题目1</h4><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016160935275.png" srcset="/img/loading.gif" lazyload alt="image-20221016160935275" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FinalExercise01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Circle</span> <span class="hljs-variable">circle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>(<span class="hljs-number">5.0</span>);<br>        System.out.println(circle.calArea());<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> radius;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> PI; <span class="hljs-comment">// = 3.14</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Circle</span><span class="hljs-params">(<span class="hljs-type">double</span> radius)</span> &#123;<span class="hljs-comment">//构造器</span><br>        <span class="hljs-built_in">this</span>.radius = radius;<br><span class="hljs-comment">//        PI = 3.14;</span><br>    &#125;<br>    &#123;<br>        PI = <span class="hljs-number">3.14</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calArea</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> PI * radius * radius;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="题目2-1"><a href="#题目2-1" class="headerlink" title="题目2"></a>题目2</h4><p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221016161811839.png" srcset="/img/loading.gif" lazyload alt="image-20221016161811839"></p>
<p>错误，final常量不能再修改，例如++x。</p>
<h2 id="7-抽象类"><a href="#7-抽象类" class="headerlink" title="7.抽象类"></a>7.抽象类</h2><p>当父类的某些方法，需要声明，但又不确定如何实现时，可以将其生命为抽象方法，这个类就是抽象类。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Abstract01</span>&#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<br>	&#125;<br>&#125;<br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br>	<span class="hljs-keyword">private</span> String name;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Animal</span><span class="hljs-params">(String name)</span>&#123;<br>		<span class="hljs-built_in">this</span>.name = name;<br>	&#125;<br>	<span class="hljs-comment">//这里实现了eat，但无意义</span><br>	<span class="hljs-comment">//即：父类方法不确定性的问题</span><br>	<span class="hljs-comment">//考虑将给方法设计为抽象（abstract）方法</span><br>	<span class="hljs-comment">//所谓抽象方法就是没有实现的方法</span><br>	<span class="hljs-comment">//所谓没有实现就是指，没有方法体</span><br>	<span class="hljs-comment">//当一个类中存在抽象方法时，需要将该类声明为abstract类</span><br>	<span class="hljs-comment">//一般来说，抽象类会被继承，由其子类来实现方法。</span><br>  <br>	<span class="hljs-comment">// public void eat()&#123;</span><br>	<span class="hljs-comment">// 	System.out.println(&quot;这是一个动物，但是不知道吃什么..&quot;);</span><br>	<span class="hljs-comment">// &#125;</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>当一个类中存在抽象方法时，需要将该类声明为abstract类。</p>
<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><ol>
<li><p>用abstract关键字来修饰一个类时，这个类就叫抽象类；abstract关键字来修饰一个方法时，这个方法就叫抽象方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">访问修饰符 <span class="hljs-keyword">abstract</span> 类名&#123;<br>&#125;<br>访问修饰符 <span class="hljs-keyword">abstract</span> 返回类型 方法名(参数列表);<span class="hljs-comment">//无方法体</span><br></code></pre></td></tr></table></figure>


</li>
<li><p>抽象类的价值更多用在设计。设计者设计好后，让子类继承并实现抽象类。</p>
</li>
<li><p>抽象类是考官比较爱提问的知识点，在框架和设计模式使用较多</p>
</li>
</ol>
<h3 id="注意事项-amp-细节"><a href="#注意事项-amp-细节" class="headerlink" title="注意事项&amp;细节"></a>注意事项&amp;细节</h3><ol>
<li><p>抽象类不能被实例化（不可以new）</p>
</li>
<li><p>抽象类不一定要包含abstract方法，可以包含非abstract方法。</p>
</li>
<li><p>一旦包含了abstract方法，这个类必须声明为abstrat</p>
</li>
<li><p>abstract只能修饰类和方法</p>
</li>
<li><p>抽象类可以有任意成员【<strong>抽象类本质还是类</strong>】</p>
<p>例如：非抽象方法，构造器，静态属性等。</p>
</li>
<li><p>抽象类不能有主题，及不能实现</p>
<p>例如：abstract void aaa(){}; 是错误的</p>
</li>
<li><p>如果一个类继承了抽象类，则它必须实现抽象类的所有抽象方法，除非它自己也声明为abstract类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">E</span>&#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-comment">//继承，要么本身也是abstract类</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">F</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">E</span>&#123;<br>&#125;<br><span class="hljs-comment">//要么实现抽象类的所有抽象方法</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">G</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">E</span>&#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">//这里等于实现了父类E的抽象方法，所谓实现方法，就是有方法体</span><br>	&#125;<br>&#125; <br></code></pre></td></tr></table></figure>
</li>
<li><p>抽象方法不能使用<strong>private、final</strong>和<strong>static</strong>来修饰。因为这些关键字都是<strong>和重写相违背</strong>的。</p>
</li>
</ol>
<h3 id="课堂练习"><a href="#课堂练习" class="headerlink" title="课堂练习"></a>课堂练习</h3><p>题目1：</p>
<p>abstract final class A{} 能通过编译吗？ why？</p>
<p>abstract public static void test2() 能通过编译吗？ why？</p>
<p>abstract private void test3() 能通过编译吗？ why？</p>
<p>答：三个都不能，因为final、private、static关键字和abstract相违背。</p>
<p>题目2：</p>
<blockquote>
<p>编写一个Employee类，声明为抽象类，包含如下三个属性：name， id， salary。提供必要的构造器和抽象方法：work()。对于Manager类来说，他既是员工，还具有奖金（bonus）的属性。</p>
<p>请使用继承的思想，设计CommonEmployee类和Manager类，要求类中提供必要的方法进行属性访问，实现work()，提示“经理&#x2F;普通员工 名字 工作中….”</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span>&#123;<br>	<span class="hljs-keyword">private</span> String name;<br>	<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br>	<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> salary;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(String name,<span class="hljs-type">int</span> id,<span class="hljs-type">int</span> salary)</span>&#123;<br>		<span class="hljs-built_in">this</span>.id = id;<br>		<span class="hljs-built_in">this</span>.name = name;<br>		<span class="hljs-built_in">this</span>.salary = salary;<br>	&#125;<br>	<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>&#123;<br>		<span class="hljs-keyword">return</span> name;<br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getId</span><span class="hljs-params">()</span>&#123;<br>		<span class="hljs-keyword">return</span> id;<br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">salary</span><span class="hljs-params">()</span>&#123;<br>		<span class="hljs-keyword">return</span> salary;<br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span>&#123;<br>		<span class="hljs-built_in">this</span>.name = name;<br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>&#123;<br>		<span class="hljs-built_in">this</span>.id = id;<br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSalary</span><span class="hljs-params">(<span class="hljs-type">int</span> salary)</span>&#123;<br>		<span class="hljs-built_in">this</span>.salary = salary;<br>	&#125;<br><br><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Manage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Employee</span>&#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> bonus;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>&#123;<br>		System.out.println(<span class="hljs-string">&quot;经理&quot;</span>+getName()+<span class="hljs-string">&quot;工作中...&quot;</span>);<br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Manage</span><span class="hljs-params">(String name,<span class="hljs-type">int</span> id,<span class="hljs-type">int</span> salary)</span>&#123;<br>		<span class="hljs-built_in">super</span>(name,id,salary); <br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getBouns</span><span class="hljs-params">()</span>&#123;<br>		<span class="hljs-keyword">return</span> bonus;<br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBouns</span><span class="hljs-params">(<span class="hljs-type">int</span> bonus)</span>&#123;<br>		<span class="hljs-built_in">this</span>.bonus = bonus;<br>	&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonEmployee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Employee</span>&#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">CommonEmployee</span><span class="hljs-params">(String name,<span class="hljs-type">int</span> id,<span class="hljs-type">int</span> salary)</span>&#123;<br>		<span class="hljs-built_in">super</span>(name,id,salary); <br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>&#123;<br>		System.out.println(<span class="hljs-string">&quot;普通员工&quot;</span>+getName()+<span class="hljs-string">&quot;工作中...&quot;</span>);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="模板设计模块"><a href="#模板设计模块" class="headerlink" title="模板设计模块"></a>模板设计模块</h3><p>需求：</p>
<blockquote>
<p>1.要有多个类，完成不同的job</p>
<p>2.要求能够统各自完成任务的时间</p>
</blockquote>
<p>返回时间可以使用System类下的一个方法long。</p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221028160835539.png" srcset="/img/loading.gif" lazyload alt="image-20221028160835539"></p>
<p>class AA:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> &#123;<br>    <span class="hljs-comment">//计算任务</span><br>    <span class="hljs-comment">//1+...+100000</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span>&#123;<br><br><br>        <span class="hljs-comment">//得到开始的时间</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80000</span>; i++) &#123;<br>            num +=i;<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;AA执行时间:&quot;</span>+(end-start));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>class BB:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//得到开始的时间</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">800000</span>; i++) &#123;<br>            num +=i;<br>        &#125;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;BB执行时间:&quot;</span>+(end-start));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>冗余度太高，如果需要计算时间，需要重新添加获取时间的代码。</p>
<p>把获取时间单独作为一个方法calculateTime。</p>
<p>new class AA:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">calculateTime</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//得到开始的时间</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        job();<br>        <span class="hljs-comment">//得到结束的时间</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;AA执行时间:&quot;</span> + (end - start));<br>    &#125;<br>    <span class="hljs-comment">//计算任务</span><br>    <span class="hljs-comment">//1+...+100000</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80000</span>; i++) &#123;<br>            num += i;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>但若是还有其他类（CC类、或者DD类）需要计算时间，仍然很麻烦。</p>
<p>所以可以使用抽象的父类，包含calculateTime方法和抽象的job类。</p>
<p>所以设计一个抽象类Template，完成以下功能</p>
<ol>
<li>编写calculateTime()，可以计算某段代码的耗时时间</li>
<li>编写抽象方法</li>
<li>编写一个子类Sub，继承抽象类Template，并实现code方法</li>
<li>编写一个测试类TestTemplate</li>
</ol>
<p>抽象类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Template</span> &#123;<span class="hljs-comment">//抽象类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span>;<span class="hljs-comment">//抽象方法</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">calculateTime</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//实现方法，调用job</span><br>        <span class="hljs-comment">//得到开始的时间</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        job();<span class="hljs-comment">//动态绑定机制</span><br>        <span class="hljs-comment">//得到结束的时间</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        System.out.println(<span class="hljs-string">&quot;执行时间:&quot;</span> + (end - start));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>子类AA：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Template</span>&#123;<br>    <span class="hljs-comment">//计算任务</span><br>    <span class="hljs-comment">//1+...+100000</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">job</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">80000</span>; i++) &#123;<br>            num += i;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestTemplate</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">AA</span> <span class="hljs-variable">aa</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AA</span>();<br>        aa.job();<br>        <span class="hljs-type">BB</span> <span class="hljs-variable">bb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BB</span>();<br>        bb.job();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221028164714674.png" srcset="/img/loading.gif" lazyload alt="image-20221028164714674" style="zoom:50%;" />

<h2 id="8-接口"><a href="#8-接口" class="headerlink" title="8.接口"></a>8.接口</h2><p>现实中的接口：</p>
<p>例如usb插槽就是现实中的接口，可以把手机、相机、u盘插在usb插槽上，不容担心插槽的专一性，因为做usb插槽的厂家和做各种设备的厂家都遵守了统一的规范，包括尺寸、排线等等。</p>
<p>接口在程序中也会存在，下面用程序来模拟一下接口：</p>
<p>创建一个接口UsbInterface:</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221028170331045.png" srcset="/img/loading.gif" lazyload alt="image-20221028170331045" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UsbInterface</span> &#123; <span class="hljs-comment">//接口</span><br>    <span class="hljs-comment">//规定接口的相关方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>再穿件一个Phone类，implement是实现接口的关键字：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Phone类实现 UsbInterface</span><br><span class="hljs-comment">//即 Phone类需要实现 UsbInterface接口 规定/声明的方法</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UsbInterface</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;手机开始了工作&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;手机停止了工作&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Camera类，和Phone类类似：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Camera</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UsbInterface</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;相机开始了工作。&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;相机停止了工作。&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Computer类，可以插接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Computer</span> &#123;<br>    <span class="hljs-comment">//编写一个方法，表示计算机工作</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">(UsbInterface usbInterface)</span>&#123;<br>      <span class="hljs-comment">//通过接口，调用方法</span><br>        usbInterface.start();<br>        usbInterface.stop();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Interface01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//创建手机、相机</span><br>        <span class="hljs-type">Camera</span> <span class="hljs-variable">camera</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Camera</span>();<br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>();<br>        <span class="hljs-comment">//创建计算机</span><br>        <span class="hljs-type">Computer</span> <span class="hljs-variable">computer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Computer</span>();<br>        computer.work(phone); <span class="hljs-comment">//把手机接入到计算机</span><br>        System.out.println(<span class="hljs-string">&quot;============&quot;</span>);<br>        computer.work(camera); <span class="hljs-comment">//把相机接入到计算机</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221028171609848.png" srcset="/img/loading.gif" lazyload alt="image-20221028171609848" style="zoom:50%;" />

<h3 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">interface 接口名&#123;<br>	属性;<br>	方法;(<span class="hljs-number">1.</span>抽象方法 <span class="hljs-number">2.</span>默认实现方法 <span class="hljs-number">3.</span>静态方法)<br>	必须实现的接口的抽象方法<br>&#125;<br>class 类名 implement 接口&#123;<br>  自己属性;<br>  自己方法;<br>  必须实现的接口的抽象方法<br>&#125;<br></code></pre></td></tr></table></figure>

<p>小结：</p>
<ol>
<li><p>在Jdk7.0前，接口里的所有方法都没有方法体，即都是抽象方法</p>
</li>
<li><p>jdk8.0后接口可以有静态方法，默认方法，也就是说接口中可以有方法的具体实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AInterface</span> &#123;<br>    <span class="hljs-comment">//写属性</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-comment">//写方法</span><br>    <span class="hljs-comment">//在接口中，抽象方法，可以省略abstract关键字</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">//在jdk8后，可以有默认实现方法，但需要使用default关键字修饰</span><br>    <span class="hljs-keyword">default</span> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;ok...&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//在jdk8后，可以有静态方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;cry....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<p>接口存在的意义：更好管理。例如三个员工写的类，同样的功能使用的不同方法，会很难管理。可以通过接口进行统一，显示员工写的方法。</p>
<h3 id="注意事项和细节"><a href="#注意事项和细节" class="headerlink" title="注意事项和细节"></a>注意事项和细节</h3><ol>
<li><p>接口<strong>不能被实例化</strong>（同抽象类）</p>
</li>
<li><p>接口中所有的方法是public方法，接口中抽象方法，可以不用abstract修饰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span>&#123;<br>    <span class="hljs-comment">//void say() 是错误的，范围被缩小了</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span><br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>一个普通类实现接口，就必须将该接口的所有方法都实现</p>
</li>
<li><p>抽象类去实现接口时，可以不实现接口的抽象方法</p>
</li>
<li><p><strong>一个类</strong>同时可以实现<strong>多个接口</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IB</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IC</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Pig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IB</span>,IC&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;&#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>接口中的属性只能是final的</strong>，而且是<strong>public static final 修饰符</strong>。</p>
<p>比如int a&#x3D;1;实际上是public static final int a &#x3D; 1;（必须初始化）</p>
</li>
<li><p>接口中属性的访问形式：接口名.属性名</p>
</li>
<li><p>一个接口不能继承其它的类，但是<strong>可以继承多个别的接口</strong></p>
</li>
<li><p>接口的修饰符只能是public和默认，这点和类的修饰符是一样的</p>
</li>
</ol>
<h3 id="课堂练习1"><a href="#课堂练习1" class="headerlink" title="课堂练习1"></a>课堂练习1</h3><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221029001540649.png" srcset="/img/loading.gif" lazyload alt="image-20221029001540649" style="zoom:50%;" />

<p>解析：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">A</span>&#123;<br>  <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">23</span>; <span class="hljs-comment">//等价 public static final int a = 23;</span><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">A</span>&#123; <span class="hljs-comment">//正确</span><br>&#125;<br><br><span class="hljs-comment">//main中：</span><br><span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(); <span class="hljs-comment">//OK</span><br>System.out.println(b.a); <span class="hljs-comment">//正确，23</span><br>System.out.println(A.a); <span class="hljs-comment">//正确，23</span><br>System.out.println(B.a); <span class="hljs-comment">//正确，23 </span><br></code></pre></td></tr></table></figure>



<h3 id="实现接口-vs-继承类"><a href="#实现接口-vs-继承类" class="headerlink" title="实现接口 vs 继承类"></a>实现接口 vs 继承类</h3><p>实现接口是对单继承模式的补充。</p>
<p>举例：</p>
<p>猴子会爬树，小猴子继承了爬树的能力也会爬树，但不能像鱼一样游泳或者和鸟一样飞翔。</p>
<p>所以可以用接口来拓展功能。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExtendsVsInterface</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        <span class="hljs-type">LittleMonkey</span> <span class="hljs-variable">wuKong</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LittleMonkey</span>(<span class="hljs-string">&quot;悟空&quot;</span>);<br>        wuKong.climbing();<br>        wuKong.swimming();<br>        wuKong.flying();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//猴子</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monkey</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">climbing</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(name+<span class="hljs-string">&quot;会爬树&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Monkey</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//游泳</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Fishable</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">swimming</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-comment">//飞翔</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Birdable</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">flying</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-comment">//小猴子，继承</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LittleMonkey</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Monkey</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Fishable</span>,Birdable &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LittleMonkey</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">super</span>(name);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swimming</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(getName()+<span class="hljs-string">&quot;通过学习,可以像鱼儿一样游泳&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flying</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(getName()+<span class="hljs-string">&quot;通过学习，可以像鸟儿一样飞翔&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221029154749534.png" srcset="/img/loading.gif" lazyload alt="image-20221029154749534" style="zoom:50%;" />

<p>小结：</p>
<p>当子类继承父类，就自动的拥有父类的功能。</p>
<p>如果子类需要拓展功能，可以通过接口的方式扩展。</p>
<ul>
<li>接口和继承<strong>解决的问题不同</strong><ul>
<li>继承的价值主要在于：解决代码的<strong>复用性和可维护性。</strong></li>
<li>接口的价值主要在于：设计。设计好各种规范（方法），让其他类去实现这些方法。即更加的灵活。</li>
</ul>
</li>
<li>接口比继承更加灵活<ul>
<li>继承满足is - a的关系，而接口只需满足like - a的关系</li>
</ul>
</li>
<li>接口在一定程度上实现代码解耦【即：接口规范性+动态绑定】</li>
</ul>
<h3 id="接口多态特性"><a href="#接口多态特性" class="headerlink" title="接口多态特性"></a>接口多态特性</h3><ol>
<li><p>多态参数</p>
<p>例如之前的Usb接口案例，UsbInterface usb既可以接受手机对象，又可以接受相机对象。体现了接口多态（接口引用可以指向实现了接口的类的对象）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfacePolyParameter</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//接口的多态提现</span><br>        <span class="hljs-comment">//接口类型的变量 if01 可以指向 实现了IF接口的对象实例</span><br>        <span class="hljs-type">IF</span> <span class="hljs-variable">if01</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Monster</span>();<br>        if01 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();<br><br>        <span class="hljs-comment">//继承提现的多态</span><br>        <span class="hljs-comment">//父类类型的变量 a 可以指向 继承了AAA的子类的对象实例</span><br>        <span class="hljs-type">AAA</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BBB</span>();<br>        a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CCC</span>();<br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IF</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Monster</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IF</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IF</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AAA</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BBB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AAA</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CCC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AAA</span>&#123;&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>多态数组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfacePolyArr</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//多态数组</span><br>        Usb[] usbs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Usb</span>[<span class="hljs-number">2</span>];<br>        usbs[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone_</span>();<br>        usbs[<span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Camera_</span>();<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        给Usb数组中，存放Phone和相机对象，Phone类还有一个特有的方法call()</span><br><span class="hljs-comment">        请遍历Usb数组，如果是Phone对象，除了调用Usb接口定义的方法外</span><br><span class="hljs-comment">        还需要调用Phone特有方法call</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; usbs.length; i++) &#123;<br>            usbs[i].work();<span class="hljs-comment">//动态绑定..</span><br>            <span class="hljs-comment">//如果需要调用call，不能直接循环</span><br>            <span class="hljs-comment">//和前面一样，需要进行类型的向下转型</span><br>            <span class="hljs-keyword">if</span>(usbs[i] <span class="hljs-keyword">instanceof</span> Phone_)&#123; <span class="hljs-comment">//判断他的运行类型是Phone_</span><br>                ((Phone_) usbs[i]).call();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Usb</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone_</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Usb</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;手机可以打电话...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;手机工作中...&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Camera_</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Usb</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;相机工作中...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>手机工作中…<br>手机可以打电话…<br>相机工作中…</p>
</li>
<li><p>接口存在<strong>多态传递</strong>现象</p>
<p>例如A类有A接口，而B接口继承了A接口，则意味着A类也可以实现B接口。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterfacePolyPass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//接口类型的变量可以指向，实现了该接口的类的对象实例</span><br>        <span class="hljs-type">IG</span> <span class="hljs-variable">ig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>();<br>        <span class="hljs-comment">//如果IG 继承了IH接口，而Teacher类实现了IG接口</span><br>        <span class="hljs-comment">//那么，实际上就相当于Teacher类也实现了IH接口</span><br>        <span class="hljs-type">IH</span> <span class="hljs-variable">ih</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IH</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IG</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IH</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Teacher</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IG</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="课堂练习2"><a href="#课堂练习2" class="headerlink" title="课堂练习2"></a>课堂练习2</h3><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221030004713846.png" srcset="/img/loading.gif" lazyload alt="image-20221030004713846" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">A</span>&#123;<br>  <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">//等价于public static final int x = 0;</span><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>&#123;<br>  <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">//普通属性</span><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">A</span>&#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pX</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//System.out.println(x); //有问题，原因：不明确x是谁</span><br>    <span class="hljs-comment">//修改：访问接口的x使用 A.x ，访问父类的x使用 super.x .</span><br>    System.out.println(A.x+<span class="hljs-string">&quot; &quot;</span>+<span class="hljs-built_in">super</span>.x); <br>  &#125;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">C</span>().pX();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：0 1</p>
<h2 id="9-内部类（难点）"><a href="#9-内部类（难点）" class="headerlink" title="9.内部类（难点）"></a>9.内部类（难点）</h2><blockquote>
<p>基本介绍：</p>
<p>一个类的内部又完整的嵌套了另一个类结构。被嵌套的类称为内部类（inner class），嵌套其他类的类称为外部类（outer class）。是我们类的第五大成员【思考：类的五大成员是哪些?】。</p>
<p>内部类最大的<strong>特点</strong>就是可以<strong>直接访问私有属性</strong>，并且可以体现类与类之间的包含关系。</p>
</blockquote>
<p>基本语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span>&#123; <span class="hljs-comment">//外部类</span><br>  <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner</span>&#123; <span class="hljs-comment">//内部类</span><br>  &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Other</span>&#123; <span class="hljs-comment">//外部其他类</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClass01</span> &#123; <span class="hljs-comment">//外部其他类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>; <span class="hljs-comment">//属性</span><br>    <span class="hljs-comment">//构造器</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Outer</span><span class="hljs-params">(<span class="hljs-type">int</span> n1)</span> &#123;<br>        <span class="hljs-built_in">this</span>.n1 = n1;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">//方法</span><br>        System.out.println(<span class="hljs-string">&quot;m1()&quot;</span>);<br>    &#125;<br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;代码块...&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner</span>&#123; <span class="hljs-comment">//内部类</span><br>    &#125;<br></code></pre></td></tr></table></figure>



<h3 id="内部类的分类"><a href="#内部类的分类" class="headerlink" title="内部类的分类"></a>内部类的分类</h3><ul>
<li>定义在外部类局部位置上（比如方法内）：<ol>
<li>局部内部类（有类名）</li>
<li>匿名内部类（没有类名【重点】）</li>
</ol>
</li>
<li>定义在外部类的成员位置上<ol>
<li>成员内部类（没用static修饰）</li>
<li>静态内部类（使用static修饰）</li>
</ol>
</li>
</ul>
<h3 id="1-局部内部类"><a href="#1-局部内部类" class="headerlink" title="1.局部内部类"></a>1.局部内部类</h3><p>说明：局部内部类是定义在外部类的局部位置，比如说<strong>方法中</strong>，并且<strong>有类名</strong>。</p>
<ol>
<li><p>可以直接访问外部类的所有成员，包括私有的。</p>
</li>
<li><p><strong>不能添加访问修饰符</strong>，因为它的低位就是一个局部变量，局部变量是不能使用修饰符的。但是可以使用final修饰，因为局部变量也可以使用final。</p>
</li>
<li><p><strong>作用域</strong>：仅仅在定义它的方法或代码块中。</p>
</li>
<li><p>局部内部类–访问—&gt;外部类的成员【访问方式：直接访问】</p>
</li>
<li><p>外部类—访问—&gt;局部内部类的成员【访问方式：创建对象，在访问（注意：必须在作用域内）】</p>
</li>
<li><p>外部其他类–不能访问—&gt;局部内部类（因为局部内部类地位是一个局部变量）</p>
</li>
<li><p>如果外部类和局部内部类重名时，默认遵循就近原则，如果想访问外部类的成员，则可以使用（外部类名.this.成员）去访问。</p>
<p><code>System.out.println(&quot;外部类的n2=&quot;+外部类名.this.n2);</code></p>
</li>
</ol>
<p>例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">局部内部类的使用</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalInnerClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer02</span> <span class="hljs-variable">outer02</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer02</span>();<br>        outer02.m1();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer02</span>&#123; <span class="hljs-comment">//外部变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<span class="hljs-comment">//私有方法</span><br>        System.out.println(<span class="hljs-string">&quot;Outer02 m2()&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">//方法</span><br>        <span class="hljs-comment">//1.局部内部类是定义在外部类的局部位置，通常在方法</span><br>        <span class="hljs-comment">//3.不能添加访问修饰符,但是可以使用final修饰</span><br>        <span class="hljs-comment">//4.作用域：仅仅在定义它的方法或代码块中。</span><br>        <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner02</span>&#123;<span class="hljs-comment">//局部内部类(本质仍然是一个类)</span><br>            <span class="hljs-comment">//2.可以直接访问外部类的所有成员，包括私有的</span><br>            <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">800</span>;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<br>                <span class="hljs-comment">//5.局部内部类可以直接访问外部类的成员，如下，外部类n1和m2()</span><br>                <span class="hljs-comment">//7.如果外部类和局部内部类重名时，默认遵循就近原则，</span><br>                <span class="hljs-comment">//  如果想访问外部类的成员，则可以使用（外部类名.this.成员）去访问。</span><br>                <span class="hljs-comment">//  Outer02.this 本类就是外部类的对象，即哪个对象调用了m1方法，Outer02.this就指向这个对象</span><br>                System.out.println(<span class="hljs-string">&quot;n1=&quot;</span>+n1 + <span class="hljs-string">&quot; 外部类的n1=&quot;</span>+Outer02.<span class="hljs-built_in">this</span>.n1);<br>                m2();<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//6.外部类在方法中，可以创建Inner02的对象，然后调用方法即可</span><br>        <span class="hljs-type">Inner02</span> <span class="hljs-variable">inner02</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner02</span>();<br>        inner02.f1();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-symbol">n1</span>=<span class="hljs-number">800</span> 外部类的<span class="hljs-symbol">n1</span>=<span class="hljs-number">100</span><br>Outer<span class="hljs-number">02</span> <span class="hljs-name">m2</span><span class="hljs-comment">()</span><br></code></pre></td></tr></table></figure>

<p>小结：</p>
<p>（1）局部内部类定义在方法中&#x2F;代码块 </p>
<p>（2）作用域在方法体或者代码块中</p>
<p>（3）本质仍然是一个类</p>
<h3 id="2-匿名内部类（重要）"><a href="#2-匿名内部类（重要）" class="headerlink" title="2.匿名内部类（重要）"></a>2.匿名内部类（重要）</h3><p>说明：匿名内部类是定义在外部类的局部位置，比如方法中，并且没有类名。</p>
<p>解读：（1）本质是类 （2）内部类 （3）该类没有名字 （4）同时还是一个对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//基本语法</span><br><span class="hljs-keyword">new</span> 类或接口(参数列表)&#123;<br>  类体<br>&#125;;<br></code></pre></td></tr></table></figure>



<p>基于接口的匿名内部类例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">    演示匿名内部类的使用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnonymousInnerClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer04</span> <span class="hljs-variable">outer04</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer04</span>();<br>        outer04.method();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer04</span>&#123; <span class="hljs-comment">//外部类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//基于接口的匿名内部类</span><br>        <span class="hljs-comment">//解析：</span><br>        <span class="hljs-comment">//1.需求：想使用接口A，并创建对象</span><br>        <span class="hljs-comment">//2.传统方式就是写一个类，实现该接口，并创建对象</span><br>        <span class="hljs-type">Tiger</span> <span class="hljs-variable">tiger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tiger</span>();<br>        tiger.cry();<br>        <span class="hljs-comment">//3.需求是老虎/狗狗只使用一次，后面不再使用</span><br>        <span class="hljs-comment">//4.可以使用匿名内部类来简化开发</span><br>        <span class="hljs-comment">//5.tiger2的编译类型？ IA</span><br>        <span class="hljs-comment">//6.tiger2的运行类型？ 匿名内部类</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            底层会分配一个类名，例如Outer04$1</span><br><span class="hljs-comment">            class XXXX implements IA&#123;</span><br><span class="hljs-comment">                @Override</span><br><span class="hljs-comment">                public void cry() &#123;</span><br><span class="hljs-comment">                    System.out.println(&quot;老虎再一次嗷嗷叫。&quot;);&#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//7.jdk底层在创建匿名内部类Outer04$1，马上就创建了Outer04$1实例，</span><br>        <span class="hljs-comment">//  并且把地址返回给了tiger2</span><br>        <span class="hljs-comment">//8.匿名内部类使用一次，就不能再使用</span><br>        <span class="hljs-type">IA</span> <span class="hljs-variable">tiger2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IA</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;老虎再一次嗷嗷叫。&quot;</span>);<br>            &#125;<br>        &#125;;<br>        System.out.println(<span class="hljs-string">&quot;tiger的运行类型=&quot;</span>+tiger2.getClass());<br>        tiger2.cry();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span>&#123;<span class="hljs-comment">//接口</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tiger</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span>&#123; <span class="hljs-comment">//老虎类</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;老虎嗷嗷叫。&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;小狗汪汪叫。&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span>&#123;<span class="hljs-comment">//类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Father</span><span class="hljs-params">(String name)</span>&#123;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>老虎嗷嗷叫。<br>tiger2的运行类型&#x3D;class com.hspedu.innerclass.Outer04$1<br>老虎再一次嗷嗷叫。</p>
<p>基于抽象类的匿名内部类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">    演示匿名内部类的使用</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnonymousInnerClass</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer04</span> <span class="hljs-variable">outer04</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer04</span>();<br>        outer04.method();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer04</span>&#123; <span class="hljs-comment">//外部类</span><br>    <br><span class="hljs-comment">/*</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">....</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><br>        <span class="hljs-comment">//演示基于类的匿名内部类</span><br>        <span class="hljs-comment">//分析</span><br>        <span class="hljs-comment">//1.father编译类型——Father</span><br>        <span class="hljs-comment">//2.father运行类型——Outer04$2(如果不带大括号，还是Father）</span><br>        <span class="hljs-comment">//3.底层会创建匿名内部类</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">            class Outer04$2 extends Father&#123;</span><br><span class="hljs-comment">                @Override</span><br><span class="hljs-comment">                public void test() &#123;</span><br><span class="hljs-comment">                    System.out.println(&quot;匿名内部类重写了test方法&quot;);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-comment">//4.同时也返回了 匿名内部类Outer04$2的对象</span><br>        <span class="hljs-comment">//5.注意(&quot;jack&quot;)参数列表会传递给构造器</span><br>        <span class="hljs-type">Father</span> <span class="hljs-variable">father</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Father</span>(<span class="hljs-string">&quot;jack&quot;</span>)&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;匿名内部类重写了test方法&quot;</span>);<br>            &#125;<br>        &#125;;<br>        System.out.println(<span class="hljs-string">&quot;father对象的运行类型=&quot;</span>+father.getClass());<br>        father.test();<br><br>        <span class="hljs-comment">//基于抽象类的匿名内部类</span><br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">animal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;小狗吃骨头...&quot;</span>);<br>            &#125;<br>        &#125;;<br>        animal.eat();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">....</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span>&#123;<span class="hljs-comment">//类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Father</span><span class="hljs-params">(String name)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;接收到了name&quot;</span>+name);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>father对象的运行类型&#x3D;class com.hspedu.innerclass.Outer04$2<br>匿名内部类重写了test方法<br>小狗吃骨头…</p>
<h4 id="使用细节-1"><a href="#使用细节-1" class="headerlink" title="使用细节"></a>使用细节</h4><ol>
<li><p>匿名内部类既是一个类的定义，同时他本身也是一个对象。</p>
<p>从语法上看，<strong>既有定义类的特征，也有创建对象的特征。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnoymouslnnerClassDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer05</span> <span class="hljs-variable">outer05</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer05</span>();<br>        outer05.f1();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer05</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">99</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<br><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;匿名内部类重写了 hi方法&quot;</span>);<br>            &#125;<br>        &#125;;<br>        p.hi();<span class="hljs-comment">//动态绑定</span><br><br>        <span class="hljs-comment">//也可以直接调用，匿名内部类也是返回对象</span><br>        <span class="hljs-comment">//class匿名内部类 extends Person()&#123;&#125;</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;匿名内部类重写了 hi方法,哈哈哈&quot;</span>);<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">(String str)</span> &#123;<br>                <span class="hljs-built_in">super</span>.ok(str);<br>            &#125;<br>        &#125;.ok(<span class="hljs-string">&quot;jack&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<span class="hljs-comment">//类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Person hi()&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">(String str)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Person ok()&quot;</span>+str);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//抽象类/接口..</span><br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>匿名内部类重写了 hi方法<br>Person ok()jack</p>
</li>
<li><p>可以直接访问外部类的所有成员，包括私有的</p>
</li>
<li><p><strong>不能添加访问修饰符</strong>，因为它的地位就是一个局部变量</p>
</li>
<li><p>作用域：仅仅在定义它的方法和代码块</p>
</li>
<li><p>匿名内部类–访问—&gt;外部类成员（直接访问）</p>
</li>
<li><p>外部其他类–不能访问—&gt;匿名内部类（因为 匿名内部类地位就是一个局部变量）</p>
</li>
<li><p>如果外部类和匿名内部类的成员<strong>重名时</strong>，匿名访问类的话，默认<strong>就近原则</strong>。</p>
<p>如果想要访问外部类的成员时，则可以使用（外部类名.this.成员）去访问</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnoymouslnnerClassDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer05</span> <span class="hljs-variable">outer05</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer05</span>();<br>        outer05.f1();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer05</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">99</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//创建一个基于类的匿名内部类</span><br>        <span class="hljs-comment">//不能添加访问修饰符，因为它的地位就是一个局部变量</span><br>        <span class="hljs-comment">//作用域：仅仅在定义它的方法或代码块中</span><br>        <span class="hljs-type">Person</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()&#123;<br>            <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">88</span>;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-comment">//如果外部类和匿名内部类的成员重名时，匿名访问类的话，默认就近原则。</span><br>                <span class="hljs-comment">//如果想要访问外部类的成员时，则可以使用（外部类名.this.成员）去访问</span><br>                System.out.println(<span class="hljs-string">&quot;匿名内部类重写了 hi方法 n1=&quot;</span>+n1+<span class="hljs-string">&quot; 外部内的 n1=&quot;</span>+Outer05.<span class="hljs-built_in">this</span>.n1);<br>            &#125;<br>        &#125;;<br>        p.hi();<span class="hljs-comment">//动态绑定</span><br><br>        <span class="hljs-comment">//也可以直接调用，匿名内部类也是返回对象</span><br>        <span class="hljs-comment">//class匿名内部类 extends Person()&#123;&#125;</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;匿名内部类重写了 hi方法,哈哈哈&quot;</span>);<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">(String str)</span> &#123;<br>                <span class="hljs-built_in">super</span>.ok(str);<br>            &#125;<br>        &#125;.ok(<span class="hljs-string">&quot;jack&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<span class="hljs-comment">//类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Person hi()&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ok</span><span class="hljs-params">(String str)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Person ok()&quot;</span>+str);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//抽象类/接口..</span><br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>匿名内部类重写了 hi方法 n1&#x3D;88 外部内的 n1&#x3D;99<br>Person ok()jack</p>
<h4 id="匿名内部类的实践"><a href="#匿名内部类的实践" class="headerlink" title="匿名内部类的实践"></a>匿名内部类的实践</h4><p>最佳实践：把匿名内部类当成实参直接传递，简洁高效。</p>
<p>传统方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClassExercise01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//传统方法</span><br>        f1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Picture</span>());<br>    &#125;<br>    <span class="hljs-comment">//静态方法,形参是接口类型</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">(IL il)</span>&#123;<br>        il.show();<br>    &#125;<br>&#125;<br><span class="hljs-comment">//接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IL</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-comment">//类-&gt;实现IL =&gt; 编程领域（硬编码）</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Picture</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IL</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;这是一幅名画...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>匿名内部类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClassExercise01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//把匿名内部类当成实参直接传递，简洁高效。</span><br>        f1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">IL</span>()&#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;这是一副名画...&quot;</span>);<br>            &#125;<br>        &#125;);<br>    &#125;<br>    <span class="hljs-comment">//静态方法,形参是接口类型</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">(IL il)</span>&#123;<br>        il.show();<br>    &#125;<br>&#125;<br><span class="hljs-comment">//接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IL</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果Picture只需要调用一次，则选择匿名内部类会比较简洁方便。</p>
<p>练习：</p>
<blockquote>
<p>1.有一个铃声接口Bell，里面有个ring方法。（如下）<br>2.有一个手机类Cellphone，具有闹钟功能alarmclock，参数是Bell类型（如下）<br>3.测试手机类的闹钟功能，通过匿名内部类（对象）作为参数，打印：懒猪起床了<br>4.再传入另一个匿名内部类（对象），打印：小伙伴上课了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Bell</span>&#123;<br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CellPhone</span>&#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">alarmclock</span><span class="hljs-params">(Bell bell)</span>&#123;<br>    bell.ring();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClassExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">CellPhone</span> <span class="hljs-variable">test</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CellPhone</span>();<br>        test.alarmClock(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bell</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;懒猪起床了。&quot;</span>);<br>            &#125;<br>        &#125;);<br>        test.alarmClock(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bell</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;小伙伴上课了。&quot;</span>);<br>            &#125;<br>        &#125;);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Bell</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">ring</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CellPhone</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">alarmClock</span><span class="hljs-params">(Bell bell)</span>&#123;<br>        bell.ring();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>懒猪起床了。<br>小伙伴上课了。</p>
<h3 id="3-成员内部类"><a href="#3-成员内部类" class="headerlink" title="3.成员内部类"></a>3.成员内部类</h3><p>说明：成员内部类是定义在外部类的成员位置，并且没有static修饰</p>
<ol>
<li><p>可以直接访问外部类的所有成员，包含私有的</p>
</li>
<li><p>可以添加任意访问修饰符（public、protected、默认、private），因为它的地位就是一个成员。</p>
</li>
<li><p>作用域：整个类体</p>
</li>
<li><p>成员内部类–访问–&gt;外部类（比如：属性）【访问方式：直接访问】</p>
</li>
<li><p>外部类–访问–&gt;内部类【访问方式：创建对象，再访问】</p>
</li>
<li><p>外部其他类–访问–&gt;成员内部类【访问方式：两种（详见例子）】</p>
</li>
<li><p>如果外部类和内部类的成员<strong>重名时</strong>，内部类访问的话，默认<strong>就近原则</strong>。</p>
<p>如果想要访问外部类的成员时，则可以使用（外部类名.this.成员）去访问</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemberInnerClass01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer08</span> <span class="hljs-variable">outer08</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer08</span>();<br>        outer08.t1();<br><br><span class="hljs-comment">//        外部其他类--访问--&gt;成员内部类【访问方式：两种】</span><br>        <span class="hljs-comment">//方法1：</span><br>        <span class="hljs-comment">//解读：</span><br>        <span class="hljs-comment">//outer08.new Inner08();  相当于把Inner08当做是outer08成员</span><br>        Outer08.<span class="hljs-type">Inner08</span> <span class="hljs-variable">inner08</span> <span class="hljs-operator">=</span> outer08.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner08</span>();<br>        inner08.say();<br>        <span class="hljs-comment">//方法2：在外部类中，编写一个方法，可以返回Inner08对象</span><br>        Outer08.<span class="hljs-type">Inner08</span> <span class="hljs-variable">inner08instance</span> <span class="hljs-operator">=</span> outer08.getInner08instance();<br>        inner08instance.say();<br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer08</span>&#123;<span class="hljs-comment">//外部类</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;张三&quot;</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;hi()方法&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">//1.注意：成员内部类，是定义在外部内的成员位置上</span><br>    <span class="hljs-comment">//2.可以添加任意访问修饰符（public、protected、默认、private），因为它的地位就是一个成员。</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner08</span>&#123; <span class="hljs-comment">//成员内部类（没有写在方法中）</span><br>        <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-variable">sal</span> <span class="hljs-operator">=</span> <span class="hljs-number">99.8</span>;<br>        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">66</span>;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;Outer08的n1=&quot;</span> + n1 + <span class="hljs-string">&quot; outer08的name=&quot;</span> + name+ <span class="hljs-string">&quot; 外部类的n1&quot;</span> + Outer08.<span class="hljs-built_in">this</span>.n1);<br>            hi(); <span class="hljs-comment">//成员内部类--访问--&gt;外部类（比如：属性）【访问方式：直接访问】</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//方法，返回一个Inner08实例 （链接第14行例子）</span><br>    <span class="hljs-keyword">public</span> Inner08 <span class="hljs-title function_">getInner08instance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner08</span>();<br>    &#125;<br><br>    <span class="hljs-comment">//写方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">t1</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//使用成员内部类</span><br>        <span class="hljs-comment">//外部类--访问--&gt;内部类【访问方式：创建对象，再访问】</span><br>        <span class="hljs-type">Inner08</span> <span class="hljs-variable">inner08</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner08</span>();<br>        inner08.say();<br>        System.out.println(inner08.sal);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="4-静态内部类"><a href="#4-静态内部类" class="headerlink" title="4.静态内部类"></a>4.静态内部类</h3><p>说明：静态内部类是定义在外部类的成员位置，并且有static修饰。</p>
<ol>
<li><p>可以直接访问外部类的所有静态成员，包含私有的，但不能直接访问非静态成员</p>
</li>
<li><p>可以添加任意访问修饰符（public、protected、默认、private），因为它的地位就是一个成员</p>
</li>
<li><p>作用域：同其他的成员，为整个类体</p>
</li>
<li><p>静态内部类–访问—&gt;外部类（比如：静态属性）【访问方式：直接访问所有静态成员】</p>
</li>
<li><p>外部类–访问—&gt;静态内部类【访问方式：创建对象，再访问】</p>
</li>
<li><p>外部其他类–访问–&gt;静态内部类</p>
</li>
<li><p>如果外部类和静态内部类的成员重名时，静态内部类访问时，默认遵循就近原则。</p>
<p>如果想访问类的成员，则可以使用（外部类名.成员）去访问</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hspedu.innerclass;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticInnerClass01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer10</span> <span class="hljs-variable">outer10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer10</span>();<br>        outer10.m1();<br>        <span class="hljs-comment">//外部其他类 使用静态内部类</span><br>        <span class="hljs-comment">//方式1  new 外部类名.内部类名</span><br>        <span class="hljs-comment">//因为静态内部类，是可以通过类名直接访问（前提是满足访问权限）</span><br>        Outer10.<span class="hljs-type">Inner10</span> <span class="hljs-variable">inner10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer10</span>.Inner10();<br>        inner10.say();<br>        <span class="hljs-comment">//方式2</span><br>        <span class="hljs-comment">//编写一个方法，可以返回静态内部类的实例</span><br>        Outer10.<span class="hljs-type">Inner10</span> <span class="hljs-variable">inner101</span> <span class="hljs-operator">=</span> outer10.getInner10();<br>        System.out.println(<span class="hljs-string">&quot;===============&quot;</span>);<br>        inner101.say();<br><br>        Outer10.<span class="hljs-type">Inner10</span> <span class="hljs-variable">inner10_</span> <span class="hljs-operator">=</span> Outer10.getInner10_();<br>        System.out.println(<span class="hljs-string">&quot;********&quot;</span>);<br><br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer10</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;张三&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cry</span><span class="hljs-params">()</span>&#123;&#125;<br>    <span class="hljs-comment">//Inner10就是静态内部类</span><br>    <span class="hljs-comment">//1.放在外部类的成员位置</span><br>    <span class="hljs-comment">//2.使用static修饰</span><br>    <span class="hljs-comment">//3.可以直接访问外部类的所有静态成员，包含私有的，但不能直接访问非静态成员</span><br>    <span class="hljs-comment">//4.可以添加任意访问修饰符（public、protected、默认、private），因为它的地位就是一个成员</span><br>    <span class="hljs-comment">//5.作用域：同其他的成员，为整个类体</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner10</span>&#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">say</span><span class="hljs-params">()</span>&#123;<br>            System.out.println(name);<br>            <span class="hljs-comment">//静态内部类--访问---&gt;外部类（比如：静态属性）【访问方式：直接访问所有静态成员】</span><br>            System.out.println(name + <span class="hljs-string">&quot; 外部类name= &quot;</span> + Outer10.name);<br>            cry();<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">//外部类--访问---&gt;静态内部类【访问方式：创建对象，再访问】</span><br>        <span class="hljs-type">Inner10</span> <span class="hljs-variable">inner10</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner10</span>();<br>        inner10.say();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Inner10 <span class="hljs-title function_">getInner10</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner10</span>();<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Inner10 <span class="hljs-title function_">getInner10_</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner10</span>();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221031174106963.png" srcset="/img/loading.gif" lazyload alt="image-20221031174106963" style="zoom:50%;" />

<p>小结：</p>
<p>（1）内部类有四种：<strong>局部内部类，匿名内部类，成员内部类，静态内部类</strong></p>
<p>（2）<strong>成员内部类，静态内部类</strong> 是放在外部类的成员为位置，本质上就是一个成员</p>
<h4 id="课堂测试题"><a href="#课堂测试题" class="headerlink" title="课堂测试题"></a>课堂测试题</h4><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221031175002331.png" srcset="/img/loading.gif" lazyload alt="image-20221031175002331" style="zoom:50%;" />

<p>解析：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClassExercise</span> &#123;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span>&#123;<span class="hljs-comment">//外部类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Test</span><span class="hljs-params">()</span>&#123;<span class="hljs-comment">//构造器</span><br>        <span class="hljs-type">Inner</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner</span>();  <span class="hljs-comment">//s1.a = 5</span><br>        s1.a = <span class="hljs-number">10</span>;							<span class="hljs-comment">//s1.a = 10</span><br>        <span class="hljs-type">Inner</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner</span>();  <span class="hljs-comment">//s2.a = 5</span><br>        System.out.println(s2.a); <span class="hljs-comment">//输出 5 </span><br>    &#125;<br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner</span>&#123;<span class="hljs-comment">//内部类，成员内部类</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        <span class="hljs-type">Test</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Test</span>(); <span class="hljs-comment">//创建Test对象</span><br>        <span class="hljs-type">Inner</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> t.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner</span>(); <span class="hljs-comment">//创建成员内部类对象</span><br>        System.out.println(r.a); <span class="hljs-comment">//r.a 为5 ，输出5</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出为5、5。</p>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;OOP核心结束&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="章节十一"><a href="#章节十一" class="headerlink" title="章节十一"></a>章节十一</h1><h2 id="生成文件头"><a href="#生成文件头" class="headerlink" title="*生成文件头"></a>*生成文件头</h2><p><strong>Editor</strong> - <strong>File and Code Templates</strong> - <strong>includes</strong></p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221102214250619.png" srcset="/img/loading.gif" lazyload alt="image-20221102214250619"></p>
<h2 id="1-枚举"><a href="#1-枚举" class="headerlink" title="1.枚举"></a>1.枚举</h2><h3 id="引入：四个季节类"><a href="#引入：四个季节类" class="headerlink" title="引入：四个季节类"></a>引入：四个季节类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Enumeration01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//使用</span><br>        <span class="hljs-type">Season</span> <span class="hljs-variable">spring</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Season</span>(<span class="hljs-string">&quot;春天&quot;</span>,<span class="hljs-string">&quot;温暖&quot;</span>);<br>        <span class="hljs-type">Season</span> <span class="hljs-variable">winter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Season</span>(<span class="hljs-string">&quot;冬天&quot;</span>,<span class="hljs-string">&quot;寒冷&quot;</span>);<br>        <span class="hljs-type">Season</span> <span class="hljs-variable">summer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Season</span>(<span class="hljs-string">&quot;夏天&quot;</span>,<span class="hljs-string">&quot;炎热&quot;</span>);<br>        <span class="hljs-type">Season</span> <span class="hljs-variable">autumn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Season</span>(<span class="hljs-string">&quot;秋天&quot;</span>,<span class="hljs-string">&quot;凉爽&quot;</span>);<br> <span class="hljs-comment">//因为对于季节而言，他的对象（具体值），是固定的4个，不会有更多</span><br> <span class="hljs-comment">//这个设计类的思路，不能提现季节是固定的四个对象</span><br> <span class="hljs-comment">//这样的设计不好 ===》 枚举类[枚:一个一个；举:列举。即把具体的对象一个一个列举出来的类]</span><br>        <span class="hljs-type">Season</span> <span class="hljs-variable">other</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Season</span>(<span class="hljs-string">&quot;红天&quot;</span>,<span class="hljs-string">&quot;~~~~&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Season</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String desc; <span class="hljs-comment">//描述</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Season</span><span class="hljs-params">(String name, String desc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> desc;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDesc</span><span class="hljs-params">(String desc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>季节只有固定的四个，但这样的设计不能提现季节是固定的四个对象，对象的属性也可以随便更改。</p>
<p>所以使用枚举类（枚:一个一个；举:列举。即把具体的对象一个一个列举出来的类）。</p>
<h4 id="分析问题"><a href="#分析问题" class="headerlink" title="分析问题"></a>分析问题</h4><p>需要创建的Season对象有如下特点</p>
<ol>
<li>季节的值是有限的几个值（spring、summer、autumn、winter）</li>
<li>只读，不需要修改。</li>
</ol>
<h4 id="解决问题-枚举（enumeration-enum-）"><a href="#解决问题-枚举（enumeration-enum-）" class="headerlink" title="解决问题-枚举（enumeration[enum]）"></a>解决问题-枚举（enumeration[enum]）</h4><ol>
<li>枚举是一组常量的集合</li>
<li>枚举属于一种特殊的类，里面只包含一组有限的特定的对象</li>
</ol>
<h3 id="枚举的两种实现方式"><a href="#枚举的两种实现方式" class="headerlink" title="枚举的两种实现方式"></a>枚举的两种实现方式</h3><h4 id="1-自定义实现枚举"><a href="#1-自定义实现枚举" class="headerlink" title="1.自定义实现枚举"></a>1.自定义实现枚举</h4><ol>
<li><strong>不需要提供setXXX方法</strong>， 因为枚举值通常为只读</li>
<li>对枚举对象&#x2F;属性使用<strong>final + static共同修饰</strong>，实现底层优化</li>
<li>枚举<strong>对象名通常使用全部大写</strong>，常量的命名规则</li>
<li>枚举对象根据需要，也可以有多个属性</li>
</ol>
<p>举例：四季</p>
<p>步骤：</p>
<p>1.构造器私有化，防止直接new</p>
<p>2.去掉setXXX相关方法，防止属性被修改</p>
<p>3.在Season内部，直接创建固定的对象</p>
<p>4.(优化)可以再加入final修饰符</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Enumeration02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(Season.SPRING);<br>        System.out.println(Season.SUMMER);<br>        System.out.println(Season.AUTUMN);<br>        System.out.println(Season.WINTER);<br>    &#125;<br><br>&#125;<br><span class="hljs-comment">//演示自定义枚举实现</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Season</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String desc; <span class="hljs-comment">//描述</span><br><br>    <span class="hljs-comment">//定义了四个对象</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Season</span> <span class="hljs-variable">SPRING</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Season</span>(<span class="hljs-string">&quot;春天&quot;</span>,<span class="hljs-string">&quot;温暖&quot;</span>);<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Season</span> <span class="hljs-variable">WINTER</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Season</span>(<span class="hljs-string">&quot;冬天&quot;</span>,<span class="hljs-string">&quot;寒冷&quot;</span>);<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Season</span> <span class="hljs-variable">SUMMER</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Season</span>(<span class="hljs-string">&quot;夏天&quot;</span>,<span class="hljs-string">&quot;炎热&quot;</span>);<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Season</span> <span class="hljs-variable">AUTUMN</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Season</span>(<span class="hljs-string">&quot;秋天&quot;</span>,<span class="hljs-string">&quot;凉爽&quot;</span>);<br><br>    <span class="hljs-comment">//1.构造器私有化，防止直接new</span><br>    <span class="hljs-comment">//2.去掉setXXX相关方法，防止属性被修改</span><br>    <span class="hljs-comment">//3.在Season内部，直接创建固定的对象</span><br>    <span class="hljs-comment">//4.(优化)可以再加入final修饰符</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Season</span><span class="hljs-params">(String name, String desc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> desc;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Season&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, desc=&#x27;&quot;</span> + desc + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221103113040832.png" srcset="/img/loading.gif" lazyload alt="image-20221103113040832" style="zoom:50%;" />

<p><strong>自定义实现枚举的特点</strong>：</p>
<ol>
<li><p>构造器私有化</p>
</li>
<li><p>本类内部创建一组对象</p>
</li>
<li><p>对外暴露对象（通过为对象添加public final static修饰符）</p>
</li>
<li><p>可以提供get方法，不要提供set方法</p>
</li>
</ol>
<h4 id="2-使用enum关键字实现枚举"><a href="#2-使用enum关键字实现枚举" class="headerlink" title="2.使用enum关键字实现枚举"></a>2.使用enum关键字实现枚举</h4><p>步骤：</p>
<p> 1.使用关键字enum替代class</p>
<p> 2.public static final Season SPRING &#x3D; new Season(“春天”,”温暖”); 直接使用SPRING(“春天”,”温暖”);替代</p>
<p>3.如果有多个常量，使用’,’间隔即可</p>
<p>4.如果使用enum来实现枚举，需要将定义常量对象，写在最前面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Enumeration03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(Season2.AUTUMN);<br>        System.out.println(Season2.SUMMER);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//演示使用enum关键字实现枚举</span><br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Season2</span> &#123;<br>    <span class="hljs-comment">// 1.使用关键字enum替代class</span><br>    <span class="hljs-comment">// 2.public static final Season SPRING = new Season(&quot;春天&quot;,&quot;温暖&quot;); 直接使用SPRING(&quot;春天&quot;,&quot;温暖&quot;);替代</span><br>    <span class="hljs-comment">// 3.如果有多个常量，使用&#x27;,&#x27;间隔即可</span><br>    <span class="hljs-comment">// 4.如果使用enum来实现枚举，需要将定义常量对象，写在最前面</span><br><br>    <span class="hljs-comment">//定义了四个对象</span><br>    <span class="hljs-comment">//常量名(实参列表)</span><br>    SPRING(<span class="hljs-string">&quot;春天&quot;</span>,<span class="hljs-string">&quot;温暖&quot;</span>),WINTER(<span class="hljs-string">&quot;冬天&quot;</span>,<span class="hljs-string">&quot;寒冷&quot;</span>),<br>    SUMMER(<span class="hljs-string">&quot;夏天&quot;</span>,<span class="hljs-string">&quot;炎热&quot;</span>),AUTUMN(<span class="hljs-string">&quot;秋天&quot;</span>,<span class="hljs-string">&quot;凉爽&quot;</span>);<br><br>    <span class="hljs-comment">//如果使用enum，定义属性需要放在后面</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String desc; <span class="hljs-comment">//描述</span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Season2</span><span class="hljs-params">(String name, String desc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> desc;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Season&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, desc=&#x27;&quot;</span> + desc + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="enum关键字实现枚举-使用细节"><a href="#enum关键字实现枚举-使用细节" class="headerlink" title="enum关键字实现枚举-使用细节"></a>enum关键字实现枚举-使用细节</h3><p>test.java 和 test.class</p>
<p>test.java &#x3D;&#x3D;&#x3D;》test.class 叫做<strong>编译</strong>，使用<strong>javac</strong>指令。</p>
<p>test.java《&#x3D;&#x3D;&#x3D; test.class 叫做<strong>反编译</strong>，使用<strong>javap</strong>指令。</p>
<p>反编译前面的Season2，命令行输出如下。</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs arduino">Compiled from <span class="hljs-string">&quot;Enumeration03.java&quot;</span><br><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">com</span>.hspedu.enum_.Season2 extends java.lang.Enum&lt;com.hspedu.enum_.Season2&gt; &#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> com.hspedu.enum_.Season2 SPRING;<br>  <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> com.hspedu.enum_.Season2 WINTER;<br>  <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> com.hspedu.enum_.Season2 SUMMER;<br>  <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> com.hspedu.enum_.Season2 AUTUMN;<br>  <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> com.hspedu.enum_.Season2[] <span class="hljs-built_in">values</span>();<br>  <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> com.hspedu.enum_.<span class="hljs-function">Season2 <span class="hljs-title">valueOf</span><span class="hljs-params">(java.lang.<span class="hljs-type">String</span>)</span></span>;<br>  <span class="hljs-keyword">public</span> java.lang.<span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span></span>;<br>  <span class="hljs-keyword">public</span> java.lang.<span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">getDesc</span><span class="hljs-params">()</span></span>;<br>  <span class="hljs-keyword">public</span> java.lang.<span class="hljs-function"><span class="hljs-type">String</span> <span class="hljs-title">toString</span><span class="hljs-params">()</span></span>;<br>  <span class="hljs-type">static</span> &#123;&#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>分析：</p>
<ol>
<li>使用enum关键字开发一个枚举类时，默认会继承Enum类，而且是一个final类</li>
<li>传统的<code>public static final Season SPRING = new Season(&quot;春天&quot;,&quot;温暖&quot;);</code>简化成<code>SPRING(&quot;春天&quot;,&quot;温暖&quot;)</code>，这里必须知道，它调用的是哪一个构造器。</li>
<li>如果使用无参构造器创建枚举对象，则实参列表和小括号都可以省略。</li>
<li>当有多个枚举对象时，用’,’间隔，最后用分号结尾</li>
<li>枚举对象必须放在枚举类的行首</li>
</ol>
<h3 id="课题练习"><a href="#课题练习" class="headerlink" title="课题练习"></a>课题练习</h3><p>1.下面代码是否正确，并说明含义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Gender</span>&#123;<br>	BOY,GIRL;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>正确的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Gender</span>&#123;<br>	BOY,GIRL;<span class="hljs-comment">//这里其实就是调用Gender类的无参构造器</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>有一个枚举类Gender，无属性。</p>
<p>有两个枚举对象BOY,GIRL，使用的无参构造器创建。</p>
<p>2.下面代码是否正确，并说明含义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Gender2</span>&#123;<br>	BOY,GIRL;<br>&#125;<br><span class="hljs-type">Gender2</span> <span class="hljs-variable">boy</span> <span class="hljs-operator">=</span> Gender2.BOY;<br><span class="hljs-type">Gender2</span> <span class="hljs-variable">boy2</span> <span class="hljs-operator">=</span> Gender2.BOY;<br>System.out.println(boy); <br>System.out.println(boy2 == boy);<br></code></pre></td></tr></table></figure>

<p>输出BOY，和true。</p>
<h3 id="enum常用方法说明"><a href="#enum常用方法说明" class="headerlink" title="enum常用方法说明"></a>enum常用方法说明</h3><p>使用关键字enum时，会隐式继承Enum类（可以使用Enum类相关的方法）</p>
<p>常用方法表：</p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221104120717090.png" srcset="/img/loading.gif" lazyload alt="image-20221104120717090"></p>
<p>使用Season2作为例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">SPRING(<span class="hljs-string">&quot;春天&quot;</span>,<span class="hljs-string">&quot;温暖&quot;</span>),WINTER(<span class="hljs-string">&quot;冬天&quot;</span>,<span class="hljs-string">&quot;寒冷&quot;</span>),<br>SUMMER(<span class="hljs-string">&quot;夏天&quot;</span>,<span class="hljs-string">&quot;炎热&quot;</span>),AUTUMN(<span class="hljs-string">&quot;秋天&quot;</span>,<span class="hljs-string">&quot;凉爽&quot;</span>);<br><span class="hljs-keyword">private</span> String name;<br><span class="hljs-keyword">private</span> String desc; <br></code></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//以使用Season2枚举类来演示</span><br><span class="hljs-type">Season2</span> <span class="hljs-variable">autumn</span> <span class="hljs-operator">=</span> Season2.AUTUMN;<br><br><span class="hljs-comment">//name() 输出枚举对象的名称</span><br>System.out.println(autumn.name()); <span class="hljs-comment">//输出AUTUMN</span><br><br><span class="hljs-comment">//ordinal() 输出的是该枚举对象的次序，从0开始编号</span><br>System.out.println(autumn.ordinal()); <span class="hljs-comment">//输出3，因为次序是第四个</span><br><br><span class="hljs-comment">//values() 【从反编译可以看到，返回Season2[]】</span><br>Season2[] values = Season2.values();<br>System.out.println(<span class="hljs-string">&quot;==遍历取出枚举对象==&quot;</span>);<br><span class="hljs-keyword">for</span>(Season2 season2:values)&#123; <span class="hljs-comment">//增强for循环</span><br>    System.out.println(season2);<br>&#125;<br><span class="hljs-comment">//输出如下：</span><br><span class="hljs-comment">//        ==遍历取出枚举对象==</span><br><span class="hljs-comment">//        Season&#123;name=&#x27;春天&#x27;, desc=&#x27;温暖&#x27;&#125;</span><br><span class="hljs-comment">//        Season&#123;name=&#x27;冬天&#x27;, desc=&#x27;寒冷&#x27;&#125;</span><br><span class="hljs-comment">//        Season&#123;name=&#x27;夏天&#x27;, desc=&#x27;炎热&#x27;&#125;</span><br><span class="hljs-comment">//        Season&#123;name=&#x27;秋天&#x27;, desc=&#x27;凉爽&#x27;&#125;</span><br><br><span class="hljs-comment">//valueOf：将字符串转换成枚举对象，要求字符串必须为已有的常量，否则报错</span><br><span class="hljs-type">Season2</span> <span class="hljs-variable">autumn1</span> <span class="hljs-operator">=</span> Season2.valueOf(<span class="hljs-string">&quot;AUTUMN&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;autumn1=&quot;</span>+autumn1);<br><span class="hljs-comment">//输出：autumn1=Season&#123;name=&#x27;秋天&#x27;, desc=&#x27;凉爽&#x27;&#125;</span><br><br><span class="hljs-comment">//compareTo:比较两个枚举常量，比较的就是编号</span><br><span class="hljs-comment">//下例比较的是Season2.AUTUMN枚举对象的标号，和Season2.SUMMER的编号</span><br><span class="hljs-comment">//使用Season2.AUTUMN编号-Season2.SUMMER编号，3-2，所以返回1</span><br>System.out.println(Season2.AUTUMN.compareTo(Season2.SUMMER)); <span class="hljs-comment">//输出1</span><br></code></pre></td></tr></table></figure>



<p>*<strong>关于增强for循环</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] number = &#123;<span class="hljs-number">10</span>,<span class="hljs-number">20</span>,<span class="hljs-number">30</span>,<span class="hljs-number">40</span>&#125;;<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> x:number)&#123;<br>	System.out.println(x);<br>&#125;<br><span class="hljs-comment">//意为把number数组每一项遍历出来赋值给x</span><br></code></pre></td></tr></table></figure>





<h3 id="课堂练习2-1"><a href="#课堂练习2-1" class="headerlink" title="课堂练习2"></a>课堂练习2</h3><blockquote>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221104123354849.png" srcset="/img/loading.gif" lazyload alt="image-20221104123354849"></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnumExercise02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;==所有星期的信息如下==&quot;</span>);<br>        Week[] values = Week.values();<br>        <span class="hljs-keyword">for</span>(Week week:values)&#123;<br>            System.out.println(week);<br>        &#125;<br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Week</span>&#123;<br>    MONDAY(<span class="hljs-string">&quot;星期一&quot;</span>),TUESDAY(<span class="hljs-string">&quot;星期二&quot;</span>),<br>    WEDNESDAY(<span class="hljs-string">&quot;星期三&quot;</span>),THURSDAY(<span class="hljs-string">&quot;星期四&quot;</span>),<br>    FRIDAY(<span class="hljs-string">&quot;星期五&quot;</span>),SATURDAY(<span class="hljs-string">&quot;星期六&quot;</span>),<br>    SUNDAY(<span class="hljs-string">&quot;星期日&quot;</span>);<br><br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Week</span><span class="hljs-params">(String name)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="enum实现接口"><a href="#enum实现接口" class="headerlink" title="enum实现接口"></a>enum实现接口</h3><p>使用enum关键字后，就<strong>不能再继承</strong>其他类了，因为enum会隐式继承Enum类，而Java是单继承机制。</p>
<p>但枚举类和普通类一样，可以实现接口。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnumDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        Music.CLASSICMUSIC.playing();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IPlaying</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">playing</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Music</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IPlaying</span>&#123;<br>    CLASSICMUSIC;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">playing</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;播放好听的音乐。&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="2-注解"><a href="#2-注解" class="headerlink" title="2.注解"></a>2.注解</h2><h3 id="关于注解的理解"><a href="#关于注解的理解" class="headerlink" title="关于注解的理解"></a>关于注解的理解</h3><ol>
<li>注解（Annotation）也被称为元数据（Metadata），用于修饰解释 包、类、方法、属性、构造器、局部变量等数据信息。</li>
<li>和注释一样，注解不影响程序逻辑。但注释可以被编译或运行，相当于嵌入在代码中的补充信息。</li>
<li>在JavaSE中，注解的使用目的比较简单（例如标记过时的功能，忽略警告等）。</li>
<li>在JavaEE中，注解占据了更重要的角色，例如用来配置应用程序的任何切面，代替javaEE旧版中所遗留的繁冗代码和XML配置等。</li>
</ol>
<h3 id="基本的Annotation介绍"><a href="#基本的Annotation介绍" class="headerlink" title="基本的Annotation介绍"></a>基本的Annotation介绍</h3><p>使用Annotation时要在其前面增加@符号，并把该Annotation当成一个修饰符使用，用于修饰它支持的程序元素：</p>
<p><strong>三个基本的Annotation：</strong></p>
<ol>
<li>@Override ：限定某个方法，是重写父类方法，该注解只能用于方法。</li>
<li>@Deprecated：用于表示某个程序元素（类、方法等）已过时。</li>
<li>@SuppressWarnings：抑制编译器警告。</li>
</ol>
<h3 id="1-Override"><a href="#1-Override" class="headerlink" title="1.Override"></a>1.Override</h3><p>限定某个方法，是重写父类方法，该注解只能用于方法。</p>
<p><strong>使用说明：</strong></p>
<ol>
<li>@Override表示指定重写父类的方法（<strong>从编译层面验证</strong>），如果父类没有fly方法，就会报错</li>
<li>如果不写@Override注解，而父类仍有public void fly(){}，仍然构成重写</li>
<li>@Override只能修饰方法，不能修饰其他类、包、属性等等</li>
<li>查看@Override注解源码<code>@Target(ElementType.METHOD)</code>，说明只能修饰方法</li>
<li><strong>@Target</strong>是<strong>修饰注释的注解</strong>，称为<strong>元注解</strong>。</li>
</ol>
<p>例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Father fly...&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Father</span>&#123;<br>    <span class="hljs-comment">//注解，放在fly方法上，表示子类的fly方法事，重写了父类的fly</span><br>    <span class="hljs-comment">//即便没有写@Override，还是重写了父类fly</span><br>    <span class="hljs-comment">//如果写了@Override，编译器就会检查是否真的重写了父类的方法</span><br>    <span class="hljs-comment">//  如果没有重写，则编译错误。</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Son fly...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>Override的定义:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Indicates that a method declaration is intended to override a</span><br><span class="hljs-comment"> * method declaration in a supertype. If a method is annotated with</span><br><span class="hljs-comment"> * this annotation type compilers are required to generate an error</span><br><span class="hljs-comment"> * message unless at least one of the following conditions hold:</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * &lt;ul&gt;&lt;li&gt;</span><br><span class="hljs-comment"> * The method does override or implement a method declared in a</span><br><span class="hljs-comment"> * supertype.</span><br><span class="hljs-comment"> * &lt;/li&gt;&lt;li&gt;</span><br><span class="hljs-comment"> * The method has a signature that is override-equivalent to that of</span><br><span class="hljs-comment"> * any public method declared in &#123;<span class="hljs-doctag">@linkplain</span> Object&#125;.</span><br><span class="hljs-comment"> * &lt;/li&gt;&lt;/ul&gt;</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>  Peter von der Ah&amp;eacute;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span>  Joshua Bloch</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@jls</span> 8.4.8 Inheritance, Overriding, and Hiding</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@jls</span> 9.4.1 Inheritance and Overriding</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@jls</span> 9.6.4.4 <span class="hljs-doctag">@Override</span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span> 1.5</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Target(ElementType.METHOD)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Override &#123;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>此处的@interface不是代表接口，而是<strong>注解类</strong>。JDK5.0后加入。</p>
<h3 id="2-Deprecated"><a href="#2-Deprecated" class="headerlink" title="2.Deprecated"></a>2.Deprecated</h3><p>用于表示某个程序元素（类、方法等）已过时。</p>
<p>即不再推荐使用，但仍可以使用。</p>
<p><strong>使用说明：</strong></p>
<ol>
<li>用于表示某个程序元素（类、方法等）已过时</li>
<li>可以修饰方法、类、字段、包、参数 等等</li>
<li>@Target(value&#x3D;{CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, MODULE, PARAMETER, TYPE})</li>
<li>@Depreacted的<strong>作用可以做到新旧版本的兼容和过渡</strong></li>
</ol>
<p>Depreacted的定义:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(value=&#123;CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, MODULE, PARAMETER, TYPE&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Deprecated &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Returns the version in which the annotated element became deprecated.</span><br><span class="hljs-comment">     * The version string is in the same format and namespace as the value of</span><br><span class="hljs-comment">     * the &#123;<span class="hljs-doctag">@code</span> <span class="hljs-doctag">@since</span>&#125; javadoc tag. The default value is the empty</span><br><span class="hljs-comment">     * string.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> the version string</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@since</span> 9</span><br><span class="hljs-comment">     */</span><br>    String <span class="hljs-title function_">since</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Indicates whether the annotated element is subject to removal in a</span><br><span class="hljs-comment">     * future version. The default value is &#123;<span class="hljs-doctag">@code</span> false&#125;.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> whether the element is subject to removal</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@since</span> 9</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">forRemoval</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="3-SupperessWarnings"><a href="#3-SupperessWarnings" class="headerlink" title="3.SupperessWarnings"></a>3.SupperessWarnings</h3><p>抑制编译器警告。</p>
<p><strong>使用说明：</strong></p>
<ol>
<li><p>当我们不希望看到这些警告的时候，可以使用SupperessWarnings注解来抑制警告信息</p>
</li>
<li><p>在{“”}中，可以写入希望抑制（不显示）的警告信息</p>
<blockquote>
<ul>
<li><strong>all</strong> to suppress all warnings （抑制所有警告）</li>
<li><strong>boxing</strong> to suppress warnings relative to boxing&#x2F;unboxing operations（抑制装箱、拆箱操作时候的警告）</li>
<li><strong>cast</strong> to suppress warnings relative to cast operations （抑制映射相关的警告）</li>
<li><strong>dep-ann</strong> to suppress warnings relative to deprecated annotation（抑制启用注释的警告）</li>
<li><strong>deprecation</strong> to suppress warnings relative to deprecation（抑制过期方法警告）</li>
<li><strong>fallthrough</strong> to suppress warnings relative to missing breaks in switch statements（抑制确在switch中缺失breaks的警告）</li>
<li><strong>finally</strong> to suppress warnings relative to finally block that don’t return （抑制finally模块没有返回的警告）</li>
<li><strong>hiding</strong> to suppress warnings relative to locals that hide variable（）</li>
<li><strong>incomplete-switch</strong> to suppress warnings relative to missing entries in a switch statement (enum case)(忽略没有完整的switch语句)</li>
<li><strong>nls</strong> to suppress warnings relative to non-nls string literals(忽略非nls格式的字符)</li>
<li><strong>null</strong> to suppress warnings relative to null analysis(忽略对null的操作)</li>
<li><strong>rawtypes</strong> to suppress warnings relative to un-specific types when using generics on class params(使用generics时忽略没有指定相应的类型)</li>
<li><strong>restriction</strong> to suppress warnings relative to usage of discouraged or forbidden references</li>
<li><strong>serial</strong> to suppress warnings relative to missing serialVersionUID field for a serializable class(忽略在serializable类中没有声明serialVersionUID变量)</li>
<li><strong>static-access</strong> to suppress warnings relative to incorrect static access（抑制不正确的静态访问方式警告)</li>
<li><strong>synthetic-access</strong> to suppress warnings relative to unoptimized access from inner classes（抑制子类没有按最优方法访问内部类的警告）</li>
<li><strong>unchecked</strong> to suppress warnings relative to unchecked operations（抑制没有进行类型检查操作的警告）</li>
<li><strong>unqualified-field-access</strong> to suppress warnings relative to field access unqualified （抑制没有权限访问的域的警告）</li>
<li><strong>unused</strong> to suppress warnings relative to unused code  （抑制没被使用过的代码的警告）</li>
</ul>
</blockquote>
</li>
<li><p>SupperessWarnings的作用范围和放置的位置有关</p>
</li>
<li><p>&#96;&#96;&#96;java<br>@Target({TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE, MODULE})</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><br><br><br>例子：<br><br>使用前（黄色警告）：<br><br>&lt;img src=<span class="hljs-string">&quot;https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221106113106794.png&quot;</span> alt=<span class="hljs-string">&quot;image-20221106113106794&quot;</span> style=<span class="hljs-string">&quot;zoom:50%;&quot;</span> /&gt;<br><br>使用后：<br><br>&lt;img src=<span class="hljs-string">&quot;https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221106113139435.png&quot;</span> alt=<span class="hljs-string">&quot;image-20221106113139435&quot;</span> style=<span class="hljs-string">&quot;zoom:50%;&quot;</span> /&gt;<br><br><br><br>### 元注解<br><br>基本介绍：JDK的元Annotation用于修饰其他Annotation。<br><br>种类：<br><br><span class="hljs-number">1</span>. Retention ——指定注解的作用范围，三种：<span class="hljs-keyword">SOURCE</span>，<span class="hljs-keyword">CLASS</span>，<span class="hljs-keyword">RUNTIME</span><br><span class="hljs-number">2</span>. Target —— 指定注解可以在哪些地方使用<br><span class="hljs-number">3</span>. Documented —— 指定该注解是否会在javadoc提现<br><span class="hljs-number">4</span>. Inherited —— 子类会继承父类注解<br><br><br><br>**Retention**<br><br>只能修饰一个Annotation定义，用于指定改Annotation**可以保留多长时间**。<br><br>三种值：<br><br><span class="hljs-keyword">SOURCE</span>：编译器使用后，直接丢弃这种策略的注释<br><br><span class="hljs-keyword">CLASS</span>：编译器将把注解记录在<span class="hljs-keyword">class</span>文件中，当运行Java程序时，JVM不会保留注解。<br><br><span class="hljs-keyword">RUNTIME</span>：编译器将把注解记录在 <span class="hljs-keyword">class</span> 文件中.当运行Java 程序时， JVM 会保留注释。程序可以通过反射获取该注释。<br><br>**Target** <br><br>用于指定被修饰的Annotation能用于**修饰哪些程序元素**。<br><br>**Documented**<br><br>用于指定被该元 Annotation 修饰的 Annotation 类将被javadoc 工具提取成文档，即**在生成文档时，可以看到该注解**。<br>说明：定义为Documented的注解必须设置Retention值为<span class="hljs-keyword">RUNTIME</span>。<br><br>**Inherited**<br><br>被它修饰的 Annotation 将**具有继承性**.如果某个类使用了被 ＠Inherited 修饰的 Annotation，则其子类将自动具有该注解<br><br> <br><br>## 家庭作业<br><br>### 题目<span class="hljs-number">1</span><br><br>![image-<span class="hljs-number">20221106151721985</span>](https:<span class="hljs-comment">//soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221106151721985.png)</span><br><br>输出：<br><br><span class="hljs-number">9.0</span> red <span class="hljs-number">100.0</span> red<br><br>解析：<span class="hljs-keyword">static</span>部分的代码只会随着类的加载执行一次。<br><br><br><br>### 题目<span class="hljs-number">2</span> -静态<br><br>&gt; <span class="hljs-number">1</span>.在Frock类中声明私有的静态属性currentNum［<span class="hljs-keyword">int</span>类型］，初始值为<span class="hljs-number">100000</span>，作为衣服出厂的序列号起始值。<br>&gt; <span class="hljs-number">2</span>.声明公有的静态方法getNextNum，作为生成上衣唯一序列号的方法。每调用一次，将currentNum增加<span class="hljs-number">100</span>，并作为返回值。<br>&gt; <span class="hljs-number">3</span>.在TestFrock类的main方法中，分两次调用getNextNum方法，获取序列号并打印输出。<br>&gt;<br>&gt; <span class="hljs-number">4</span>.在Frock类中声明serialNumber（序列号）属性，并提供对应的get方法；<br>&gt; <span class="hljs-number">5</span>.在Frock类的构造器中，通过调用getNextNum方法为Frock对象获取唯一序列号，赋给serialNumber属性。<br>&gt; <span class="hljs-number">6</span>.在TestFrock类的main方法中，分别创建三个Frock对象，并打印三个对象的序列号，验证是否为按<span class="hljs-number">100</span>递增。<br><br>```java<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Homework02 &#123;<br>&#125;<br><span class="hljs-keyword">class</span> TestFrock&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(String[] args) &#123;<br>        System.out.<span class="hljs-keyword">println</span>(Frok.getNextNum());<br>        System.out.<span class="hljs-keyword">println</span>(Frok.getNextNum());<br>        Frok frok1 = <span class="hljs-keyword">new</span> Frok();<br>        Frok frok2 = <span class="hljs-keyword">new</span> Frok();<br>        Frok frok3 = <span class="hljs-keyword">new</span> Frok();<br>        System.out.<span class="hljs-keyword">println</span>(<span class="hljs-string">&quot;fork1:&quot;</span>+frok1.getSerialNumber()+<br>                <span class="hljs-string">&quot;\nfork2:&quot;</span>+frok2.getSerialNumber()+<br>                <span class="hljs-string">&quot;\nfork3:&quot;</span>+frok3.getSerialNumber());<br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> Frok&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> currentNum = <span class="hljs-number">100000</span>; <span class="hljs-comment">//衣服出厂的序列号起始值</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> serialNumber; <span class="hljs-comment">//序列号</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> getSerialNumber()&#123;<br>        <span class="hljs-keyword">return</span> serialNumber;<br>    &#125;<br>    <span class="hljs-comment">//生成上衣唯一序列号的方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> getNextNum()&#123;<br>        currentNum += <span class="hljs-number">100</span>;<br>        <span class="hljs-keyword">return</span> currentNum;<br>    &#125;<br>    <span class="hljs-keyword">public</span> Frok()&#123;<br>        serialNumber = getNextNum();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<p>输出：</p>
<blockquote>
<p>100100<br>100200<br>fork1:100300<br>fork2:100400<br>fork3:100500</p>
</blockquote>
<h3 id="题目3-抽象"><a href="#题目3-抽象" class="headerlink" title="题目3 - 抽象"></a>题目3 - 抽象</h3><blockquote>
<p>按要求实现下列问题：<br>1.动物类Animal包含了抽象方法 shout（）；</p>
<p>2.Cat类继承了Animal，并实现方法shout，打印“猫会喵喵叫”</p>
<p>3.Dog类继承了Animal，并实现方法shout，打印“狗会汪汪叫”</p>
<p>4.在测试类中实例化对象Animal cat ＝new Cat（），并调用cat的shout方法</p>
<p>5.在测试类中实例化对象Animal dog＝new Dog（），并调用dog的shout方法</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>        cat.shout();<br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>        dog.shout();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123; <span class="hljs-comment">//抽象类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shout</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shout</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;猫会喵喵叫！&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shout</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;狗会汪汪叫！&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="题目4-接口"><a href="#题目4-接口" class="headerlink" title="题目4 -接口"></a>题目4 -接口</h3><blockquote>
<p>1.计算器接口具有work方法，功能是运算，有一个手机类Cellphone，定义方法testWork测试计算功能，调用计算接口的work方法，<br>2.要求调用CellPhone对象的testWork方法，使用上匿名内部类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework04</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Cellphone</span> <span class="hljs-variable">cellphone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cellphone</span>();<br>        cellphone.testWork(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ICalculate</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">work</span><span class="hljs-params">(<span class="hljs-type">double</span> n1, <span class="hljs-type">double</span> n2)</span> &#123;<br>                <span class="hljs-keyword">return</span> n1+n2;<br>            &#125;<br>        &#125;,<span class="hljs-number">10</span>,<span class="hljs-number">8</span>);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ICalculate</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">work</span><span class="hljs-params">(<span class="hljs-type">double</span> n1,<span class="hljs-type">double</span> n2)</span>;<br>    <span class="hljs-comment">//该方法完成的计算，交给匿名内部类</span><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cellphone</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testWork</span><span class="hljs-params">(ICalculate iCalculate,<span class="hljs-type">double</span> n1,<span class="hljs-type">double</span> n2)</span>&#123;<br>        <span class="hljs-type">double</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> iCalculate.work(n1,n2);<br>        System.out.println(<span class="hljs-string">&quot;结果为：&quot;</span>+result);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="题目5-局部内部类"><a href="#题目5-局部内部类" class="headerlink" title="题目5 - 局部内部类"></a>题目5 - 局部内部类</h3><blockquote>
<p>1.编一个类A，在类中定义局部内部类B，B中有一个私有final常量name，有一个方法show（）打印常量name。进行测试<br>2.进阶:A中也定义一个私有的变量name，在show方法中打印测试</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework05</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>().f1();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123;<br>            <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;韩顺平教育&quot;</span>;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;NAME=&quot;</span> + NAME +<br>                                    <span class="hljs-string">&quot;\n外部类的name=&quot;</span> + A.<span class="hljs-built_in">this</span>.NAME);<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>();<br>        b.show();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221106170327944.png" srcset="/img/loading.gif" lazyload alt="image-20221106170327944" style="zoom:50%;" />

<h3 id="题目6-综合题"><a href="#题目6-综合题" class="headerlink" title="题目6 - 综合题"></a>题目6 - 综合题</h3><blockquote>
<p> 1.有一个交通工具接口类Vehicles，有work接口<br>2.有Horse类和Boat类分别实现Vehicles<br>3.创建交通工具工厂类，有两个方法分别获得交通工具Horse和Boat<br>4.有Person类，有name和Vehicles属性，在构造器中为两个属性赋值<br>5.实例化Person对象“唐僧”，要求一般情况下用Horse作为交通工具，遇到大河时用Boat作为交通工具</p>
</blockquote>
<p>代码过多，见Chapter11-homework06</p>
<h3 id="题目7-成员内部类"><a href="#题目7-成员内部类" class="headerlink" title="题目7 - 成员内部类"></a>题目7 - 成员内部类</h3><blockquote>
<p>有一个Car类，有属性temperature（温度），车内有Air（空调）类，有吹风的功能flow，Air会监视车内的温度，如果温度超过40度则吹冷气。如果温度低于0度则吹暖气，如果在这之间则关掉空调。实例化具有不同温度的Car对象，调用空调的flow方法，测试空调吹的风是否正确.&#x2F;&#x2F;体现类与类的包含关系的案例类（内部类【成员内部类】）</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework07</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-number">60</span>);<br>        car.getAir().flow();<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-number">40</span>);<br>        car1.getAir().flow();<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(-<span class="hljs-number">10</span>);<br>        car2.getAir().flow();<br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> temperature;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Car</span><span class="hljs-params">(<span class="hljs-type">double</span> temperature)</span> &#123;<br>        <span class="hljs-built_in">this</span>.temperature = temperature;<br>    &#125;<br><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Air</span>&#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flow</span><span class="hljs-params">()</span>&#123;<br>            <span class="hljs-keyword">if</span> (temperature &gt; <span class="hljs-number">40</span>)&#123;<br>                System.out.println(<span class="hljs-string">&quot;温度大于40 空调吹冷气...&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (temperature &lt; <span class="hljs-number">0</span> )&#123;<br>                System.out.println(<span class="hljs-string">&quot;温度小于0 空调吹暖气...&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;温度正常，关闭空调...&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//返回一个Air对象</span><br>    <span class="hljs-keyword">public</span> Air <span class="hljs-title function_">getAir</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Air</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="题目8-enum类"><a href="#题目8-enum类" class="headerlink" title="题目8 - enum类"></a>题目8 - enum类</h3><blockquote>
<p>枚举类<br>1.创建一个Color枚举类</p>
<p>2.有 RED，BLUE，BLACK，YELLOW，GREEN这个五个枚举值／对象；</p>
<p>3.Color有三个属性redValue， greenValue， blueValue，<br>4.创建构造方法，参数包括这三个属性，</p>
<p>5.每个枚举值都要给这三个属性赋值，三个属性对应的值分别</p>
<p>6.red:255，0，0 blue:0，0，255 black:0，0，0 yellow:255，255，0 green:0，255，0</p>
<p>7.定义接口，里面有方法show，要求Color实现该接口</p>
<p>8.show方法中显示三属性的值</p>
<p>9.将枚举对象在switch语句中匹配使用</p>
</blockquote>
<p>自写（和视频不同）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework08</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.print(<span class="hljs-string">&quot;输入想要查看的颜色：&quot;</span>);<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">color</span> <span class="hljs-operator">=</span> scanner.next();<br><span class="hljs-comment">//        String color = &quot;red&quot;;</span><br>        <span class="hljs-keyword">switch</span> (color)&#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;red&quot;</span>:<br>                Color.RED.show();<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;blue&quot;</span>:<br>                Color.BLUE.show();<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;black&quot;</span>:<br>                Color.BLACK.show();<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;yellow&quot;</span>:<br>                Color.YELLOW.show();<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;green&quot;</span>:<br>                Color.GREEN.show();<br>            <span class="hljs-keyword">default</span>:<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">showColor</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>;<br>&#125;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">showColor</span>&#123;<br>    RED(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),BLUE(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>),<br>    BLACK(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),YELLOW(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),<br>    GREEN(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>);<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> redValue;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> greenValue;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> blueValue;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;redValue:&quot;</span>+redValue+<span class="hljs-string">&quot;\t&quot;</span>+<br>                <span class="hljs-string">&quot;greenValue:&quot;</span>+greenValue+<span class="hljs-string">&quot;\t&quot;</span>+<br>                <span class="hljs-string">&quot;blueValue&quot;</span>+blueValue);<br>    &#125;<br><br>    Color(<span class="hljs-type">int</span> redValue, <span class="hljs-type">int</span> greenValue, <span class="hljs-type">int</span> blueValue) &#123;<br>        <span class="hljs-built_in">this</span>.redValue = redValue;<br>        <span class="hljs-built_in">this</span>.greenValue = greenValue;<br>        <span class="hljs-built_in">this</span>.blueValue = blueValue;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getRedValue</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> redValue;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getGreenValue</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> greenValue;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getBlueValue</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> blueValue;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h1 id="章节十二-异常"><a href="#章节十二-异常" class="headerlink" title="章节十二 - 异常"></a>章节十二 - 异常</h1><h2 id="1-引入-异常捕获"><a href="#1-引入-异常捕获" class="headerlink" title="1.引入-异常捕获"></a>1.引入-异常捕获</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Exception01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">num1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">num2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//num1 / num2 =&gt; 10/0</span><br>        <span class="hljs-comment">//抛出异常ArithmeticException</span><br>        <span class="hljs-comment">//程序崩溃，下面代码不再执行</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> num1/num2;<br>        System.out.println(<span class="hljs-string">&quot;程序继续运行....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>这样的程序不好，不应该出现了一个不算致命的问题就导致整个系统崩溃。</p>
<p>所以java设计者，提供了 <strong>异常处理机制</strong> 来解决该问题。</p>
<p>如果程序员认为一段代码可能出现异常，可以使用<strong>try-catch</strong>异常处理机制来解决，从而保证程序的<strong>健壮性</strong>。</p>
<p>intelliJ IDEA中的Mac快捷键用法：⌘+⌥+T  （win为：CTRL+ALT+T） try-catch</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> num1/num2;<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>    e.printStackTrace();<br>&#125;<br>System.out.println(<span class="hljs-string">&quot;程序继续运行....&quot;</span>);<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107104350300.png" srcset="/img/loading.gif" lazyload alt="image-20221107104350300" style="zoom:50%;" />



<h2 id="2-异常介绍"><a href="#2-异常介绍" class="headerlink" title="2.异常介绍"></a>2.异常介绍</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a><strong>基本概念</strong></h3><p>java语言中，将程序执行中发生的不正常情况称为“异常”。</p>
<p>（开发过程中的语法错误和逻辑错误不是异常）</p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p><strong>执行过程中所发生的的异常事件可分为两大类：</strong></p>
<ol>
<li><p><strong>ERROR（错误）</strong>：Java虚拟机无法解决的严重错误。</p>
<p>如：JVM系统内部错误、资源耗尽等严重问题。</p>
<p>例如：StackOverflowError[栈溢出] 和 OOM(out of memory)。</p>
<p>Error是严重错误，程序会崩溃。</p>
</li>
<li><p><strong>EXCEPTION（异常）</strong>：其他因编程错误或偶然的外在因素导致的一般性问题。可以使用针对性的代码进行处理。</p>
<p>例如：空指针访问、试图读取不存在的文件。网络连接中断等等。</p>
<p>Exception分为<strong>两大类</strong>：<strong>运行时异常</strong>和<strong>编译时异常</strong>。</p>
<ul>
<li><strong>运行时异常</strong>：程序运行时，发生的异常</li>
<li><strong>编译时异常</strong>：编程时，编译器检查出的异常。</li>
</ul>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107153226551.png" srcset="/img/loading.gif" lazyload alt="image-20221107153226551" style="zoom:50%;" /></li>
</ol>
<h3 id="异常体系图"><a href="#异常体系图" class="headerlink" title="异常体系图"></a>异常体系图</h3><p>intelliJ IDEA 快捷键：</p>
<p>show Diagrams：⌥+⌘+⇧+U</p>
<p>show implementations：⌥+⌘+B</p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108173934476.png" srcset="/img/loading.gif" lazyload alt="image-20221108173934476"></p>
<p>绿色虚线表示这个类实现了这个接口。</p>
<p>如果是蓝色实线，则表示继承了这个类。</p>
<h3 id="五大运行时异常"><a href="#五大运行时异常" class="headerlink" title="五大运行时异常"></a>五大运行时异常</h3><p><strong>NullPointerException 空指针异常</strong></p>
<p><strong>ArithmeticException 数学运算异常</strong></p>
<p><strong>ArrayIndexOutOfBoundsException 数组下标越界异常</strong></p>
<p><strong>ClassCastExcption 类型转化异常</strong></p>
<p><strong>NumberFormatException 数字格式不正确异常</strong></p>
<ol>
<li><p><strong>NullPointerException 空指针异常</strong></p>
<p>应用程序试图在需要对象的地方使用null时抛出该异常。</p>
<p>例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    System.out.println(name.length());<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>ArithmeticException 数学运算异常</strong></p>
<p>当出现异常的运算条件时，抛出次异常。</p>
</li>
<li><p><strong>ArrayIndexOutOfBoundsException 数组下标越界异常</strong></p>
<p>用非法索引访问数组时，抛出的异常，如果索引为负或大于等于数组大小，则该索引为非法索引。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>    <span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>&#125;;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>        System.out.println(arr[i]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>ClassCastExcption 类型转化异常</strong></p>
<p>当试图将对象强制转换为不是实例的子类时，抛出该异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        <span class="hljs-type">A</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>(); <span class="hljs-comment">//向上转型</span><br>        <span class="hljs-type">B</span> <span class="hljs-variable">b2</span> <span class="hljs-operator">=</span> (B)b;    <span class="hljs-comment">//向下转型，ok</span><br>        <span class="hljs-type">C</span> <span class="hljs-variable">c2</span> <span class="hljs-operator">=</span> (C)b;    <span class="hljs-comment">//抛出异常</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span>&#123;&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>NumberFormatException 数字格式不正确异常</strong></p>
<p>当应用程序试图将字符串转换成一种数值类型，但该字符串不能转换为适当格式时，抛出该异常 &#x3D;&gt; 使用异常我们可以确保输入是满足条件数字。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;你好&quot;</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> Integer.parseInt(name);<br>    System.out.println(num);<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="编译异常"><a href="#编译异常" class="headerlink" title="编译异常"></a>编译异常</h3><p>指在编译期间，就必须处理的异常，否则代码不能通过编译。</p>
<p><strong>常见的编译异常</strong></p>
<p>SQLException	&#x2F;&#x2F;操作数据库时，查询表可能发生异常</p>
<p>IOException	&#x2F;&#x2F;操作文件时，发生的异常</p>
<p>FileNotFoundException	&#x2F;&#x2F;当操作一个不存在的文件时，发生异常</p>
<p>ClassNotFoundException	&#x2F;&#x2F;加载类，而该类不存在时，异常</p>
<p>EOFException	&#x2F;&#x2F;操作文件，到文件末尾，发生异常</p>
<p>lllegalArguementException	&#x2F;&#x2F;参数异常</p>
<h3 id="课堂练习-1"><a href="#课堂练习-1" class="headerlink" title="课堂练习"></a>课堂练习</h3><p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107163049201.png" srcset="/img/loading.gif" lazyload alt="image-20221107163049201"></p>
<p>以上代码是否正确，为什么？</p>
<p>左1）错误，数组下标越界异常。</p>
<p>左2）错误。算数异常。</p>
<p>右1）错误，空指针异常。</p>
<p>右2）错误。类型转换异常。</p>
<h2 id="3-异常处理"><a href="#3-异常处理" class="headerlink" title="3.异常处理"></a>3.异常处理</h2><h3 id="基本介绍-1"><a href="#基本介绍-1" class="headerlink" title="基本介绍"></a>基本介绍</h3><p>当异常处理时，对异常处理的方式。</p>
<p><strong>处理方式：</strong></p>
<ol>
<li><p><strong>try-cathc-finally</strong></p>
<p>程序员在代码中捕获发生的异常，自行处理。</p>
</li>
<li><p><strong>throws</strong></p>
<p>将发生的异常抛出，交给调用者（方法）来处理，最顶级的处理者就是JVM。</p>
</li>
</ol>
<p><strong>示意图</strong></p>
<p><strong>t-c-f:</strong></p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107164957355.png" srcset="/img/loading.gif" lazyload alt="image-20221107164957355" style="zoom:50%;" />

<p><strong>throws:</strong></p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221107164929559.png" srcset="/img/loading.gif" lazyload alt="image-20221107164929559"></p>
<h3 id="1-try-catch"><a href="#1-try-catch" class="headerlink" title="1.try-catch"></a>1.try-catch</h3><p> Java提供try和catch块来处理异常。try块用于包含可能出错的代码。catch块用于处理try块中发生的异常。可以根据需要在程序中有多个try…catch块。</p>
<p>基本语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">try</span>&#123;<br>  <span class="hljs-comment">//可疑代码</span><br>  <span class="hljs-comment">//将异常生成对应的异常对象，传递给catch块</span><br>&#125;<span class="hljs-keyword">catch</span>(异常)&#123;<br>  <span class="hljs-comment">//对异常的处理</span><br>&#125;<span class="hljs-keyword">finally</span>&#123;<br>  <span class="hljs-comment">//不管是否发生异常，都执行某段代码</span><br>  <span class="hljs-comment">//释放资源等....</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>注意事项：</strong></p>
<p>1） 如果异常发生了，则异常发生后面的代码不会执行，直接进入到catch块．</p>
<p>2）如果异常没有发生，则顺序执行try的代码块，不会进入到catch.</p>
<p>3） 如果希望不管是否发生异常，都执行某段代码（比如关闭连接，释放资源等） 则使用如下代码－ finally ｛ ｝</p>
<p>4）可以有多个catch语句，捕获不同的异常（进行不同的业务处理），要求<strong>父类异常在后，子类异常在前。</strong></p>
<p>​	比如（Exception 在后，NullPointerException 在前），如果发生异常，只会匹配一个catch。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TryCatchDetail</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>            System.out.println(person.getName()); <span class="hljs-comment">//NullPointException</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> n1 / n2; <span class="hljs-comment">//ArithmeticException</span><br>        &#125;<span class="hljs-keyword">catch</span> (NullPointerException e)&#123;<br>            System.out.println(<span class="hljs-string">&quot;空指针异常&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (ArithmeticException e)&#123;<br>            System.out.println(<span class="hljs-string">&quot;算数异常&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());;<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack&quot;</span>;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>jack<br>算数异常</p>
</blockquote>
<p>5）可以进行 <strong>try-finally</strong> 配合使用，这种用法<strong>相当于没有捕获异常</strong>，因此程序会直接崩掉。</p>
<p>应用场景：不管是否发生异常，都必须执行某个业务逻辑。</p>
<h4 id="练习-2"><a href="#练习-2" class="headerlink" title="练习"></a>练习</h4><h5 id="题目1-2"><a href="#题目1-2" class="headerlink" title="题目1"></a><strong>题目1</strong></h5><p>输出什么，原因？</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108000733354.png" srcset="/img/loading.gif" lazyload alt="image-20221108000733354" style="zoom:50%;" />

<p>输出：4。</p>
<p>names[1].equals(“tom”) ，names[1]为null。所以是NullPointerException。</p>
<p>但finally里return了4，把3覆盖掉了。</p>
<p>所以返回4.</p>
<h5 id="题目2-2"><a href="#题目2-2" class="headerlink" title="题目2"></a>题目2</h5><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108001443174.png" srcset="/img/loading.gif" lazyload alt="image-20221108001443174" style="zoom:50%;" />

<p>输出：4.</p>
<h5 id="题目3-1"><a href="#题目3-1" class="headerlink" title="题目3"></a>题目3</h5><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108001631339.png" srcset="/img/loading.gif" lazyload alt="image-20221108001631339" style="zoom:50%;" />

<p>输出：i &#x3D; 4, 3.</p>
<p>catch（NullPointerException）里的return输出3，但return无法立马输出，所以存储在临时变量temp中，最后再输出。</p>
<h5 id="题目4"><a href="#题目4" class="headerlink" title="题目4"></a>题目4</h5><p>如果用户输入的不是一个整数，就提示他反复输入，直到输入一个整数为止。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TryCatchExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;请输入一个整数：&quot;</span>);<br>            <span class="hljs-keyword">try</span> &#123;<br>                num = Integer.parseInt(scanner.next());<br>                <span class="hljs-keyword">break</span>;<br>            &#125; <span class="hljs-keyword">catch</span> (NumberFormatException e) &#123;<br>                System.out.println(<span class="hljs-string">&quot;你输入的不是一个整数：&quot;</span>);;<br>            &#125;<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;你输入的值是：&quot;</span>+num);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<h3 id="2-throw"><a href="#2-throw" class="headerlink" title="2.throw"></a>2.throw</h3><p>1） 如果一个方法（中的语句执行时）可能生成某种异常，但是并<strong>不能确定如何处理这种异常</strong>，则此方法应显示地声明抛出异常，表明该方法将不对这些异常进行处理，而<strong>由该方法的调用者负责处理</strong>。<br>2） 在方法声明中用throws语句可以声明抛出异常的列表，throws后面的异常类型可以是方法中产生的异常类型，也可以是它的父类。</p>
<p><strong>注意事项：</strong></p>
<p>1） 对于编译异常，程序中必须处理，比如 try-catch 或者 throws</p>
<p>2）对于运行时异常，程序中如果没有处理，<strong>默认就是throws</strong>的方式处理</p>
<p>3）子类重写父类的方法时，对抛出异常的规定：子类重写的方法，所抛出的异常类型要<br>么和父类抛出的异常一致，要么为父类抛出的异常的类型的子类型</p>
<p>4）在throws 过程中，如果有方法 try-catch，就相当于处理异常，就可以不必 throws</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    f2();<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f2</span><span class="hljs-params">()</span>&#123;<br>   <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>   <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>   <span class="hljs-type">double</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> n1/n2;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//f3() 报错</span><br>    <span class="hljs-comment">//1.因为f3() 方法抛出的是一个编译异常</span><br>    <span class="hljs-comment">//2.即这时，就要f1（），必须处理这个编译异常</span><br>    <span class="hljs-comment">//3.在f1()中，要么t-c-f，或者继续throw。</span><br>    f3();<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> FileNotFoundException &#123;<br>    FileInputStream fis= <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;/Users/songyang/Desktop&quot;</span>);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f4</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//在f4()中调用方法f5()不报错</span><br>    <span class="hljs-comment">//因为f5()抛出的是运行异常</span><br>    <span class="hljs-comment">//而java中，并不要求程序员显示处理，因为有默认处理机制</span><br>    f5();<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">f5</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> ArithmeticException&#123;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="3-自定义异常"><a href="#3-自定义异常" class="headerlink" title="3.自定义异常"></a>3.自定义异常</h3><p>当程序中出现了某些“错误”，但该错误信息并没有在Throwable子类中描述处理，这个时候可以自己设计异常类，用于描述该错误信息。</p>
<p><strong>自定义异常的步骤</strong>：</p>
<ol>
<li>定义类：自定义异常类名，继承Exception或RuntimeException</li>
<li>如果继承Exception，属于编译异常</li>
<li>如果继承RuntimeException，属于运行异常（一般选择）</li>
</ol>
<p><strong>例子：</strong></p>
<blockquote>
<p>当我们接收Person对象年龄时，要求范围在18-120之间，否则抛出一个<br>自定义异常（要求 继承RuntimeException），并给出提示信息。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//当我们接收Person对象年龄时，要求范围在18-120之间，否则抛出一个</span><br><span class="hljs-comment">//自定义异常（要求 继承RuntimeException），并给出提示信息。</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomException</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">180</span>;<br>        <span class="hljs-keyword">if</span> (!(age &gt;= <span class="hljs-number">18</span> &amp;&amp; age &lt;= <span class="hljs-number">120</span>))&#123;<br>            <span class="hljs-comment">//这里我们可以通过构造器，设置信息</span><br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgeException</span>(<span class="hljs-string">&quot;年龄需要在18-120之间&quot;</span>);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;你的年龄范围正确。&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//自定义异常</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AgeException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AgeException</span><span class="hljs-params">(String message)</span>&#123;<span class="hljs-comment">//构造器</span><br>        <span class="hljs-built_in">super</span>(message);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108162417848.png" srcset="/img/loading.gif" lazyload alt="image-20221108162417848"></p>
<p>一般情况下，我们自定义异常是继承RuntimeException。即把自定义异常做成运行时异常。</p>
<p>好处是可以使用默认处理机制。</p>
<h3 id="throw和throws的区别"><a href="#throw和throws的区别" class="headerlink" title="throw和throws的区别"></a>throw和throws的区别</h3><table>
<thead>
<tr>
<th></th>
<th>意义</th>
<th>位置</th>
<th>后面跟的东西</th>
</tr>
</thead>
<tbody><tr>
<td>throws</td>
<td>异常处理的一种方式</td>
<td>方法声明处</td>
<td>异常类型</td>
</tr>
<tr>
<td>throw</td>
<td><strong>手动</strong>生成异常对象的关键字</td>
<td>方法体中</td>
<td>异常对象</td>
</tr>
</tbody></table>
<p>测试（下面的测试输出为？）：</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108163012104.png" srcset="/img/loading.gif" lazyload alt="image-20221108163012104" style="zoom:50%;" />

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108163038281.png" srcset="/img/loading.gif" lazyload alt="image-20221108163038281" style="zoom:50%;" />

<p>输出：</p>
<p>进入方法A。</p>
<p>用A方法的finally。</p>
<p>制造异常。</p>
<p>进入方法B。</p>
<p>调用B方法的finally。</p>
<p><strong>解析：</strong></p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108163554906.png" srcset="/img/loading.gif" lazyload alt="image-20221108163554906"></p>
<h2 id="本章作业"><a href="#本章作业" class="headerlink" title="本章作业"></a>本章作业</h2><h3 id="题目1（编程题）"><a href="#题目1（编程题）" class="headerlink" title="题目1（编程题）"></a>题目1（编程题）</h3><blockquote>
<p>a）编写应用程序EcmDef.java，接收命令行的两个参数（整数），计算两数相除。</p>
<p>b）计算两个数相除，要求使用方法 cal（int n1， int n2）</p>
<p>c）对数据格式不正确、缺少命令行参数、除0 进行异常处理。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//a）编写应用程序EcmDef.java，接收命令行的两个参数（整数），计算两数相除。</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">//b）计算两个数相除，要求使用方法 cal（int n1， int n2）</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">//c）对数据格式不正确(NumberFormatException)、缺少命令行参数(ArrayIndexOutOfBoundsException)、</span><br><span class="hljs-comment">// 除0 进行异常处理(ArithmeticException)。</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//先验证输入参数的个数是否正确</span><br>            <span class="hljs-keyword">if</span> (args.length !=<span class="hljs-number">2</span>)&#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayIndexOutOfBoundsException</span>(<span class="hljs-string">&quot;参数个数不对&quot;</span>);<br>            &#125;<br>            <span class="hljs-comment">//接受参数,转换成整数</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> Integer.parseInt(args[<span class="hljs-number">0</span>]);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> Integer.parseInt(args[<span class="hljs-number">1</span>]);<br>            <span class="hljs-comment">//将n1，n2传入call</span><br>            <span class="hljs-type">double</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> cal(n1,n2); <span class="hljs-comment">//可能会抛出算术异常</span><br><br>            System.out.println(<span class="hljs-string">&quot;计算结果为：&quot;</span>+res);<br>        &#125; <span class="hljs-keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;<br>            System.out.println(e.getMessage());<br>        &#125; <span class="hljs-keyword">catch</span> (NumberFormatException e)&#123;<br>            System.out.println(<span class="hljs-string">&quot;参数格式不正确，需要输入整数。&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (ArithmeticException e)&#123;<br>            System.out.println(<span class="hljs-string">&quot;出现了除0的异常&quot;</span>);<br>        &#125;<br><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">cal</span><span class="hljs-params">(<span class="hljs-type">int</span> n1,<span class="hljs-type">int</span> n2)</span>&#123;<br>        <span class="hljs-keyword">return</span> n1/n2;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="题目2-3"><a href="#题目2-3" class="headerlink" title="题目2"></a>题目2</h3><blockquote>
<p>说出以下代码是否会发生异常？</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108172127749.png" srcset="/img/loading.gif" lazyload alt="image-20221108172127749" style="zoom:50%;" />
</blockquote>
<p>第一句可能报出<strong>NullPointerException</strong>空指针异常或<strong>ArrayIndexOutOfBoundsException</strong> 数组下标越界异常。</p>
<p>最后一句一定会报出<strong>ClassCastExcption</strong>类型转换异常，String不能转换成Int。</p>
<h3 id="题目3-2"><a href="#题目3-2" class="headerlink" title="题目3"></a>题目3</h3><blockquote>
<p>写出程序运行结果：</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108172811298.png" srcset="/img/loading.gif" lazyload alt="image-20221108172811298" style="zoom:50%;" />
</blockquote>
<p>输出：BCD</p>
<h3 id="题目4-1"><a href="#题目4-1" class="headerlink" title="题目4"></a>题目4</h3><blockquote>
<p>写出程序运行结果：</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108173105006.png" srcset="/img/loading.gif" lazyload alt="image-20221108173105006" style="zoom:50%;" />
</blockquote>
<p>输出：BCD</p>
<h1 id="章节十三-常用类"><a href="#章节十三-常用类" class="headerlink" title="章节十三 常用类"></a>章节十三 常用类</h1><blockquote>
<p>Java是一个<strong>面向对象</strong>的编程语言，但是Java中的八种基本数据类型却是<strong>不面向对象</strong>的。为了使用方便和解决这个不足，在设计类时为每个基本数据类型设计了一个对应的类进行代表，这样八种基本数据类型对应的类统称为包装类(Wrapper Class)，包装类均位于java.lang包。</p>
<p>简单来说，例如:</p>
<p>Object obj &#x3D; 1</p>
<p>Int i;</p>
<p>没办法直接将obj（引用类型）的值赋给i（基本数据类型），但转换成Integer包装类就可以实现。</p>
</blockquote>
<h2 id="1-包装类"><a href="#1-包装类" class="headerlink" title="1.包装类"></a>1.包装类</h2><p>针对八种基本数据类型相应的引用类型——包装类。</p>
<table>
<thead>
<tr>
<th>基本数据类型</th>
<th>包装类</th>
</tr>
</thead>
<tbody><tr>
<td>boolean</td>
<td>Boolean</td>
</tr>
<tr>
<td>char</td>
<td>Character</td>
</tr>
<tr>
<td>byte</td>
<td>Byte</td>
</tr>
<tr>
<td>short</td>
<td>Short</td>
</tr>
<tr>
<td>int</td>
<td>Integer</td>
</tr>
<tr>
<td>long</td>
<td>Long</td>
</tr>
<tr>
<td>float</td>
<td>Float</td>
</tr>
<tr>
<td>double</td>
<td>Double</td>
</tr>
</tbody></table>
<h3 id="相关结构图"><a href="#相关结构图" class="headerlink" title="相关结构图"></a>相关结构图</h3><p>Character和Boolean类似。</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108215134036.png" srcset="/img/loading.gif" lazyload alt="image-20221108215134036" style="zoom:50%;" />

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108215639035.png" srcset="/img/loading.gif" lazyload alt="image-20221108215639035" style="zoom:50%;" />

<p>包装类都有Comparable接口，这也就意味着包装类都是可以进行比较的（comparato）</p>
<h3 id="包装类和基本数据类型的转换"><a href="#包装类和基本数据类型的转换" class="headerlink" title="包装类和基本数据类型的转换"></a>包装类和基本数据类型的转换</h3><ol>
<li>jdk5前：手动装箱和拆箱。</li>
<li>jdk5后：自动装箱和拆箱。</li>
<li>自动装箱底层调用的是valueOf方法，比如Integer.valueOf()</li>
</ol>
<p>例子：Integer和int</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">//int &lt;--&gt; Integer 的装箱和拆箱</span><br>    <span class="hljs-comment">//jdk5前</span><br>    <span class="hljs-comment">//手动装箱 int --&gt; Integer</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">n1</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">integer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(n1);<br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">integer1</span> <span class="hljs-operator">=</span> Integer.valueOf(n1);<br>    <span class="hljs-comment">//手动拆箱 Integer --&gt; int</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> integer.intValue();<br><br>    <span class="hljs-comment">//jdk5后自动装箱</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">n2</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>    <span class="hljs-type">Integer</span> <span class="hljs-variable">integer2</span> <span class="hljs-operator">=</span> n2;  <span class="hljs-comment">//底层使用的是Integer integer2 = Integer.valueOf(n2);</span><br>    <span class="hljs-comment">//自动拆箱</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">n3</span> <span class="hljs-operator">=</span> integer2;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="课堂练习-2"><a href="#课堂练习-2" class="headerlink" title="课堂练习"></a>课堂练习</h4><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221108221725822.png" srcset="/img/loading.gif" lazyload alt="image-20221108221725822" style="zoom:50%;" />

<p>1）正确，自动装箱（底层Double.valueOf(100d),Float.valueOf(1.5))</p>
<p>2）第一个返回1.0。因为<strong>三元运算符看做一个整体</strong>，其中精度最高的是Double，所以提升了优先级。</p>
<p>第二个返回1。因为if和else是独立的语句。</p>
<h3 id="包装类型和String类型的相互转换"><a href="#包装类型和String类型的相互转换" class="headerlink" title="包装类型和String类型的相互转换"></a>包装类型和String类型的相互转换</h3><p>以Integer和String为例，其他类似。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//包装类（Integer）-&gt; String</span><br><span class="hljs-type">Integer</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br><span class="hljs-comment">//方式1</span><br><span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> i + <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-comment">//方式2</span><br><span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> i.toString();<br><span class="hljs-comment">//方式3</span><br><span class="hljs-type">String</span> <span class="hljs-variable">str3</span> <span class="hljs-operator">=</span> String.valueOf(i);<br><br><span class="hljs-comment">//String -&gt; 包装类（Integer）</span><br><span class="hljs-type">String</span> <span class="hljs-variable">str4</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123456&quot;</span>;<br><span class="hljs-comment">//方式1</span><br><span class="hljs-type">Integer</span> <span class="hljs-variable">i2</span> <span class="hljs-operator">=</span> Integer.parseInt(str4); <span class="hljs-comment">//自动装箱</span><br><span class="hljs-comment">//方式2</span><br><span class="hljs-type">Integer</span> <span class="hljs-variable">i3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(str4); <span class="hljs-comment">//使用构造器</span><br></code></pre></td></tr></table></figure>



<h3 id="包装类的常用方法"><a href="#包装类的常用方法" class="headerlink" title="包装类的常用方法"></a>包装类的常用方法</h3><p>Integer类和Character类的常用方法</p>
<p>Integer.<strong>MAX_VALUE&#x2F;MIN_VALUE</strong>  ： 返回最大值，返回最小值</p>
<p>Character.<strong>isDigit(‘a’)</strong>&#x2F;<strong>isLetter(‘a’)</strong>&#x2F;<strong>isUpperCase(‘a’)</strong>&#x2F;<strong>isLowerCase(‘a’)</strong> ： 判断是否为数字&#x2F;字母&#x2F;大写&#x2F;小写。</p>
<p>Character.isWhitespace(‘a’) ：判断是不是空格</p>
<p>Character.<strong>toUpperCase(‘a’)</strong>&#x2F;<strong>toLowerCase(‘A’)</strong> : 转成大写&#x2F;小写</p>
<h3 id="Integer类面试题"><a href="#Integer类面试题" class="headerlink" title="Integer类面试题"></a>Integer类面试题</h3><h4 id="题目1-3"><a href="#题目1-3" class="headerlink" title="题目1:"></a>题目1:</h4><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111144958617.png" srcset="/img/loading.gif" lazyload alt="image-20221111144958617" style="zoom:50%;" />



<p>分析：</p>
<p>i和j皆为对象，i&#x3D;&#x3D;j意为判断i和j是否为同一对象，所以输出为False。</p>
<p>m和n为直接赋值，并不是new Integer()。等同于Integer valueOf。</p>
<p>查看Integer valueOf(int i)的源码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Returns an &#123;<span class="hljs-doctag">@code</span> Integer&#125; instance representing the specified</span><br><span class="hljs-comment">     * &#123;<span class="hljs-doctag">@code</span> int&#125; value.  If a new &#123;<span class="hljs-doctag">@code</span> Integer&#125; instance is not</span><br><span class="hljs-comment">     * required, this method should generally be used in preference to</span><br><span class="hljs-comment">     * the constructor &#123;<span class="hljs-doctag">@link</span> #Integer(int)&#125;, as this method is likely</span><br><span class="hljs-comment">     * to yield significantly better space and time performance by</span><br><span class="hljs-comment">     * caching frequently requested values.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * This method will always cache values in the range -128 to 127,</span><br><span class="hljs-comment">     * inclusive, and may cache other values outside of this range.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>  i an &#123;<span class="hljs-doctag">@code</span> int&#125; value.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> an &#123;<span class="hljs-doctag">@code</span> Integer&#125; instance representing &#123;<span class="hljs-doctag">@code</span> i&#125;.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@since</span>  1.5</span><br><span class="hljs-comment">     */</span><br><span class="hljs-meta">@HotSpotIntrinsicCandidate</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-title function_">valueOf</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)<br>        <span class="hljs-keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(i);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>传进去的i如果大于IntegerCache.low且小于IntegerCache.high，返回IntegerCache.cache[i + (-IntegerCache.low)]。</p>
<p>否则直接返回i。</p>
<p>注释里标注出了该方法的cache返回为-128 to 127.</p>
<p>因此，m &#x3D;&#x3D; n的结果为True。</p>
<p>而x &#x3D;&#x3D; y 的结果为False。</p>
<h4 id="题目2-4"><a href="#题目2-4" class="headerlink" title="题目2"></a>题目2</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//示例一</span><br>Integer i1=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>( <span class="hljs-number">127</span> );<br>Integer i2=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>( <span class="hljs-number">127</span> ); <br>System.out.println(i1==i2);<br><span class="hljs-comment">//示例二</span><br>Integer i3=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>( <span class="hljs-number">128</span> ); <br>Integer i4=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>( <span class="hljs-number">128</span> ); <br>System.out.println(i3==i4);<br><span class="hljs-comment">//示例三</span><br>Integer i5=<span class="hljs-number">127</span>;<br>Integer i6=<span class="hljs-number">127</span>;<br>System.out.println(i5==i6);<br><span class="hljs-comment">//示例四</span><br>Integer i7=<span class="hljs-number">128</span>;<br>Integer i8=<span class="hljs-number">128</span>;<br>System.out.println(i7==i8);<br><span class="hljs-comment">//示例五</span><br>Integer i9=<span class="hljs-number">127</span>;<br>Integer i10=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">127</span>); <br>System.out.println(i9==i10);<br><span class="hljs-comment">//示例六</span><br>Integer i11=<span class="hljs-number">127</span>;<br><span class="hljs-type">int</span> i12=<span class="hljs-number">127</span>;<br>System.out.println(i11==i12);<br><span class="hljs-comment">//示例七</span><br>Integer i13=<span class="hljs-number">128</span>;<br><span class="hljs-type">int</span> i14=<span class="hljs-number">128</span>;<br>System.out.println(i13==i14);<br></code></pre></td></tr></table></figure>

<p>1：false</p>
<p>2：false</p>
<p>3：true</p>
<p>4：false</p>
<p>5：flase</p>
<p>只要有基本数据类型，判断的是值是否相等。</p>
<p>6：true</p>
<p>7：true</p>
<h2 id="2-String类"><a href="#2-String类" class="headerlink" title="2.String类"></a>2.String类</h2><h3 id="String类的理解和创建对象"><a href="#String类的理解和创建对象" class="headerlink" title="String类的理解和创建对象"></a>String类的理解和创建对象</h3><ol>
<li><p><strong>String对象用于保存字符串</strong>，也就是一组字符序列</p>
</li>
<li><p>字符串常量对象使用<strong>双引号</strong>括起的<strong>字符序列</strong>。例如“你好”，“12.97“…</p>
</li>
<li><p>字符串的字符使用<strong>Unicode字符编码</strong>，一个字符两个字节（不分字母汉字）</p>
</li>
<li><p>String类常用的构造方法</p>
<ul>
<li>String s1 &#x3D; new String();</li>
<li>String s2 &#x3D; new String(String original);</li>
<li>String s3 &#x3D; new String(char[] a);</li>
<li>String s4 &#x3D; new String(char[] a,int startIndex,int count)</li>
</ul>
</li>
<li><p>String类实现了接口<strong>Serializable、Comparable</strong></p>
</li>
<li><p>String是<strong>final类</strong>（常量）。不能被其他类继承。</p>
</li>
<li><p>String有属性 private final <strong>byte[]</strong> value; 用于存放字符串内容。</p>
<ul>
<li>JDK8以前是private final <strong>char[]</strong> value;</li>
</ul>
</li>
<li><p>注意：value是一个final类型，不可以修改（地址）。</p>
<ul>
<li><p>指value<strong>不能指向新的地址</strong>，但单个字符的内容是可以变化的</p>
</li>
<li><p>&#96;&#96;&#96;java<br>final byte[] value &#x3D; {‘a’,’b’,’c’};<br>byte[] v2 &#x3D; {‘t’,’o’,’m’};<br>value[0] &#x3D; ‘H’;<br>&#x2F;&#x2F;value &#x3D; v2; 不可以修改value地址</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><br><br><br><br><br>**<span class="hljs-type">String</span>的相关接口**：<br><br>![image<span class="hljs-number">-20221111153946993</span>](https:<span class="hljs-comment">//soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111153946993.png)</span><br><br>**Serializable**：说明<span class="hljs-type">String</span>对象可以串行化（意味着可以网络传输）<br><br>**Comparable**：说明<span class="hljs-type">String</span>对象可以相互比较<br><br>CharSequence：字符序列。<br><br><br><br>**<span class="hljs-type">String</span>构造器**：<br><br>&lt;img src=<span class="hljs-string">&quot;https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111154603405.png&quot;</span> alt=<span class="hljs-string">&quot;image-20221111154603405&quot;</span> style=<span class="hljs-string">&quot;zoom:50%;&quot;</span> /&gt;<br><br><br><br>### 创建<span class="hljs-type">String</span>对象的两种方式<br><br><span class="hljs-number">1.</span> 方式一：直接复制**<span class="hljs-type">String</span> s = <span class="hljs-string">&quot;tomato&quot;</span>**<br>   - 先从常量池查看是否有<span class="hljs-string">&quot;tomato&quot;</span>数据空间<br>     - 如果有，直接指向；<br>     - 如果没有，重新创建，然后指向<br>   - s最终指向的是常量池的空间地址<br><span class="hljs-number">2.</span> 方式二：调用构造器**<span class="hljs-type">String</span> s = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">&quot;tomato&quot;</span>)**<br>   - 先在堆中创建空间，里面维护了value属性，指向常量池的<span class="hljs-string">&quot;tomato&quot;</span>空间。<br>     - 如果常量池没有<span class="hljs-string">&quot;tomato&quot;</span>,重新创建。<br>     - 如果有，直接通过value指向。<br>   - 最终指向的是堆中的空间地址。<br><br>结构图：<br><br>![image<span class="hljs-number">-20221111164019918</span>](https:<span class="hljs-comment">//soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111164019918.png)</span><br><br><br><br>### （四道测试题）<br><br>测试题<span class="hljs-number">1</span>：<br><br>&lt;img src=<span class="hljs-string">&quot;https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111164119329.png&quot;</span> alt=<span class="hljs-string">&quot;image-20221111164119329&quot;</span> style=<span class="hljs-string">&quot;zoom:50%;&quot;</span> /&gt;<br><br>输出：<span class="hljs-literal">true</span>，<span class="hljs-literal">true</span><br><br><br><br>测试题<span class="hljs-number">2</span>：<br><br>```java<br><span class="hljs-type">String</span> a = <span class="hljs-string">&quot;hsp&quot;</span>;<br><span class="hljs-type">String</span> b =<span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">&quot;hsp&quot;</span>);<br>System.out.<span class="hljs-built_in">println</span>(a.<span class="hljs-built_in">equals</span>(b));<br>System.out.<span class="hljs-built_in">println</span>(a==b);<br>System.out.<span class="hljs-built_in">println</span>(a==b.<span class="hljs-built_in">intern</span>()); System.out.<span class="hljs-built_in">println</span>(b==b.<span class="hljs-built_in">intern</span>());<br></code></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<p>输出：true、false、true、false</p>
<p><strong>分析：</strong></p>
<p>关于intern：</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111192927423.png" srcset="/img/loading.gif" lazyload alt="image-20221111192927423" style="zoom:50%;" />

<p>intern方法，如果池中包含一个等与此String的字符串（用equasl确认），则返回池中的字符串。</p>
<p>否则，将此String对象添加到池中，并返回此String对象的引用。</p>
<p>b.intern()方法最终返回的是常量池的地址（对象）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hsp&quot;</span>;  <span class="hljs-comment">//a指向常量池的“hsp”</span><br><span class="hljs-type">String</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;hsp&quot;</span>); <span class="hljs-comment">//b指向堆中对象value</span><br>System.out.println(a.equals(b));<br>System.out.println(a==b);<br>System.out.println(a==b.intern());<span class="hljs-comment">//常量池已经有hsp了，所以相等。</span><br>System.out.println(b==b.intern());<span class="hljs-comment">//b指向堆，但b.intern()返回的是字符串</span><br></code></pre></td></tr></table></figure>



<p>测试题3：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hspedu&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;java&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">s4</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;java&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;java&quot;</span>);<br>System.out.println(s2 == s3);<br>System.out.println(s2 == s4);<br>System.out.println(s2.equals(s3)); <br>System.out.println(s1 == s2);<br></code></pre></td></tr></table></figure>

<p>输出：false、true、true、false</p>
<p>测试题4：</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111194411642.png" srcset="/img/loading.gif" lazyload alt="image-20221111194411642" style="zoom:50%;" />

<p>true、true、true、false</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221111195410636.png" srcset="/img/loading.gif" lazyload alt="image-20221111195410636" style="zoom:50%;" />





<h3 id="String对象特性"><a href="#String对象特性" class="headerlink" title="String对象特性"></a>String对象特性</h3><ol>
<li><p><strong>String是一个final类，代表不可变的字符序列。</strong></p>
</li>
<li><p><strong>字符串时不可变的。一个字符串对象一旦被分配，其内容是不可变的。</strong></p>
</li>
</ol>
<p>例题：以下语句创建了几个对象？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>s1 = <span class="hljs-string">&quot;haha&quot;</span>;<br></code></pre></td></tr></table></figure>

<p>答：两个。第一条语句直接在常量创建”hello”对象。由于字符串对象不可变，所以第二条语句重新创建了”haha”对象，s1指向”haha”。</p>
<p><strong>面试题：以下语句创建了几个对象？</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>+<span class="hljs-string">&quot;abc&quot;</span>;<br></code></pre></td></tr></table></figure>

<p>分析：底层会优化，直接等价于 String a &#x3D; “helloabc”;</p>
<p>所以只创建了一个对象。</p>
<p>题目2：以下语句创建了几个对象？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abc&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> a+b;<br></code></pre></td></tr></table></figure>

<p>分析：前两条语句创建了两个对象a、b</p>
<p>第三条语句，内部调用append（）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> StringBuilder <span class="hljs-title function_">append</span><span class="hljs-params">(String str)</span> &#123;<br>    <span class="hljs-built_in">super</span>.append(str);<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>调用了两次append，然后又调用了toString。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// Create a copy, don&#x27;t share the array</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(value, <span class="hljs-number">0</span>, count);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>也就是：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span><span class="hljs-type">StringBuilder</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> StringBuilder();<br><span class="hljs-number">2.</span>ss.append(<span class="hljs-string">&quot;hello&quot;</span>);<br><span class="hljs-number">3.</span>ss.append(<span class="hljs-string">&quot;abc&quot;</span>);<br><span class="hljs-number">4.</span><span class="hljs-type">String</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> ss.toString();<br>最后c指向堆中的对象(String) value[] -&gt; 池中 <span class="hljs-string">&quot;helloabc&quot;</span><br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112114153189.png" srcset="/img/loading.gif" lazyload alt="image-20221112114153189" style="zoom: 25%;" />

<p>一共3个对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;helloabc&quot;</span>;<br>System.out.println(c == d);<br><span class="hljs-comment">//输出？？</span><br></code></pre></td></tr></table></figure>

<p>输出False。因为c指向堆，d直接指向池中的对象。</p>
<p>题目3：下面代码输出什么，并说明原因？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hspedu&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;java&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">s5</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hspedujava&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">s6</span> <span class="hljs-operator">=</span> (s1 + s2).intern();<br>System.out.println(s5 == s6);<br>System.out.println(s5.equals(s6));<br></code></pre></td></tr></table></figure>

<p>输出：True、True.</p>
<p>因为s6和s5都指向常量池的”hspedujava”。</p>
<p>题目4：</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112122631995.png" srcset="/img/loading.gif" lazyload alt="image-20221112122631995" style="zoom:50%;" />

<p>输出：hsp and hava。</p>
<p>str 和 char[] 作为类Test1的属性存于堆中。</p>
<p>只要调用方法就会在栈中产生新的栈。</p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112152600330.png" srcset="/img/loading.gif" lazyload alt="image-20221112152600330"></p>
<h3 id="String常用方法"><a href="#String常用方法" class="headerlink" title="String常用方法"></a>String常用方法</h3><p><strong>常用方法：</strong></p>
<ul>
<li><p>equals&#x2F;&#x2F;区分大小写，判断内容是否相等</p>
</li>
<li><p>equalslgnoreCase&#x2F;&#x2F;忽略大小写，判断内容是否相等</p>
</li>
<li><p>length&#x2F;&#x2F;获取字符的个数，字符串的长度</p>
</li>
<li><p>indexOf&#x2F;&#x2F;获取字符在字符串中第1次出现的索引，索引从0开始，如果找不到，返回－1</p>
</li>
<li><p>lastlndexOf&#x2F;&#x2F;获取字符在字符串中最后1次出现的索引，索引从0开始，如找不到，返回－1</p>
</li>
<li><p>substring&#x2F;&#x2F;截取指定范围的子串</p>
</li>
<li><p>trim&#x2F;&#x2F;去前后空格</p>
</li>
<li><p>charAt:获取某索引处的字符，注意不能使用Str［index］ 这种方式.</p>
</li>
<li><p>toUpperCase</p>
</li>
<li><p>toLowerCase</p>
</li>
<li><p>concat 拼接字符串</p>
</li>
<li><p>replace 替换字符串中的字符</p>
<ul>
<li>例如：s2 &#x3D; s1.replace(“宝玉”,”jack”);</li>
<li>s1.replaca()执行后，返回的结果才是替换过的。s1本身无影响。</li>
</ul>
</li>
<li><p>split 分割字符串，对于某些分割字符，我们需要 转义比如｜\ \等</p>
<ul>
<li><p>例如： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">poem</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;锄禾日当午,汗滴禾下土,谁知盘中餐,粒粒皆辛苦&quot;</span>;<br>String[] split = poem.split(<span class="hljs-string">&quot;,&quot;</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; split.length; i++) &#123;<br>    System.out.println(split[i]);<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112163943852.png" srcset="/img/loading.gif" lazyload alt="image-20221112163943852" style="zoom:50%;" />

<p>又例如：文件名分割</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">poem</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;E:\\aaa\\bbb&quot;</span>;<br>String[] split = poem.split(<span class="hljs-string">&quot;\\\\&quot;</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; split.length; i++) &#123;<br>    System.out.println(split[i]);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>如果对字符串进行分割时，有特殊字符，需要加入转义符\</p>
</li>
</ul>
</li>
<li><p>compareTo&#x2F;&#x2F;比较两个字符串的大小</p>
<ol>
<li><p>如果长度相同，每个字符也相同，返回0</p>
</li>
<li><p>如果长度相同或者不相同，但在进行比较时，可以区分大小</p>
<p>就返回if(c1!&#x3D;c2){ return c1-c2};</p>
</li>
<li><p>如果前面部分都相同，返回str1.len - str2.len</p>
</li>
</ol>
</li>
<li><p>toCharArray&#x2F;&#x2F;转换成字符数组</p>
</li>
<li><p>format&#x2F;&#x2F;格式字符串，％s 字符串 ％c 字符 ％d 整型 ％．2f 浮点型</p>
<ul>
<li>%s、%d、%c、%.2f 称为占位符</li>
<li>占位符由后面变量来替换</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;john&quot;</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><span class="hljs-type">double</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> <span class="hljs-number">98.3</span>/<span class="hljs-number">3</span>;<br><span class="hljs-type">char</span> <span class="hljs-variable">gender</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;男&#x27;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">&quot;我的名字是%s，年龄是%d，成绩是%.2f，性别是%c，希望大家喜欢我。&quot;</span>,name,age,score,gender);<br>System.out.println(<span class="hljs-string">&quot;info=&quot;</span>+info);<br></code></pre></td></tr></table></figure>

<p>输出：info&#x3D;我的名字是john，年龄是10，成绩是32.77，性别是男，希望大家喜欢我。</p>
</li>
</ul>
<h2 id="3-StringBuffer-amp-StringBuilder类"><a href="#3-StringBuffer-amp-StringBuilder类" class="headerlink" title="3.StringBuffer&amp;StringBuilder类"></a>3.StringBuffer&amp;StringBuilder类</h2><p>String类是保存字符串常量的，每次更新都要重新开辟空间，效率较低。</p>
<p>因此java设计者还提供了<strong>StringBuilder</strong>和<strong>StringBuffer</strong>来增强String的功能，并提高效率。</p>
<p>例如下面这段循环。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;&quot;</span>);<br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;i&lt;<span class="hljs-number">80000</span>;i++)&#123;<br>	s+=<span class="hljs-string">&quot;hello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>循环8w次，每一次更改s都要重新开辟空间。非常麻烦，效率极低。</p>
<h3 id="StringBuffer"><a href="#StringBuffer" class="headerlink" title="StringBuffer"></a>StringBuffer</h3><ul>
<li>java.lang.StringBuffer代表可变的字符序列，可以对字符串内容进行增删改查。</li>
<li>很多方法与String相同，但StringBuffer是可变长度的。</li>
<li>StringBuffer是一个容器。</li>
</ul>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112175503010.png" srcset="/img/loading.gif" lazyload alt="image-20221112175503010" style="zoom:50%;" />

<ul>
<li><p>StringBuffer 的直接父类是AbstractStringBuilder。</p>
</li>
<li><p>StringBuffer 实现了 Serializable。即StringBuffer的对象可以串行化。</p>
</li>
<li><p>在父类中 AbstractStringBuilder 有属性 char[] value，不是final。</p>
<p>该value数组存放字符串内容。引出存放在堆中的。</p>
</li>
<li><p>StringBuffer是一个final类，不能被继承。</p>
</li>
</ul>
<p><strong>String 和 StringBuffer的比较</strong>：</p>
<ol>
<li>String保存的是<strong>字符串常量</strong>，里面的<strong>值不能更改</strong>，每次String类的更新实际 上就是更改地址，效率较低	<ul>
<li>private final char value［］；</li>
</ul>
</li>
<li>StringBuffer保存的是<strong>字符串变量</strong>，里面的<strong>值可以更改</strong>，每次StringBuffer的更新实际上可以更新内容，<strong>不用更新地址，效率较高</strong><ul>
<li>char［］ value； ／&#x2F; 这个放在堆.</li>
</ul>
</li>
</ol>
<p><strong>StringBuffer的构造器：</strong></p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221112181324051.png" srcset="/img/loading.gif" lazyload alt="image-20221112181324051"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1.创建一个大小为16的char[]数组，用于存放字符内容</span><br><span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br><br><span class="hljs-comment">//2.通过构造器指定char[]大小</span><br><span class="hljs-type">StringBuffer</span> <span class="hljs-variable">stringBuffer1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-number">100</span>);<br><br><span class="hljs-comment">//3.通过 给一个String 创建StringBuffer  (16+str.len)</span><br><span class="hljs-type">StringBuffer</span> <span class="hljs-variable">hello</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br></code></pre></td></tr></table></figure>



<p><strong>String 和 StringBuffer相互转换：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//String -》 StringBuffer</span><br><span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello tom&quot;</span>;<br><span class="hljs-comment">//方式1</span><br><span class="hljs-comment">//注意：返回的才是StringBuffer对象，对str本身没有影响</span><br><span class="hljs-type">StringBuffer</span> <span class="hljs-variable">b1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(str);<br><span class="hljs-comment">//方式2</span><br><span class="hljs-type">StringBuffer</span> <span class="hljs-variable">b2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br>b2 = b2.append(str);<br><br><span class="hljs-comment">//StringBuffer -》 String</span><br><span class="hljs-type">StringBuffer</span> <span class="hljs-variable">b3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;hspedu&quot;</span>);<br><span class="hljs-comment">//方式1 使用StringBuffer提供的toString方法</span><br><span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> b3.toString();<br><span class="hljs-comment">//方式2 使用构造器</span><br><span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(b3);<br></code></pre></td></tr></table></figure>



<p><strong>StringBuffer的常用方法</strong></p>
<p>1） 增 append<br>2） 删 delete（start，end）<br>3） 改 replace（start，end，string）<br>4） 查 indexOf ／／查找子串在字符串第1<br>次出现的索引，如果找不到返回-1<br>5） 插 insert<br>6） 获取长度 length</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">StringBuffer</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br><span class="hljs-comment">//增</span><br>s.append(<span class="hljs-string">&quot;,&quot;</span>);<br>s.append(<span class="hljs-string">&quot;张三丰&quot;</span>);<br>s.append(<span class="hljs-string">&quot;赵敏&quot;</span>).append(<span class="hljs-number">100</span>).append(<span class="hljs-literal">true</span>).append(<span class="hljs-number">10.5</span>);<br>System.out.println(s); <span class="hljs-comment">//hello,张三丰赵敏100true10.5</span><br><span class="hljs-comment">//删</span><br>s.delete(<span class="hljs-number">11</span>,<span class="hljs-number">14</span>);<br>System.out.println(s); <span class="hljs-comment">//hello,张三丰赵敏true10.5</span><br><span class="hljs-comment">//改</span><br>s.replace(<span class="hljs-number">9</span>,<span class="hljs-number">11</span>,<span class="hljs-string">&quot;周芷若&quot;</span>);<br>System.out.println(s); <span class="hljs-comment">//hello,张三丰周芷若true10.5</span><br><span class="hljs-comment">//查找字符串第一次出现索引</span><br><span class="hljs-type">int</span> <span class="hljs-variable">indexOf</span> <span class="hljs-operator">=</span> s.indexOf(<span class="hljs-string">&quot;张三丰&quot;</span>);<br>System.out.println(indexOf); <span class="hljs-comment">//6</span><br><span class="hljs-comment">//插</span><br>s.insert(<span class="hljs-number">9</span>,<span class="hljs-string">&quot;赵敏&quot;</span>);<br>System.out.println(s);<br><span class="hljs-comment">//长度</span><br>System.out.println(s.length()); <span class="hljs-comment">//22</span><br></code></pre></td></tr></table></figure>



<p>测试1：以下代码的输出是？</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221113005253653.png" srcset="/img/loading.gif" lazyload alt="image-20221113005253653" style="zoom:50%;" />

<p>输出：4、null、(抛出空指针异常)</p>
<p>测试2：</p>
<blockquote>
<p>输入商品名称和商品价格，要求打印效果示例，使用前面学习的方法完成：</p>
<p>商品名 商品价格<br>手机 	123，564.59<br>要求：价格的小数点前面每三位用逗号隔开。</p>
</blockquote>
<p>小数点：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;11111111123564.59&quot;</span>;<br><span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(price);<br><span class="hljs-comment">//找到小数点的索引</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> sb.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>)-<span class="hljs-number">3</span>; i&gt;<span class="hljs-number">0</span>; i-=<span class="hljs-number">3</span> ) &#123;<br>    sb.insert(i,<span class="hljs-string">&quot;,&quot;</span>);<br>&#125;<br>System.out.println(sb);<br></code></pre></td></tr></table></figure>

<p>输出：11,111,111,123,564.59</p>
<h3 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h3><ol>
<li>一个可变的字符序列。此类提供一个与StringBuffer 兼容的 API，但不保证同步。该类被设计用作 StringBuffer的一个简易替换，<strong>用在字符串缓冲区被单个线程使用的时候</strong>。如果可能，建议优先采用该类，因为在大多数实现中，它比 StringBuffer 要快  。</li>
<li>在StringBuilder 上的主要操作是 append 和 insert 方法，可重载这些方法，以接受任意类型的数据。</li>
</ol>
<p>和StringBuffer差不多。</p>
<p>但StringBuilder的方法，没有做互斥处理。因此在单线程的情况下使用StringBuilder。</p>
<h3 id="String、StringBuffer和StringBuilder的比较"><a href="#String、StringBuffer和StringBuilder的比较" class="headerlink" title="String、StringBuffer和StringBuilder的比较"></a>String、StringBuffer和StringBuilder的比较</h3><ol>
<li>StringBuilder 和 StringBuffer 非常类似，均代表可变的字符序列，而且方法也一样</li>
<li>String:不可变字符序列，效率低，但是复用率高。</li>
<li>StringBuffer:可变字符序列、效率较高（增删）、线程安全</li>
<li>StringBuilder:可变字符序列、效率最高、线程不安全</li>
<li>String使用注意说明：<br>string s＝＂a＂； ／&#x2F;创建了一个字符串<br>s ＋＝ ＂b＂； ／&#x2F;实际上原来的＂a＂字符串对象已经丢弃了，现在又产生了一个字符串s＋＂b＂（也就是＂ab＂）。如果多次执行这些改变串内容的操作，会导致大量副本字符串对象存留在内存中，降低效率。如果这样的操作放到循环中，会极大影响程序的性能。</li>
</ol>
<p>结论：如果我们对String 做大量修改，不要使用String</p>
<ul>
<li>如果字符串存在大量的修改操作，一般使用 StringBuffer 或StringBuilder</li>
<li>如果字符串存在大量的修改操作，并在单线程的情况，使用 StringBuilder</li>
<li>如果字符串存在大量的修改操作，并在多线程的情况，使用 StringBuffer</li>
<li>如果我们字符串很少修改，被多个对象引用，使用String，比如配置信息等</li>
</ul>
<h2 id="4-Math类"><a href="#4-Math类" class="headerlink" title="4.Math类"></a>4.Math类</h2><p>Math类包含用于执行基本数学运算的方法，如初等指数、对数、平方根和三角函数。</p>
<p><strong>常用方法：</strong></p>
<p>1） abs 绝对值</p>
<p>2） pow 求幂</p>
<p>​		例如：Math.pow(2,4); &#x2F;&#x2F;2的四次方</p>
<p>3） ceil 向上取整</p>
<p>​		例如：Math.ceil(3.1); &#x2F;&#x2F;返回4</p>
<p>​					Math.ceil(-3.1); &#x2F;&#x2F;返回3</p>
<p>4） floor 向下取整</p>
<p>5） round 四舍五入</p>
<p>6） sqrt 求开方</p>
<p>7） random 求随机数</p>
<p> ／&#x2F;思考:<br>请写出获取a-b之间的一个随机整数，a，b均为整数？2-7</p>
<p>​		例如：(int)Math.random()<em>6 &#x2F;&#x2F;返回的是 0&lt;&#x3D; x &lt; 6<br>$$<br>(int)(a+Math.random()</em>(b-a+1))<br>$$<br>8）max 求两个数的最大值</p>
<p>9） min 求两个数的最小值</p>
<h2 id="5-Arrays类"><a href="#5-Arrays类" class="headerlink" title="5.Arrays类"></a>5.Arrays类</h2><p>Arrays包含一系列静态方法，用于管理或操作数组（比如排序和搜索）</p>
<p><strong>1） toString 返回数组的字符串形式</strong></p>
<p>Arrays.toString(arr)</p>
<p><strong>2） sort 排序（自然排序和定制排序）</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">Integer arr[] = &#123;<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">0</span>, <span class="hljs-number">89</span>&#125;;<br><br>Arrays.sort(arr);<br></code></pre></td></tr></table></figure>

<p>因为数组是引用类型，所以通过sort排序后，会直接影响到实参arr</p>
<p>sort是重载的，也可以通过传入一个接口Comparator实现定制排序。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//调用 定制排序 时，传入两个参数（1）排序的数组arr</span><br>Arrays.sort(T[],Comparator&lt;? <span class="hljs-built_in">super</span> T&gt; c);<br></code></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">20</span>&#125;;<br></code></pre></td></tr></table></figure>

<p>普通方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//使用冒泡完成排序</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bubble01</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr)</span>&#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length - <span class="hljs-number">1</span>; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; arr.length - <span class="hljs-number">1</span>; j++) &#123;<br>            <span class="hljs-comment">//从小到大</span><br>            <span class="hljs-keyword">if</span> (arr[j] &gt; arr[j+<span class="hljs-number">1</span>])&#123;<br>                temp = arr[j];<br>                arr[j] = arr[j + <span class="hljs-number">1</span>];<br>                arr[j + <span class="hljs-number">1</span>] = temp;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>冒泡+定制（Comparator）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//结合冒泡 + 定制</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bubble02</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr,Comparator c)</span>&#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length - <span class="hljs-number">1</span>; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; arr.length - <span class="hljs-number">1</span>; j++) &#123;<br>            <span class="hljs-comment">//从小到大</span><br>            <span class="hljs-keyword">if</span> (c.compare(arr[j],arr[j+<span class="hljs-number">1</span>])&gt;<span class="hljs-number">0</span>)&#123;<br>                temp = arr[j];<br>                arr[j] = arr[j + <span class="hljs-number">1</span>];<br>                arr[j + <span class="hljs-number">1</span>] = temp;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>





<p><strong>Arrays.sort的内部代码:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">sort</span><span class="hljs-params">(T[] a, Comparator&lt;? <span class="hljs-built_in">super</span> T&gt; c)</span> &#123;<br>    <span class="hljs-keyword">if</span> (c == <span class="hljs-literal">null</span>) &#123;<br>        sort(a);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">if</span> (LegacyMergeSort.userRequested)<br>            legacyMergeSort(a, c);<br>        <span class="hljs-keyword">else</span><br>            TimSort.sort(a, <span class="hljs-number">0</span>, a.length, c, <span class="hljs-literal">null</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>使用了LegacyMergeSort算法进行排序。</p>
<p><strong>3）binarySearch 通过二分搜索法进行查找，要求必须排好序</strong></p>
<p>Arrays.binarySearch(arr, key); </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">Integer[] arr = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">90</span>,<span class="hljs-number">123</span>,<span class="hljs-number">567</span>&#125;;<br><span class="hljs-comment">//binarySearch 通过二分搜索法进行查找，要求必须排好</span><br><span class="hljs-comment">//1.使用binarySearch二叉查找</span><br><span class="hljs-comment">//2.要求该数组是有序的，如果该数组是无序的，不能使用binarySearch</span><br><span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> Arrays.binarySearch(arr,<span class="hljs-number">123</span>);<br>System.out.println(<span class="hljs-string">&quot;index=&quot;</span>+index);<br></code></pre></td></tr></table></figure>

<p>1.使用binarySearch二叉查找<br>2.要求该数组是有序的，如果该数组是无序的，不能使用binarySearch<br>3.如果数组中不存在该元素，就返回-1</p>
<p><strong>4） copyOf 数组元素的复制</strong><br>Integer[] newArr &#x3D; Arrays.copyOf(arr, arr.length); </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//copyOf 数组元素的复制</span><br><span class="hljs-comment">//1.如果拷贝的长度 &gt; arr.length 就在新数组的后面，增加null</span><br><span class="hljs-comment">//2.如果拷贝长度 &lt; 0,就返回议程NegativeArraySizeException</span><br><span class="hljs-comment">//3.该方法的底层使用的是 System.arraycopy()</span><br>Integer[] newArr = Arrays.copyOf(arr, arr.length+<span class="hljs-number">1</span>);<br>System.out.println(<span class="hljs-string">&quot;拷贝如下：\n&quot;</span>+Arrays.toString(newArr));<br><span class="hljs-comment">//拷贝如下：</span><br><span class="hljs-comment">//[1, 2, 90, 123, 567, null]</span><br></code></pre></td></tr></table></figure>



<p><strong>5）fill 数组元素的填充</strong><br>Arrays.fill(num, 99);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Integer[] num = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[]&#123;<span class="hljs-number">9</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>&#125;;<br>Arrays.fill(num,<span class="hljs-number">99</span>); <span class="hljs-comment">//使用99去填充num数组，可以理解成是替换原理的元素</span><br>System.out.println(<span class="hljs-string">&quot;num数组填充后：&quot;</span>+Arrays.toString(num));<br><br><span class="hljs-comment">//num数组填充后：[99, 99, 99]</span><br></code></pre></td></tr></table></figure>



<p><strong>6） equals 比较两个数组元素内容是否完全一致</strong></p>
<p>boolean equals &#x3D; Arrays.equals(arr, arr2);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Integer[] arr1 = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">90</span>,<span class="hljs-number">123</span>,<span class="hljs-number">567</span>&#125;;<br>Integer[] arr2 = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">90</span>,<span class="hljs-number">123</span>,<span class="hljs-number">567</span>&#125;;<br><span class="hljs-type">boolean</span> <span class="hljs-variable">equals</span> <span class="hljs-operator">=</span> Arrays.equals(arr1,arr2);<br>System.out.println(equals);<br><span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure>

<p>相同返回true，不相同返回false。</p>
<p><strong>7） asList 将一组值，转换成list</strong><br>List<Integer> asList &#x3D; Arrays.asList(2,3,4,5,6,1); System.out.println(“asList&#x3D;” + asList);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">List</span> <span class="hljs-variable">asList</span> <span class="hljs-operator">=</span> Arrays.asList(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">1</span>);<br>System.out.println(<span class="hljs-string">&quot;asList=&quot;</span> + asList);<br></code></pre></td></tr></table></figure>



<h3 id="Arrays类课堂练习"><a href="#Arrays类课堂练习" class="headerlink" title="Arrays类课堂练习"></a>Arrays类课堂练习</h3><p>案例：自定义Book类，里面包含name和price，按price排序（从小到大）。要求使用两种方式排序，对对象的某个属性排序，有一个Book［］ books ＝ 5本书对象．<br>使用前面学习过的传递实现Comparator接口匿名内部类，也称为定制排序。</p>
<blockquote>
<p>Book[] books &#x3D; new Book[4];</p>
<p>books［0］ ＝ new Book（＂红楼梦～＂， 100）；</p>
<p>books［1］ ＝ new Book（＂金瓶梅～＂， 90）；</p>
<p>books［2］ ＝ new Book（＂青年文摘～＂， 5）；</p>
<p>books［3］ ＝ new Book（＂java从入门到放弃～＂， 300）；</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayExercise</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        Book[] books = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>[<span class="hljs-number">4</span>];<br>        books[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;红楼梦&quot;</span>,<span class="hljs-number">100</span>);<br>        books[<span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;金瓶梅&quot;</span>,<span class="hljs-number">90</span>);<br>        books[<span class="hljs-number">2</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;青年文摘&quot;</span>,<span class="hljs-number">5</span>);<br>        books[<span class="hljs-number">3</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;java从入门到放弃&quot;</span>,<span class="hljs-number">300</span>);<br><br>        Arrays.sort(books, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-comment">//这里是对Book数组排序，因此o1和o2就是book对象</span><br>            <span class="hljs-comment">//按price排序（从小到大）</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book1</span> <span class="hljs-operator">=</span> (Book) o1;<br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book2</span> <span class="hljs-operator">=</span> (Book) o2;<br>                <span class="hljs-type">double</span> <span class="hljs-variable">priceVal</span> <span class="hljs-operator">=</span> book2.getPrice() - book1.getPrice();<br>                <span class="hljs-keyword">if</span> (priceVal &gt; <span class="hljs-number">0</span>)&#123;<br>                    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>; <span class="hljs-comment">//负数即可</span><br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (priceVal &lt;<span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <br>                &#125; <span class="hljs-keyword">else</span>&#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>                &#125;<br>            &#125;<br>        &#125;);<br>        <span class="hljs-comment">//  输出</span><br>        System.out.println(Arrays.toString(books));<br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> price;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Book</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> price;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">int</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Book&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, price=&quot;</span> + price +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>[Book{name&#x3D;’青年文摘’, price&#x3D;5}, </p>
<p>Book{name&#x3D;’金瓶梅’, price&#x3D;90}, </p>
<p>Book{name&#x3D;’红楼梦’, price&#x3D;100}, </p>
<p>Book{name&#x3D;’java从入门到放弃’, price&#x3D;300}]</p>
<p>按照书名长度排序（长到短）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>    <span class="hljs-type">Book</span> <span class="hljs-variable">book1</span> <span class="hljs-operator">=</span> (Book) o1;<br>    <span class="hljs-type">Book</span> <span class="hljs-variable">book2</span> <span class="hljs-operator">=</span> (Book) o2;<br>    <span class="hljs-keyword">return</span> book2.getName().length() - book1.getName().length();<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="6-System类"><a href="#6-System类" class="headerlink" title="6.System类"></a>6.System类</h2><p><strong>1）exit 退出当前程序</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">System.exit(<span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure>

<p>exit(0)表示状态，0为正常状态。</p>
<p><strong>2）arraycopy：复制数组元素，比较适合底层调用</strong>，一般使用 <strong>Arrays.copyOf</strong>完成复制数组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">System.arraycopy(src, srcPos, dest, destPos, length);<br><span class="hljs-comment">//src：源数组</span><br><span class="hljs-comment">//srcPos: 从源数组的哪个索引开始拷贝</span><br><span class="hljs-comment">//dest:目标数组</span><br><span class="hljs-comment">//destPos：把源数组的数据拷贝到 目标数组的哪个索引</span><br><span class="hljs-comment">//length：从源数组拷贝的数组个数</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] src = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;;<br><span class="hljs-type">int</span>[] dest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">3</span>]; <span class="hljs-comment">//dest当前是&#123;0,0,0&#125;</span><br>System.arraycopy(src,<span class="hljs-number">0</span>,dest,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>);<br>System.out.println(<span class="hljs-string">&quot;dest=&quot;</span>+ Arrays.toString(dest));<br><span class="hljs-comment">//dest=[1, 2, 3]</span><br></code></pre></td></tr></table></figure>



<p><strong>3） currentTimeMillens：返回当前时间距离1970-1-1的毫秒数</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(System.currentTimeMillis());<br></code></pre></td></tr></table></figure>

<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20221118202731626.png" srcset="/img/loading.gif" lazyload alt="image-20221118202731626"></p>
<p><strong>4）gc：运行垃圾回收机制 System.gc()；</strong></p>
<h2 id="7-BigInteger-amp-BigDecimal类"><a href="#7-BigInteger-amp-BigDecimal类" class="headerlink" title="7.BigInteger&amp;BigDecimal类"></a>7.BigInteger&amp;BigDecimal类</h2><p>BigInteger适合保存较大的整型。</p>
<p>BigDecimal适合保存精度更高的浮点型（小数）。</p>
<p>【底层当做字符串处理】</p>
<h3 id="BigInteger"><a href="#BigInteger" class="headerlink" title="BigInteger"></a>BigInteger</h3><p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigInteger</span> <span class="hljs-variable">bigInteger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;2378888888888888888&quot;</span>);<br>System.out.println(bigInteger);<br></code></pre></td></tr></table></figure>

<p>可正常输出。</p>
<p>但加减乘除并不能直接使用运算符，需要调用对应的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigInteger</span> <span class="hljs-variable">bigInteger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;2378888888888888888&quot;</span>);<br><span class="hljs-type">BigInteger</span> <span class="hljs-variable">bigInteger2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;100&quot;</span>);<br>System.out.println(bigInteger);<br><span class="hljs-type">BigInteger</span> <span class="hljs-variable">add</span> <span class="hljs-operator">=</span> bigInteger.add(bigInteger2); <span class="hljs-comment">//相加</span><br>System.out.println(add);<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>2378888888888888888<br>2378888888888888988</p>
<p>有加减乘除四个方法，add、subtract、multiply、divide。</p>
<h3 id="BigDecimal"><a href="#BigDecimal" class="headerlink" title="BigDecimal"></a>BigDecimal</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;1999.111111111111111111111111&quot;</span>);<br><span class="hljs-type">BigDecimal</span> <span class="hljs-variable">bigDecimal2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">&quot;1.1&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>BigDecimal的加减乘除也需要调用方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(bigDecimal.add(bigDecimal2));<br>System.out.println(bigDecimal.subtract(bigDecimal2));<br>System.out.println(bigDecimal.multiply(bigDecimal2));<br>System.out.println(bigDecimal.divide(bigDecimal2)); <span class="hljs-comment">//可能会抛出异常</span><br></code></pre></td></tr></table></figure>

<p>divide可能会抛出异常（无法除尽时），可以加上精度，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(bigDecimal.divide(bigDecimal2, BigDecimal.ROUND_CEILING)); <br></code></pre></td></tr></table></figure>



<h2 id="8-Date（了解）"><a href="#8-Date（了解）" class="headerlink" title="8.Date（了解）"></a>8.Date（了解）</h2><h3 id="第一代日期类——Date"><a href="#第一代日期类——Date" class="headerlink" title="第一代日期类——Date"></a>第一代日期类——Date</h3><ol>
<li><p>Date:精确到毫秒，代表特定的时间</p>
</li>
<li><p>SimpleDateFormat：格式和解析日期的具体类。</p>
<p>它允许格式化（日期-&gt;文本）、解析（文本-&gt;日期）和规范化</p>
<p>具体格式：</p>
</li>
</ol>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/%E6%88%AA%E5%B1%8F2023-02-26%20%E4%B8%8B%E5%8D%885.21.50.png" srcset="/img/loading.gif" lazyload alt="截屏2023-02-26 下午5.21.50"></p>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(); <span class="hljs-comment">//获取当前系统时间</span><br>System.out.println(date);<br><span class="hljs-comment">//默认输出的是国外的方式，通常需要转换格式</span><br><span class="hljs-comment">//通过SimpleDateFormat对象，可以制定相应格式</span><br><span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy年MM月dd日 hh:mm:ss E&quot;</span>);<br><span class="hljs-type">String</span> <span class="hljs-variable">format</span> <span class="hljs-operator">=</span> sdf.format(date);<br>System.out.println(format);<br><br><span class="hljs-comment">//通过制定毫秒数获取时间</span><br><span class="hljs-type">Date</span> <span class="hljs-variable">date1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-number">9234567</span>);<br>System.out.println(date1);<br><br><span class="hljs-comment">//可以把一个格式化的String 转成对应的Date</span><br><span class="hljs-comment">//得到的Date仍然是国外格式，如果希望制定格式，需要转换</span><br><span class="hljs-comment">//当String - &gt; Date时，sdf的格式需要跟给的String格式相同</span><br><span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2023年02月26日 05:24:30 星期日&quot;</span>;<br><span class="hljs-type">Date</span> <span class="hljs-variable">parse</span> <span class="hljs-operator">=</span> sdf.parse(s);<br>System.out.println(parse);<br>System.out.println(sdf.format(parse));<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226173136070.png" srcset="/img/loading.gif" lazyload alt="image-20230226173136070" style="zoom:50%;" />

<h3 id="第二代日期类——Calendar"><a href="#第二代日期类——Calendar" class="headerlink" title="第二代日期类——Calendar"></a>第二代日期类——Calendar</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calendar</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span>, Cloneable, Comparable&lt;Calendar&gt; <br></code></pre></td></tr></table></figure>

<p>Calendar 类是一个抽象类，它为特定瞬间与一组诸如 YEAR、MONTH、 DAY ＿OF＿MONTH、HOUR等<strong>日历字段</strong>之间的转换提供了一些方法，并为操作日历字段（例如获得下星期的日期）提供了一些方法。</p>
<ul>
<li>Calendar是一个抽象类，构造器时private。可以通过getInstance()来获取实例。</li>
<li>Calendar提供了大量的方法和字段供给使用。</li>
<li>Calendar没有专门的格式化方法，需要程序员自己组合</li>
<li>默认12小时制，若要24小时制获取时间，Calendar.HOUR改成Calendar.HOUR_OF_DAY</li>
</ul>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Calendar</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> Calendar.getInstance(); <span class="hljs-comment">//因为私有，无法直接new</span><br>System.out.println(c);<br>System.out.println(<span class="hljs-string">&quot;年：&quot;</span> + c.get(Calendar.YEAR));<br><span class="hljs-comment">//这里的月份，默认从0开始</span><br>System.out.println(<span class="hljs-string">&quot;月：&quot;</span> + (c.get(Calendar.MONTH)+<span class="hljs-number">1</span>)); <br>System.out.println(<span class="hljs-string">&quot;日：&quot;</span> + c.get(Calendar.DAY_OF_MONTH));<br>System.out.println(<span class="hljs-string">&quot;小时：&quot;</span> + c.get(Calendar.HOUR));<br>System.out.println(<span class="hljs-string">&quot;分钟：&quot;</span> + c.get(Calendar.MINUTE));<br>System.out.println(<span class="hljs-string">&quot;秒：&quot;</span>+ c.get(Calendar.SECOND));<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>java.util.GregorianCalendar[time&#x3D;1677405632967,areFieldsSet&#x3D;true,areAllFieldsSet&#x3D;true,lenient&#x3D;true,zone&#x3D;sun.util.calendar.ZoneInfo[id&#x3D;”Asia&#x2F;Shanghai”,offset&#x3D;28800000,dstSavings&#x3D;0,useDaylight&#x3D;false,transitions&#x3D;29,lastRule&#x3D;null],firstDayOfWeek&#x3D;1,minimalDaysInFirstWeek&#x3D;1,ERA&#x3D;1,YEAR&#x3D;2023,MONTH&#x3D;1,WEEK_OF_YEAR&#x3D;9,WEEK_OF_MONTH&#x3D;5,DAY_OF_MONTH&#x3D;26,DAY_OF_YEAR&#x3D;57,DAY_OF_WEEK&#x3D;1,DAY_OF_WEEK_IN_MONTH&#x3D;4,AM_PM&#x3D;1,HOUR&#x3D;6,HOUR_OF_DAY&#x3D;18,MINUTE&#x3D;0,SECOND&#x3D;32,MILLISECOND&#x3D;967,ZONE_OFFSET&#x3D;28800000,DST_OFFSET&#x3D;0]<br>年：2023<br>月：2<br>日：26<br>小时：6<br>分钟：0<br>秒：32</p>
<h3 id="第三代日期类——JDK8后"><a href="#第三代日期类——JDK8后" class="headerlink" title="第三代日期类——JDK8后"></a>第三代日期类——JDK8后</h3><p><strong>前面两代日期类的不足分析</strong>：<br>JDK 1.0中包含了一个java.util.Date类，但是它的大多数方法已经在JDK 1.1引入Calendar类之后被弃用了。而Calendar也存在问题是：<br>1）可变性：像日期和时间这样的类应该是不可变的。<br>2）偏移性：Date中的年份是从1900开始的，而月份都从0开始。<br>3）格式化：格式化只对Date有用，Calendar则不行。<br>4）此外，它们也不是线程安全的；不能处理闰秒等（每隔2天，多出1s）。</p>
<h4 id="第三代日期类常见方法："><a href="#第三代日期类常见方法：" class="headerlink" title="第三代日期类常见方法："></a><strong>第三代日期类常见方法：</strong></h4><ol>
<li>LocalDate（日期&#x2F;年月日）</li>
<li>LocalTime（时间&#x2F;时分秒）</li>
<li>LocalDateTime（日期时间&#x2F;年月日时分秒）</li>
</ol>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226182417321.png" srcset="/img/loading.gif" lazyload alt="image-20230226182417321" style="zoom:50%;" />

<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">ldt</span> <span class="hljs-operator">=</span> LocalDateTime.now();<br>System.out.println(ldt);<br>System.out.println(<span class="hljs-string">&quot;年=&quot;</span>+ldt.getYear());<br>System.out.println(<span class="hljs-string">&quot;月=&quot;</span>+ldt.getMonth());<br>System.out.println(<span class="hljs-string">&quot;月=&quot;</span>+ldt.getMonthValue());<br>System.out.println(<span class="hljs-string">&quot;日=&quot;</span>+ldt.getDayOfMonth());<br>System.out.println(<span class="hljs-string">&quot;时=&quot;</span>+ldt.getHour());<br>System.out.println(<span class="hljs-string">&quot;分=&quot;</span>+ldt.getMinute());<br>System.out.println(<span class="hljs-string">&quot;秒=&quot;</span>+ldt.getSecond());<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>2023-02-26T18:29:11.520<br>年&#x3D;2023<br>月&#x3D;FEBRUARY<br>月&#x3D;2<br>日&#x3D;26<br>时&#x3D;18<br>分&#x3D;29<br>秒&#x3D;11</p>
<p>如果只要获取年月日，使用LocalDate</p>
<p>如果只要时间，使用LocalTime</p>
<h4 id="DateTimeFormatter格式化"><a href="#DateTimeFormatter格式化" class="headerlink" title="DateTimeFormatter格式化"></a>DateTimeFormatter格式化</h4><p>详细参数可参考jdk8文档。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//创建DateTimeFormatter对象</span><br><span class="hljs-type">DateTimeFormatter</span> <span class="hljs-variable">dateTimeFormatter</span> <span class="hljs-operator">=</span> DateTimeFormatter.ofPattern(<span class="hljs-string">&quot;yyyy年MM月dd日 HH:mm:ss&quot;</span>);<br><span class="hljs-type">String</span> <span class="hljs-variable">format</span> <span class="hljs-operator">=</span> dateTimeFormatter.format(ldt);<br>System.out.println(<span class="hljs-string">&quot;格式化的日期=&quot;</span> + format);<br></code></pre></td></tr></table></figure>

<p>输出：格式化的日期&#x3D;2023年02月26日 18:37:16</p>
<h4 id="Instance时间戳"><a href="#Instance时间戳" class="headerlink" title="Instance时间戳"></a>Instance时间戳</h4><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226183944829.png" srcset="/img/loading.gif" lazyload alt="image-20230226183944829" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1.通过静态方法now（）获取，表示当前时间戳的对象</span><br><span class="hljs-type">Instant</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> Instant.now();<br>System.out.println(now);<br><span class="hljs-comment">//2.通过from可以把Instance 转成Date</span><br><span class="hljs-type">Date</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> Date.from(now);<br><span class="hljs-comment">//3.通过date的toInstant（）可以把date转成Instance</span><br><span class="hljs-type">Instant</span> <span class="hljs-variable">instant</span> <span class="hljs-operator">=</span> date.toInstant();<br></code></pre></td></tr></table></figure>



<h4 id="第三代日期类更多方法"><a href="#第三代日期类更多方法" class="headerlink" title="第三代日期类更多方法"></a>第三代日期类更多方法</h4><ul>
<li><p>LocalDateTime类</p>
</li>
<li><p>MonthDay类：检查重复事件</p>
</li>
<li><p>是否是闰年</p>
</li>
<li><p>增加日期的某个部分</p>
</li>
<li><p>使用plus方法测试增加时间的某个部分</p>
<p>例如：xxx.plusDays(100);</p>
</li>
<li><p>使用minus方法测试查看一年前和一年后的日期</p>
<p>例如：xxx.minusMinutes(3456); 3456分钟前的时间</p>
</li>
</ul>
<h2 id="本章作业-1"><a href="#本章作业-1" class="headerlink" title="本章作业"></a>本章作业</h2><h3 id="题目1-4"><a href="#题目1-4" class="headerlink" title="题目1"></a>题目1</h3><blockquote>
<p>（1） 将字符串中指定部分进行反转。比如将＂a<strong>bcde</strong>f＂反转为＂a<strong>edcb</strong>f＂<br>（2） 编写方法 public static String reverse（String str， int start， int end） 搞定</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">//思路</span><br>    <span class="hljs-comment">//String 转成char[]，因为char[]的元素可以变更。</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;abcdef&quot;</span>;<br>    System.out.println(<span class="hljs-string">&quot;===交换前===&quot;</span>);<br>    System.out.println(str);<br>    <span class="hljs-comment">//检验try-catch</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        str = reverse(str,<span class="hljs-number">1</span>,<span class="hljs-number">5</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>        System.out.println(e.getMessage());<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;===交换后===&quot;</span>);<br>    System.out.println(str);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">reverse</span><span class="hljs-params">(String str,<span class="hljs-type">int</span> start,<span class="hljs-type">int</span> end)</span>&#123;<br>    <span class="hljs-comment">//对输入对参数做一个验证</span><br>    <span class="hljs-keyword">if</span>(!(str !=<span class="hljs-literal">null</span> &amp;&amp; start&gt;=<span class="hljs-number">0</span> &amp;&amp; end &gt; start &amp;&amp; end&lt; str.length()))&#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;参数不正确&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-type">char</span>[] chars = str.toCharArray();<br>    <span class="hljs-type">char</span> tmp;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> start,j=end-<span class="hljs-number">1</span>; i &lt; j; i++,j--) &#123;<br>        tmp = chars[i];<br>        chars[i] = chars[j];<br>        chars[j] = tmp;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(chars);<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="题目2-5"><a href="#题目2-5" class="headerlink" title="题目2"></a>题目2</h3><blockquote>
<p>输入用户名、密码、邮箱，如果信息录入正确，则提示注册成功，否则生成异常对象要求：<br>（1）用户名长度为2或3或4<br>（2）密码的长度为6，要求全是数字<br>（3）邮箱中包含＠和.并且@在.的前面 isDigital</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java">  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">// 输入用户名、密码、邮箱，如果信息录入正确，则提示注册成功，否则生成异常对象要求：</span><br><span class="hljs-comment">//（1）用户名长度为2或3或4</span><br><span class="hljs-comment">//（2）密码的长度为6，要求全是数字 isDigital</span><br><span class="hljs-comment">//（3）邮箱中包含＠和.并且@在.的前面</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">pwd</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123456&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">email</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jack123@sou.hucom&quot;</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            userRegister(name,pwd,email);<br>            System.out.println(<span class="hljs-string">&quot;注册成功！&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(e.getMessage());<br>        &#125;<br><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">userRegister</span><span class="hljs-params">(String name,String pwd,String email)</span>&#123;<br>        <span class="hljs-comment">//新增一些校验</span><br>        <span class="hljs-keyword">if</span> (!(name != <span class="hljs-literal">null</span>&amp;&amp;pwd!=<span class="hljs-literal">null</span>&amp;&amp;email!=<span class="hljs-literal">null</span>))&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;参数不能为空。&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//name</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">ussrLength</span> <span class="hljs-operator">=</span> name.length();<br>        <span class="hljs-keyword">if</span>(!(name.length()&lt;=<span class="hljs-number">4</span>&amp;&amp;name.length()&gt;=<span class="hljs-number">2</span>))&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;用户名长度为2或3或4&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//pwd</span><br>        <span class="hljs-comment">//单独写个方法，判断是否为数字</span><br>        <span class="hljs-keyword">if</span>(!(pwd.length()==<span class="hljs-number">6</span>&amp;&amp;isDigital(pwd)))&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;密码的长度为6，要求全是数字&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//email</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> email.indexOf(<span class="hljs-string">&#x27;@&#x27;</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> email.indexOf(<span class="hljs-string">&#x27;.&#x27;</span>);<br>        <span class="hljs-keyword">if</span>(!(i&gt;<span class="hljs-number">0</span>&amp;&amp;j&gt;i))&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;邮箱中包含＠和.并且@在.的前面&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDigital</span><span class="hljs-params">(String str)</span>&#123;<br>        <span class="hljs-type">char</span>[] chars = str.toCharArray();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; chars.length; i++) &#123;<br>            <span class="hljs-keyword">if</span> (chars[i] &lt; <span class="hljs-string">&#x27;0&#x27;</span> || chars[i] &gt;<span class="hljs-string">&#x27;9&#x27;</span>)&#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br></code></pre></td></tr></table></figure>



<h3 id="题目3-3"><a href="#题目3-3" class="headerlink" title="题目3"></a>题目3</h3><blockquote>
<p>（1） 编写java程序，输入形式为： Han Shun Ping的人名，以Ping，Han.S的形式打印<br>出来 。其中.S是中间单词的首字母。<br>（2） 例如输入“Willian Jefferson Clinton”，输出形式为：Clinton，Willian ．J</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//    （1） 编写java程序，输入形式为： Han Shun Ping的人名，以Ping,Han.S的形式打印</span><br><span class="hljs-comment">//    出来 。其中.S是中间单词的首字母。</span><br><span class="hljs-comment">//    （2） 例如输入“Willian Jefferson Clinton”，输出形式为：Clinton,Willian.J</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Han Shun Ping&quot;</span>;<br>        printname(name);<br>    &#125;<br>    <span class="hljs-comment">//思路</span><br>    <span class="hljs-comment">//空格分割 split</span><br>    <span class="hljs-comment">//对得到的String[] 格式化</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printname</span><span class="hljs-params">(String str)</span>&#123;<br>        <span class="hljs-keyword">if</span>(str == <span class="hljs-literal">null</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;str 不能为空&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        String[] names = str.split(<span class="hljs-string">&quot; &quot;</span>);<br>        <span class="hljs-keyword">if</span> (names.length !=<span class="hljs-number">3</span> )&#123;<br>            System.out.println(<span class="hljs-string">&quot;输入的字符串格式不对&quot;</span>);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">format</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">&quot;%s,%s .%c&quot;</span>, names[<span class="hljs-number">2</span>], names[<span class="hljs-number">0</span>], names[<span class="hljs-number">1</span>].toUpperCase().charAt(<span class="hljs-number">0</span>));<br>        System.out.println(format);<br>    &#125;<br></code></pre></td></tr></table></figure>

<h3 id="题目4-2"><a href="#题目4-2" class="headerlink" title="题目4"></a>题目4</h3><blockquote>
<p>输入字符串，判断里面有多少个大写字母，多少个小写字母，多少个数字</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">//输入字符串，判断里面有多少个大写字母，多少个小写字母，多少个数字</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;adwd 123 ASDQS&quot;</span>;<br>    count(a);<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">count</span><span class="hljs-params">(String str)</span>&#123;<br>    <span class="hljs-type">char</span>[] chars = str.toCharArray();<br>    <span class="hljs-type">int</span> <span class="hljs-variable">up_num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">low_num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">digital_num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; chars.length; i++) &#123;<br>        <span class="hljs-comment">//数字</span><br>        <span class="hljs-keyword">if</span> (chars[i]&gt;=<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp;chars[i]&lt;=<span class="hljs-string">&#x27;9&#x27;</span>)&#123;<br>            digital_num++;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (chars[i]&gt;=<span class="hljs-string">&#x27;a&#x27;</span>&amp;&amp;chars[i]&lt;=<span class="hljs-string">&#x27;z&#x27;</span>)&#123;<br>            low_num++;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (chars[i]&gt;=<span class="hljs-string">&#x27;A&#x27;</span>&amp;&amp;chars[i]&lt;=<span class="hljs-string">&#x27;Z&#x27;</span>)&#123;<br>            up_num++;<br>        &#125;<br>    &#125;<br>    System.out.println(<span class="hljs-string">&quot;数字个数=&quot;</span>+digital_num+<span class="hljs-string">&quot;;小写字母个数=&quot;</span>+low_num+<span class="hljs-string">&quot;;大写字母个数=&quot;</span>+up_num);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="题目5"><a href="#题目5" class="headerlink" title="题目5"></a>题目5</h3><blockquote>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226230214790.png" srcset="/img/loading.gif" lazyload alt="image-20230226230214790" style="zoom:50%;" />

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226230227432.png" srcset="/img/loading.gif" lazyload alt="image-20230226230227432" style="zoom:50%;" />
</blockquote>
<p>false、false、true。</p>
<p>false、false、true。</p>
<p>分析：</p>
<p>a和b是两个对象，指向堆中的两个地址，所以false。</p>
<p>a.name 和 b.name都指向常量池的同一地址，所以true。</p>
<p>s1、s4指向的是不同堆，s5直接指向常亮池，所以false。</p>
<p>String加东西是重新开辟了一个空间，所以t1指向堆中的新value，value指向常量池的新地址。t2直接指向常量池地址。</p>
<p>intern表示value指向堆地址，所以t1.intern()&#x3D;&#x3D;t2是ture。</p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230226231154729.png" srcset="/img/loading.gif" lazyload alt="image-20230226231154729"></p>
<h1 id="章节十四-集合"><a href="#章节十四-集合" class="headerlink" title="章节十四 集合"></a>章节十四 集合</h1><h2 id="1-引入集合"><a href="#1-引入集合" class="headerlink" title="1.引入集合"></a>1.引入集合</h2><p>之前学习的保存多个数据使用的都是数组。但数组也有许多不足。</p>
<p>1）长度开始时必须指定，而且一旦指定，不能更改</p>
<p>2）保存的必须为同一类型的元素</p>
<p>3）使用数组进行增加&#x2F;删除元素的示意代码－比较麻烦</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227132801592.png" srcset="/img/loading.gif" lazyload alt="image-20230227132801592" style="zoom:50%;" />



<h3 id="集合的特点"><a href="#集合的特点" class="headerlink" title="集合的特点"></a><strong>集合的特点</strong></h3><ol>
<li>可以<strong>动态保存</strong>任意多个对象，使用比较方便</li>
<li><strong>提供了一系列方便</strong>的操作对象的<strong>方法</strong>：add、remove、set、get等</li>
<li>使用集合添加、删除新元素的代码更简洁</li>
</ol>
<h3 id="集合的框架体系"><a href="#集合的框架体系" class="headerlink" title="集合的框架体系"></a>集合的框架体系</h3><p>集合主要分为单列集合（Collection）和双列（Map）集合。</p>
<p>Collection接口有两个重要的子接口 List Set，他们的实现子类都是单列集合。</p>
<p>Map接口的实现子类 是双列集合，存放的K-V。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//单列</span><br><span class="hljs-type">ArrayList</span> <span class="hljs-variable">arrayList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>arrayList.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>arrayList.add(<span class="hljs-string">&quot;tom&quot;</span>);<br><span class="hljs-comment">//双列</span><br><span class="hljs-type">HashMap</span> <span class="hljs-variable">hashMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>hashMap.put(<span class="hljs-string">&quot;No1&quot;</span>,<span class="hljs-string">&quot;北京&quot;</span>);<br>hashMap.put(<span class="hljs-string">&quot;No2&quot;</span>,<span class="hljs-string">&quot;上海&quot;</span>);<br></code></pre></td></tr></table></figure>

<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227180456118.png" srcset="/img/loading.gif" lazyload alt="image-20230227180456118"></p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227180716337.png" srcset="/img/loading.gif" lazyload alt="image-20230227180716337"></p>
<h2 id="2-Collection接口"><a href="#2-Collection接口" class="headerlink" title="2.Collection接口"></a>2.Collection接口</h2><p><strong>collection接口实现类的特点</strong></p>
<p><code>public interface Collection&lt;E&gt; extends Iterable&lt;E&gt;</code></p>
<p>1）collection实现子类可以存放多个元素，每个元素可以是Object</p>
<p>2）有些Collection的实现类，可以存放重复的元素，有些不可以</p>
<p>3）有些Collection的实现类，有些是有序的（List），有些不是有序（Set）</p>
<p>4）Collection接口没有直接的实现子类，是通过它的子接口Set和List来实现的</p>
<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><ul>
<li><p>add:添加单个元素</p>
</li>
<li><p>remove:删除指定元素</p>
</li>
<li><p>contains:查找元素是否存在</p>
</li>
<li><p>size:获取元素个数</p>
</li>
<li><p>isEmpty:判断是否为空</p>
</li>
<li><p>clear:清空</p>
</li>
<li><p>addAlL:添加多个元素</p>
</li>
<li><p>containsAlL:查找多个元素是否都存在</p>
</li>
<li><p>removeAlL:删除多个元素</p>
<p>说明:以ArrayList实现类来演示，因为接口无法实例化。</p>
</li>
</ul>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br><span class="hljs-comment">//        add:添加单个元素</span><br>        list.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list.add(<span class="hljs-number">10</span>);<br>        list.add(<span class="hljs-literal">true</span>);<br>        list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        remove:删除指定元素</span><br>        list.remove(<span class="hljs-number">3</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br>        list.remove(<span class="hljs-literal">true</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        contains:查找元素是否存在</span><br>        System.out.println(list.contains(<span class="hljs-string">&quot;jack&quot;</span>));<br>        System.out.println(list.contains(<span class="hljs-literal">true</span>));<br><span class="hljs-comment">//        size:获取元素个数</span><br>        System.out.println(list.size()); <span class="hljs-comment">//2</span><br><span class="hljs-comment">//        isEmpty:判断是否为空</span><br>        System.out.println(list.isEmpty());<br><span class="hljs-comment">//        clear:清空</span><br>        list.clear();<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        addAlL:添加多个元素</span><br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">list2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list2.add(<span class="hljs-string">&quot;红楼梦&quot;</span>);<br>        list2.add(<span class="hljs-string">&quot;三国演义&quot;</span>);<br>        list.addAll(list2);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br><span class="hljs-comment">//        containsAlL:查找多个元素是否都存在</span><br>        System.out.println(list.containsAll(list2));<br><span class="hljs-comment">//        removeAlL:删除多个元素</span><br>        list.add(<span class="hljs-string">&quot;聊斋&quot;</span>);<br>        list.removeAll(list2);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span> + list);<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>输出：<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227184822789.png" srcset="/img/loading.gif" lazyload alt="image-20230227184822789" style="zoom:50%;" /></p>
<h3 id="遍历元素方法1-Iterator"><a href="#遍历元素方法1-Iterator" class="headerlink" title="遍历元素方法1 - Iterator"></a>遍历元素方法1 - Iterator</h3><ol>
<li>Iterator对象称为<strong>迭代器</strong>，主要用于遍历 Collection 集合中的元素。</li>
<li>所有实现了Collection接口的集合类都有一个iterator（）方法，用以返回一个实现了Iterator接口的对象，即可以返回一个迭代器。</li>
<li>Iterator 的结构(下图)</li>
<li>Iterator 仅用于遍历集合，Iterator 本身并不存放对象。</li>
</ol>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227185338539.png" srcset="/img/loading.gif" lazyload alt="image-20230227185338539" style="zoom:50%;" />

<p><strong>Iterator接口的方法：</strong></p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227185538723.png" srcset="/img/loading.gif" lazyload alt="image-20230227185538723" style="zoom:50%;" />

<p>在调用iterator.next()方法之前必须要调用iterator.hasNext进行检测。</p>
<p>若不调用，且下一条记录无效，直接调用it.next()会抛出<strong>NoSuchElementException</strong>异常。</p>
<p>使用案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SuppressWarnings(&#123;&quot;all&quot;&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">Collection</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>    col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;三国演义&quot;</span>,<span class="hljs-string">&quot;罗贯中&quot;</span>,<span class="hljs-number">10.1</span>));<br>    col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;小李飞刀&quot;</span>,<span class="hljs-string">&quot;古龙&quot;</span>,<span class="hljs-number">5.1</span>));<br>    col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;红楼梦&quot;</span>,<span class="hljs-string">&quot;曹雪芹&quot;</span>,<span class="hljs-number">34.6</span>));<br>    <span class="hljs-comment">//现在希望能遍历集合</span><br>    <span class="hljs-comment">//1。希望能得到col对应的迭代器</span><br>    <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> col.iterator();<br>    <span class="hljs-comment">//2.使用while循环遍历（快捷键itit）</span><br>    <span class="hljs-keyword">while</span>(iterator.hasNext())&#123;<span class="hljs-comment">//判断是否还有数据</span><br>        <span class="hljs-comment">//返回下一个元素，类型是Object</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>        System.out.println(<span class="hljs-string">&quot;obj=&quot;</span>+obj);<br>    &#125;<br>    <span class="hljs-comment">//3.当退出while循环后,这时iterator迭代器指向了最后当元素，</span><br>    <span class="hljs-comment">// 若继续iterator.next()，会报错</span><br>    <span class="hljs-comment">//4。若希望再次遍历，需要重制迭代器</span><br>    iterator = col.iterator();<br>    System.out.println(<span class="hljs-string">&quot;===第二次遍历===&quot;</span>);<br>    <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span>  iterator.next();<br>        System.out.println(<span class="hljs-string">&quot;obj=&quot;</span>+obj);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227201014255.png" srcset="/img/loading.gif" lazyload alt="image-20230227201014255" style="zoom:50%;" />

<p>注意点：遍历完后，若希望再次遍历，需要重制迭代器。</p>
<h3 id="遍历元素方法2-增强for循环"><a href="#遍历元素方法2-增强for循环" class="headerlink" title="遍历元素方法2 - 增强for循环"></a>遍历元素方法2 - 增强for循环</h3><p>增强for循环，可以代替iterator迭代器。</p>
<p>特点：增强for就是简化版的iterator本质一样。<strong>只能用于遍历集合或数组</strong>。</p>
<ul>
<li><p>基本语法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>（元素类型 元素名：集合名或数组名）｛<br>访问元素<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">Collection</span> <span class="hljs-variable">col</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>    col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;三国演义&quot;</span>, <span class="hljs-string">&quot;罗贯中&quot;</span>, <span class="hljs-number">10.1</span>));<br>    col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;小李飞刀&quot;</span>, <span class="hljs-string">&quot;古龙&quot;</span>, <span class="hljs-number">5.1</span>));<br>    col.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;红楼梦&quot;</span>, <span class="hljs-string">&quot;曹雪芹&quot;</span>, <span class="hljs-number">34.6</span>));<br>    <span class="hljs-comment">//使用增强for循环</span><br>    <span class="hljs-keyword">for</span> (Object book : col) &#123;<br>        System.out.println(<span class="hljs-string">&quot;book=&quot;</span> + book);<br>    &#125;<br>    <span class="hljs-comment">//增强for循环也可以直接在数组使用</span><br>    <span class="hljs-type">int</span>[] nums = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">10</span>,<span class="hljs-number">90</span>&#125;;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i : nums)&#123;<br>        System.out.println(<span class="hljs-string">&quot;i=&quot;</span>+i);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">book</span>=Book&#123;<span class="hljs-attribute">name</span>=<span class="hljs-string">&#x27;三国演义&#x27;</span>, <span class="hljs-attribute">author</span>=<span class="hljs-string">&#x27;罗贯中&#x27;</span>, <span class="hljs-attribute">price</span>=10.1&#125;<br><span class="hljs-attribute">book</span>=Book&#123;<span class="hljs-attribute">name</span>=<span class="hljs-string">&#x27;小李飞刀&#x27;</span>, <span class="hljs-attribute">author</span>=<span class="hljs-string">&#x27;古龙&#x27;</span>, <span class="hljs-attribute">price</span>=5.1&#125;<br><span class="hljs-attribute">book</span>=Book&#123;<span class="hljs-attribute">name</span>=<span class="hljs-string">&#x27;红楼梦&#x27;</span>, <span class="hljs-attribute">author</span>=<span class="hljs-string">&#x27;曹雪芹&#x27;</span>, <span class="hljs-attribute">price</span>=34.6&#125;<br><span class="hljs-attribute">i</span>=1<br><span class="hljs-attribute">i</span>=8<br><span class="hljs-attribute">i</span>=10<br><span class="hljs-attribute">i</span>=90<br></code></pre></td></tr></table></figure>

<p>增强for，底层仍然是迭代器，可以理解为简化版版本的 迭代器遍历</p>
<p>快捷键：I</p>
<h3 id="练习-3"><a href="#练习-3" class="headerlink" title="练习"></a>练习</h3><blockquote>
<p> 请编写程序 CollectionExercise.java<br>1.创建 3个 Dog ｛name， age｝对象，放入到 ArrayList 中，赋给List 引用<br>2.用迭代器和增强for循环两种方式来遍历<br>3.重写Dog的toString方法，输出name和age</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionExercise</span> &#123;<br>    <span class="hljs-comment">//1.创建 3个 Dog ｛name， age｝对象，放入到 ArrayList 中，赋给List 引用</span><br>    <span class="hljs-comment">//2.用迭代器和增强for循环两种方式来遍历</span><br>    <span class="hljs-comment">//3.重写Dog的toString方法，输出name和age</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;tom&quot;</span>,<span class="hljs-number">1</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;pat&quot;</span>,<span class="hljs-number">3</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-number">2</span>));<br><br>        System.out.println(<span class="hljs-string">&quot;==迭代器==&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> list.iterator();<br>        <span class="hljs-keyword">while</span>(iterator.hasNext())&#123;<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>            System.out.println(obj.toString());<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;==增强for===&quot;</span>);<br>        <span class="hljs-keyword">for</span>(Object dog : list)&#123;<br>            System.out.println(dog.toString());<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Dog&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="3-List接口"><a href="#3-List接口" class="headerlink" title="3.List接口"></a>3.List接口</h2><p>1）List集合类中元素有序（即添加顺序和取出顺序一致）、且可重复 </p>
<p>2） List集合中的每个元素都有其对应的顺序索引，即支持索引。</p>
<p>3）List容器中的元素都对应一个整数型的序号记载其在容器中的位置，可以根<br>据序号存取容器中的元素。</p>
<blockquote>
<h2 id="Interface-List"><a href="#Interface-List" class="headerlink" title="Interface List"></a>Interface List<E></h2><ul>
<li><ul>
<li><p><strong>参数类型</strong></p>
<p><code>E</code> - 此列表中元素的类型 </p>
</li>
<li><p>All Superinterfaces: </p>
<p><a href="itss://chm/java/util/Collection.html">Collection</a> <E>， <a href="itss://chm/java/lang/Iterable.html">Iterable</a> <E></p>
</li>
<li><p>所有已知实现类：</p>
<p><a href="itss://chm/java/util/AbstractList.html">AbstractList</a> ， <a href="itss://chm/java/util/AbstractSequentialList.html">AbstractSequentialList</a> ， <a href="itss://chm/java/util/ArrayList.html">ArrayList</a> ， <a href="itss://chm/javax/management/AttributeList.html">AttributeList</a> ， <a href="itss://chm/java/util/concurrent/CopyOnWriteArrayList.html">CopyOnWriteArrayList</a> ， <a href="itss://chm/java/util/LinkedList.html">LinkedList</a> ， <a href="itss://chm/javax/management/relation/RoleList.html">RoleList</a> ， <a href="itss://chm/javax/management/relation/RoleUnresolvedList.html">RoleUnresolvedList</a> ， <a href="itss://chm/java/util/Stack.html">Stack</a>， <a href="itss://chm/java/util/Vector.html">Vector</a></p>
</li>
</ul>
</li>
</ul>
</blockquote>
<p>常见的实现类有ArrayList、LinkedList和Vector，除此之外已知的实现类还有很多。</p>
<h3 id="List常用方法"><a href="#List常用方法" class="headerlink" title="List常用方法"></a>List常用方法</h3><ol>
<li>void <strong>add</strong>(int index， Object ele):在index位置<strong>插入</strong>ele元素</li>
<li>boolean <strong>addAll</strong>(int index， Collection eles):从index位置开始将eles中的所有元素<strong>添加</strong>进来</li>
<li>Object <strong>get</strong>(int index):获取<strong>指定index位置</strong>的元素</li>
<li>int <strong>indexOf</strong>(Object obj):返回obj在集合中<strong>首次出现</strong>的位置</li>
<li>int <strong>lastlndexOf</strong>(Object obj):返回obj在当前集合中<strong>末次出现</strong>的位置</li>
<li>Object <strong>remove</strong>(int index):<strong>移除</strong>指定index位置的元素，并返回此元素</li>
<li>Object <strong>set</strong>(int index， Object ele):设置指定index位置的元素为ele,相当于是替换.</li>
<li>List <strong>subList</strong>(int fromIndex，int tolndex):返回从fromIndex到tolndex位置的子集合（前开后闭）</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java">        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-string">&quot;张三丰&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;贾宝玉&quot;</span>);<br><span class="hljs-comment">//        1)void add(int index， Object ele):在index位置插入ele元素</span><br>        <span class="hljs-comment">//在index=1的位置插入</span><br>        list.add(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;韩顺平&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span>+list);<br><span class="hljs-comment">//        2)boolean addAll(int index， Collection eles):从index位置开始将eles中的所有元素添加进来</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">list2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list2.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>        list2.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>        list.addAll(<span class="hljs-number">1</span>,list2);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span>+list);<br><span class="hljs-comment">//        3)Object get(int index):获取指定index位置的元素</span><br><span class="hljs-comment">//        4)int indexOf(Object obj):返回obj在集合中首次出现的位置</span><br>        System.out.println(list.indexOf(<span class="hljs-string">&quot;tom&quot;</span>)); <span class="hljs-comment">//2</span><br><span class="hljs-comment">//        5)int lastlndexOf(Object obj):返回obj在当前集合中末次出现的位置</span><br>        list.add(<span class="hljs-string">&quot;韩顺平&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span>+list);<br>        System.out.println(list.lastIndexOf(<span class="hljs-string">&quot;韩顺平&quot;</span>));<br><span class="hljs-comment">//        6)Object remove(int index):移除指定index位置的元素，并返回此元素</span><br>        list.remove(<span class="hljs-number">0</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span>+list);<br><span class="hljs-comment">//        7)Object set(int index， Object ele):设置指定index位置的元素为ele,相当于是替换.</span><br>        list.set(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;玛丽&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;list=&quot;</span>+list);<br><span class="hljs-comment">//        8)List subList(int fromIndex，int tolndex):返回从fromIndex到tolndex位置的子集合</span><br>        <span class="hljs-comment">//前开后闭</span><br>        <span class="hljs-type">List</span> <span class="hljs-variable">returnlist</span> <span class="hljs-operator">=</span> list.subList(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);<br>        System.out.println(<span class="hljs-string">&quot;returnlist=&quot;</span>+returnlist);<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230228222455417.png" srcset="/img/loading.gif" lazyload alt="image-20230228222455417" style="zoom:50%;" />

<h4 id="练习1"><a href="#练习1" class="headerlink" title="练习1"></a>练习1</h4><blockquote>
<p>添加10个以上的元素（比如String “hello＂），</p>
<p>在2号位插入一个元素＂韩顺平教育＂，</p>
<p>获得第5个元素，删除第6个元素，修改第7个元素，</p>
<p>在使用迭代器遍历集合.</p>
<p>要求：使用List的实现类ArrayList完成。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">12</span>; i++) &#123;<br>    list.add(<span class="hljs-string">&quot;hello&quot;</span>+i);<br>&#125;<br>System.out.println(list);<br>list.add(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;韩顺平教育&quot;</span>);<br>System.out.println(list.get(<span class="hljs-number">4</span>));<br>list.remove(<span class="hljs-number">5</span>);<br>list.set(<span class="hljs-number">6</span>,<span class="hljs-string">&quot;三国演义&quot;</span>);<br><span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> list.iterator();<br><span class="hljs-keyword">while</span>(iterator.hasNext())&#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>    System.out.println(<span class="hljs-string">&quot;obj=&quot;</span>+obj);<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="list的三种遍历方式（ArrayList，LinkedList，Vector）"><a href="#list的三种遍历方式（ArrayList，LinkedList，Vector）" class="headerlink" title="list的三种遍历方式（ArrayList，LinkedList，Vector）"></a>list的三种遍历方式（ArrayList，LinkedList，Vector）</h3><ol>
<li><p>方式一：使用iterator</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> list.iterator();<br><span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>    System.out.println(obj);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>方式二：增强for</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (Object o : list) &#123;<br>    System.out.println(<span class="hljs-string">&quot;o=&quot;</span>+o);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>方式三：普通for</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; list.size(); i++) &#123;<br>    System.out.println(<span class="hljs-string">&quot;对象：&quot;</span>+list.get(i));<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="练习2"><a href="#练习2" class="headerlink" title="练习2"></a>练习2</h4><p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301112321131.png" srcset="/img/loading.gif" lazyload alt="image-20230301112321131"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;红楼梦&quot;</span>,<span class="hljs-string">&quot;曹雪芹&quot;</span>,<span class="hljs-number">100</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;西游记&quot;</span>,<span class="hljs-string">&quot;吴承恩&quot;</span>,<span class="hljs-number">10</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;施耐庵&quot;</span>,<span class="hljs-string">&quot;水浒传&quot;</span>,<span class="hljs-number">9</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;三国演义&quot;</span>,<span class="hljs-string">&quot;罗贯中&quot;</span>,<span class="hljs-number">80</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;西游记&quot;</span>,<span class="hljs-string">&quot;吴承恩&quot;</span>,<span class="hljs-number">10</span>));<br>        <span class="hljs-comment">//排序</span><br>        sort_Book(list);<br>        <span class="hljs-keyword">for</span> (Object o :list) &#123;<br>            System.out.println(o);<br>        &#125;<br><br>    &#125;<br>    <span class="hljs-comment">//静态方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sort_Book</span><span class="hljs-params">(List list)</span>&#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">list_size</span> <span class="hljs-operator">=</span> list.size();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; list_size-<span class="hljs-number">1</span>; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; list_size-<span class="hljs-number">1</span>-i; j++) &#123;<br>                <span class="hljs-comment">//取出对象Book</span><br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book1</span> <span class="hljs-operator">=</span> (Book) list.get(j);<br>                <span class="hljs-type">Book</span> <span class="hljs-variable">book2</span> <span class="hljs-operator">=</span> (Book) list.get(j+<span class="hljs-number">1</span>);<br>                <span class="hljs-keyword">if</span> (book1.getPrice()&gt;book2.getPrice())&#123;<br>                    list.set(j,book2);<br>                    list.set(j+<span class="hljs-number">1</span>,book1);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String author;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> price;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;名称：&quot;</span> + name + <span class="hljs-string">&quot;\t\t价格&quot;</span> + price + <span class="hljs-string">&quot;\t\t作者=&quot;</span> + author;<br>    &#125;<br>  <br>  <span class="hljs-comment">/*** 省略构造器、setget ***/</span><br></code></pre></td></tr></table></figure>

<p>思路：使用静态方法进行排序，用get取出list元素，向下转型，再进行比较。</p>
<h2 id="4-ArrayList"><a href="#4-ArrayList" class="headerlink" title="4.ArrayList"></a>4.ArrayList</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayList</span>&lt;E&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractList</span>&lt;E&gt;<br>        <span class="hljs-keyword">implements</span> <span class="hljs-title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable<br></code></pre></td></tr></table></figure>

<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a><strong>注意事项：</strong></h3><ol>
<li><p>permits all elements，including null（允许所有元素，包括空）。</p>
<p>ArrayList 可以加入null，并且可存放多个null</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">arrayList.add(<span class="hljs-literal">null</span>);<br>arrayList.add(<span class="hljs-literal">null</span>);<br><span class="hljs-comment">//是可行的</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>ArrayList 是由数组来实现数据存储的</p>
</li>
<li><p>ArrayList 基本等同于Vector，除了 <strong>ArrayList是线程不安全</strong>（执行效率高）[看源码,没有synchronized]．</p>
<p>在多线程情况下，不建议使用ArrayList</p>
</li>
</ol>
<h3 id="底层逻辑和源码分析"><a href="#底层逻辑和源码分析" class="headerlink" title="底层逻辑和源码分析"></a>底层逻辑和源码分析</h3><ol>
<li><p>ArrayList中维护了一个<strong>Object类型</strong>的数组elementData.［debug 看源码］</p>
<p>transient Object［］ elementData； </p>
<p>transient表示该属性不会被序列化。</p>
</li>
<li><p>当创建ArrayList对象时，<strong>如果使用的是无参构造器</strong>，则初始elementData容量为0。第<strong>1</strong>次添加，则扩容elementData为<strong>10</strong>，如需要<strong>再次</strong>扩容，则扩容elementData为<strong>1.5倍</strong>。</p>
</li>
<li><p>如果使用的是<strong>指定大小的构造器</strong>，则初始elementData容量为指定大小，如果需要<strong>扩容</strong>，则直接扩容elementData为<strong>1.5倍</strong>。</p>
</li>
</ol>
<p><strong>案例及分析：</strong></p>
<h4 id="分析使用无参构造器的ArrayList源码"><a href="#分析使用无参构造器的ArrayList源码" class="headerlink" title="分析使用无参构造器的ArrayList源码"></a>分析使用无参构造器的ArrayList源码</h4><p><strong>案例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ArrayList</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(); <span class="hljs-comment">//①</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<span class="hljs-comment">//②</span><br>    list.add(i);<span class="hljs-comment">//③</span><br>&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>; i &lt; <span class="hljs-number">15</span>; i++) &#123;<br>    list.add(i);<br>&#125;<br>list.add(<span class="hljs-number">100</span>);<br>list.add(<span class="hljs-number">200</span>);<br>list.add(<span class="hljs-literal">null</span>);<br></code></pre></td></tr></table></figure>

<p><strong>①</strong>首先新建ArrayList</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayList</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>查看 DEFAULTCAPACITY_EMPTY_ELEMENTDATA。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Shared empty array instance used for default sized empty instances. We</span><br><span class="hljs-comment"> * distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when</span><br><span class="hljs-comment"> * first element is added.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;<br></code></pre></td></tr></table></figure>

<p>发现是一个空数组。</p>
<p>也就意味着，elementData的初始化是空数组。</p>
<p><strong>②</strong>程序往下走，进入循环。第一次进入，先装箱。</p>
<p><strong>③</strong>然后调用add方法，查看add源码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Appends the specified element to the end of this list.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> e element to be appended to this list</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> &lt;tt&gt;true&lt;/tt&gt; (as specified by &#123;<span class="hljs-doctag">@link</span> Collection#add&#125;)</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    ensureCapacityInternal(size + <span class="hljs-number">1</span>);  <span class="hljs-comment">// Increments modCount!!</span><br>    elementData[size++] = e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ensureCapacityInternal：确认容量是否足够。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensureCapacityInternal</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;<br>    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity)); <span class="hljs-comment">//确认minCapacity大小，第一次扩容为10（具体步骤见下）</span><br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculateCapacity</span><span class="hljs-params">(Object[] elementData, <span class="hljs-type">int</span> minCapacity)</span> &#123;  <span class="hljs-comment">//确定minCapacity</span><br>        <span class="hljs-keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;<span class="hljs-comment">//如果elementData为空数组</span><br>            <span class="hljs-keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);<br>          <span class="hljs-comment">//返回DEFAULT_CAPACITY（10）和minCapacity（1）中的最大值，也就是10</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> minCapacity;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensureExplicitCapacity</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;<span class="hljs-comment">//确定是否真正扩容</span><br>    modCount++; <span class="hljs-comment">//记录集合被修改的次数（放置多线程操作出现异常）</span><br><br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-keyword">if</span> (minCapacity - elementData.length &gt; <span class="hljs-number">0</span>)  <span class="hljs-comment">//如果最小需要减去实际大小大于0（例如案例中，minCapacity现在为10，elementData为0）</span><br>        grow(minCapacity); <span class="hljs-comment">//调用grow方法</span><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">grow</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;<br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldCapacity</span> <span class="hljs-operator">=</span> elementData.length;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">newCapacity</span> <span class="hljs-operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="hljs-number">1</span>);<span class="hljs-comment">//原先数组大小+原先数组大小/2（也就是1.5倍扩容）</span><br>    <span class="hljs-keyword">if</span> (newCapacity - minCapacity &lt; <span class="hljs-number">0</span>) <span class="hljs-comment">//如果新的大小-最小小于0，则扩容直接赋值最小值（例如初始为0时，扩容1.5倍仍为0，就可以赋值最小值10）</span><br>        newCapacity = minCapacity;<br>    <span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="hljs-number">0</span>) <span class="hljs-comment">//如果新容量比数组最大值还大</span><br>        newCapacity = hugeCapacity(minCapacity); <span class="hljs-comment">//进行处理（这里暂且不分析）</span><br>    <span class="hljs-comment">// minCapacity is usually close to size, so this is a win:</span><br>    elementData = Arrays.copyOf(elementData, newCapacity);<br>  <span class="hljs-comment">//elementData赋值（如案例，扩容10个空数组）</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>所以，第一次扩容newCapacity&#x3D;10，第二次及以后按照1.5倍扩容</p>
<p>*为什么使用copyOf(): 保留原先数据的基础上，进行扩容</p>
<p>重新跳回add。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    ensureCapacityInternal(size + <span class="hljs-number">1</span>);  <span class="hljs-comment">// Increments modCount!!</span><br>    elementData[size++] = e;  <span class="hljs-comment">//现在执行这一句</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>先把e的值放进elementData（此时大小为1，下标size为0，e的值为1），然后再进行size++。</p>
<p>接下来继续循环这一流程，判断是否需要扩容，然后再返回（下图为循环i&#x3D;7时）。</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301194358937.png" srcset="/img/loading.gif" lazyload alt="image-20230301194358937" style="zoom:50%;" />

<p>一直到循环到位置不够时，再进行扩容（1.5倍，也就是15）。</p>
<p>这时候copyOf的作用显现出来，在保证原数据的情况下扩容。</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301200224233.png" srcset="/img/loading.gif" lazyload alt="image-20230301200224233" style="zoom:50%;" />



<p>*ideal做debug时会默认简化数据，若想看到全部数据，取消勾选Enable alternative view for Collections classes和Hide null…..</p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301195431430.png" srcset="/img/loading.gif" lazyload alt="image-20230301195431430"></p>
<h4 id="分析使用有参构造器的ArrayList源码"><a href="#分析使用有参构造器的ArrayList源码" class="headerlink" title="分析使用有参构造器的ArrayList源码"></a>分析使用有参构造器的ArrayList源码</h4><p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ArrayList</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(<span class="hljs-number">8</span>); <span class="hljs-comment">//①</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<span class="hljs-comment">//②</span><br>    list.add(i);<span class="hljs-comment">//③</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>①</strong>新建ArrayList(8)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Constructs an empty list with the specified initial capacity.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span>  initialCapacity  the initial capacity of the list</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> IllegalArgumentException if the specified initial capacity</span><br><span class="hljs-comment"> *         is negative</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayList</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity)</span> &#123; <span class="hljs-comment">//初始化容量（案例为8）</span><br>    <span class="hljs-keyword">if</span> (initialCapacity &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">this</span>.elementData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[initialCapacity];<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (initialCapacity == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">this</span>.elementData = EMPTY_ELEMENTDATA;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Illegal Capacity: &quot;</span>+<br>                                           initialCapacity);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>区别在于指定了容量大小。</p>
<p><strong>②</strong>循环添加数据，到9时进行扩容。（旧容8，需要9）</p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301201549141.png" srcset="/img/loading.gif" lazyload alt="image-20230301201549141"></p>
<p>进入到grow时，oldCapacity + (oldCapacity &gt;&gt; 1) 也就是8+8&#x2F;2 &#x3D; 12.</p>
<p>新容减去旧容不小于0，新容也没有超过MAX_ARRAY_SIZE。所以两个if都不会进入。</p>
<p>扩容为12。</p>
<p>有参构造器扩容，第一次按照elementData的1.5倍扩容，其余没有太多不同。</p>
<h2 id="5-Vector"><a href="#5-Vector" class="headerlink" title="5.Vector"></a>5.Vector</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector</span>&lt;E&gt;<br>    <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractList</span>&lt;E&gt;<br>    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable<br></code></pre></td></tr></table></figure>

<ul>
<li><p>Vector底层也是一个对象数组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> Object［］ elementData；<br></code></pre></td></tr></table></figure>
</li>
<li><p>Vector 是线程同步的，即线程安全，Vector类的操作方法带有synchronized</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//例如get</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>    <span class="hljs-keyword">if</span> (index &gt;= elementCount)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayIndexOutOfBoundsException</span>(index);<br><br>    <span class="hljs-keyword">return</span> elementData(index);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>在开发中，需要线程同步安全时，考虑使用Vector</p>
<ul>
<li>单线程考虑ArrayList，效率高</li>
</ul>
</li>
</ul>
<h3 id="Vector和ArrayList比较"><a href="#Vector和ArrayList比较" class="headerlink" title="Vector和ArrayList比较"></a>Vector和ArrayList比较</h3><table>
<thead>
<tr>
<th></th>
<th>底层结构</th>
<th>版本</th>
<th>线程安全（同步）效率</th>
<th>扩容倍数</th>
</tr>
</thead>
<tbody><tr>
<td>ArrayList</td>
<td>可变数组</td>
<td>jdk1.2</td>
<td>不安全，效率高</td>
<td>如果有参,构造1.5倍.<br/>如果是无参<br/>1.第一次10<br/>2.从第二次开始按1.5扩</td>
</tr>
<tr>
<td>Vector</td>
<td>可变数组</td>
<td>jdk1.0</td>
<td>安全，效率不高（因为每次都要做安全校验）</td>
<td>如果是无参，默认10。满后，就按2倍扩容。<br />如果指定大小，则每次直接按2倍扩。</td>
</tr>
</tbody></table>
<h3 id="底层逻辑和源码分析-1"><a href="#底层逻辑和源码分析-1" class="headerlink" title="底层逻辑和源码分析"></a>底层逻辑和源码分析</h3><p><strong>无参：</strong></p>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Vector</span> <span class="hljs-variable">vector</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vector</span>();<span class="hljs-comment">//①</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<span class="hljs-comment">//②</span><br>    vector.add(i);<span class="hljs-comment">//③</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>①创建Vector，初始赋值为10</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">Vector</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">this</span>(<span class="hljs-number">10</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>②进入循环，先自动装箱。</p>
<p>③调用add，和ArrayList除了名称不同，其他操作类似</p>
<p>确定是否需要扩容。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    modCount++;<br>    ensureCapacityHelper(elementCount + <span class="hljs-number">1</span>);<br>    elementData[elementCount++] = e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ensureCapacityHelper</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;<br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-keyword">if</span> (minCapacity - elementData.length &gt; <span class="hljs-number">0</span>) <span class="hljs-comment">//判断是否扩容</span><br>        grow(miing)nCapacity);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>走到10时，容量不够，进入grow。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">grow</span><span class="hljs-params">(<span class="hljs-type">int</span> minCapacity)</span> &#123;<br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldCapacity</span> <span class="hljs-operator">=</span> elementData.length;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">newCapacity</span> <span class="hljs-operator">=</span> oldCapacity + ((capacityIncrement &gt; <span class="hljs-number">0</span>) ?<br>                                     capacityIncrement : oldCapacity);<br>  <span class="hljs-comment">//判断capacityIncrement是否大于0，此时它为0，所以为false，返回oldCapacity。newCapacity就等于2倍的oldCapacity。</span><br>    <span class="hljs-keyword">if</span> (newCapacity - minCapacity &lt; <span class="hljs-number">0</span>)<br>        newCapacity = minCapacity;<br>    <span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="hljs-number">0</span>)<br>        newCapacity = hugeCapacity(minCapacity);<br>    elementData = Arrays.copyOf(elementData, newCapacity);<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230301213136992.png" srcset="/img/loading.gif" lazyload alt="image-20230301213136992" style="zoom:50%;" />



<p>如果是<strong>有参构造</strong>，初始化如下，直接赋值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">Vector</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity)</span> &#123;<br>    <span class="hljs-built_in">this</span>(initialCapacity, <span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>其中的0为capacityIncrement的值。</p>
<h2 id="6-LinkedList"><a href="#6-LinkedList" class="headerlink" title="6.LinkedList"></a>6.LinkedList</h2><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230302004934704.png" srcset="/img/loading.gif" lazyload alt="image-20230302004934704" style="zoom:50%;" />

<p>特点：</p>
<ol>
<li>LinkedList实现了双向链表和双端队列特点</li>
<li>可以添加任意元素（元素可以重复），包括null</li>
<li>线程不安全，没有实现同步</li>
</ol>
<h3 id="LinkedList的底层操作机制"><a href="#LinkedList的底层操作机制" class="headerlink" title="LinkedList的底层操作机制"></a>LinkedList的底层操作机制</h3><ol>
<li><p>LinkedList底层维护了一个双向链表． </p>
</li>
<li><p>LinkedList中维护了两个属性<strong>first和last</strong>分别指向 <strong>首节点和尾节点</strong></p>
</li>
<li><p>每个节点（Node对象），里面又维护了prev、next、item三个属性，其中通过prev指向前一个，通过next指向后一个节点。最终实现双向链表.</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230302005059128.png" srcset="/img/loading.gif" lazyload alt="image-20230302005059128" style="zoom:50%;" />
</li>
<li><p>所以LinkedList的元素的添加和删除，不是通过数组完成的，相对来说效率较高。</p>
</li>
</ol>
<h4 id="模拟双向链表："><a href="#模拟双向链表：" class="headerlink" title="模拟双向链表："></a><strong>模拟双向链表：</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//模拟一个双向链表</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">jack</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;jack&quot;</span>);<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">tom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;tom&quot;</span>);<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">pat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;pat&quot;</span>);<br>        <span class="hljs-comment">//连接三个结点</span><br>        <span class="hljs-comment">//jack -&gt; tom -&gt; pat</span><br>        jack.next = tom;<br>        tom.next = pat;<br>        pat.pre = tom;<br>        tom.pre = jack;<br>        <span class="hljs-comment">//链表头尾</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">first</span> <span class="hljs-operator">=</span> jack; <span class="hljs-comment">//jack为头结点</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> pat; <span class="hljs-comment">//pat为尾结点</span><br><br>        <span class="hljs-comment">//遍历</span><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-keyword">if</span> (first == <span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            System.out.println(first);<br>            first = first.next; <span class="hljs-comment">//指向下一个结点</span><br>        &#125;<br>        <span class="hljs-comment">//反向遍历</span><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-keyword">if</span> (last == <span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            System.out.println(last);<br>            last = last.pre; <span class="hljs-comment">//指向下一个结点</span><br>        &#125;<br><br>        <span class="hljs-comment">//在tom和pat中添加一个smith</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">smith</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;smith&quot;</span>);<br>        <span class="hljs-comment">//方式，修改结点的next和pre</span><br>        smith.next = pat;<br>        smith.pre = tom;<br>        tom.next = smith;<br>        pat.pre = smith;<br>        <span class="hljs-comment">//遍历输出</span><br>        <span class="hljs-comment">//重置first</span><br>        first = jack; <span class="hljs-comment">//jack为头结点</span><br>        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;<br>            <span class="hljs-keyword">if</span> (first == <span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            System.out.println(first);<br>            first = first.next; <span class="hljs-comment">//指向下一个结点</span><br>        &#125;<br>    &#125;<br><span class="hljs-comment">//定义一个Node类。Node对象 表示双向链表的一个结点</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-keyword">public</span> Object item; <span class="hljs-comment">//存放数据</span><br>    <span class="hljs-keyword">public</span> Node next; <span class="hljs-comment">//指向下一个结点</span><br>    <span class="hljs-keyword">public</span> Node pre; <span class="hljs-comment">//指向前一个结点</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(Object name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.item = name;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Node name=&quot;</span> + item;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="底层结构：增删改查案例"><a href="#底层结构：增删改查案例" class="headerlink" title="底层结构：增删改查案例"></a>底层结构：增删改查案例</h4><h5 id="增："><a href="#增：" class="headerlink" title="增："></a>增：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">LinkedList</span> <span class="hljs-variable">linkedList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>(); <span class="hljs-comment">//①</span><br>linkedList.add(<span class="hljs-number">1</span>); <span class="hljs-comment">//②</span><br>linkedList.add(<span class="hljs-number">2</span>); <span class="hljs-comment">//③</span><br></code></pre></td></tr></table></figure>

<p>① 新建</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Constructs an empty list.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">LinkedList</span><span class="hljs-params">()</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230302011839673.png" srcset="/img/loading.gif" lazyload alt="image-20230302011839673" style="zoom:50%;" />

<p>②调用add，先进行装箱</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-title function_">valueOf</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)<br>        <span class="hljs-keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(i);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>然后执行add。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    linkLast(e); <span class="hljs-comment">//调用linkLast()</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">linkLast</span><span class="hljs-params">(E e)</span> &#123;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; l = last; <span class="hljs-comment">//last此时为空</span><br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(l, e, <span class="hljs-literal">null</span>);  <span class="hljs-comment">//newNode指向新节点（null，e，null），具体如下图。</span><br>    last = newNode; <span class="hljs-comment">//last指向新节点</span><br>    <span class="hljs-keyword">if</span> (l == <span class="hljs-literal">null</span>)<br>        first = newNode; <span class="hljs-comment">//first 指向新节点</span><br>    <span class="hljs-keyword">else</span><br>        l.next = newNode; <br>    size++; <span class="hljs-comment">//size+1</span><br>    modCount++;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>关于新建Node，操作如下。</p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230302012505885.png" srcset="/img/loading.gif" lazyload alt="image-20230302012505885"></p>
<p>一轮后结果如下。</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/20230302012813.png" srcset="/img/loading.gif" lazyload style="zoom:50%;" />

<p>③ 第二次add操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">linkLast</span><span class="hljs-params">(E e)</span> &#123;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; l = last; <span class="hljs-comment">//l指向last，此刻是1节点</span><br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(l, e, <span class="hljs-literal">null</span>);  <span class="hljs-comment">//newNode指向新节点（1节点，e，null），具体如下图。</span><br>    last = newNode; <span class="hljs-comment">//last指向新节点</span><br>    <span class="hljs-keyword">if</span> (l == <span class="hljs-literal">null</span>)<br>        first = newNode; <br>    <span class="hljs-keyword">else</span><br>        l.next = newNode; <span class="hljs-comment">//1节点的下一节点指向新节点</span><br>    size++; <span class="hljs-comment">//size+1</span><br>    modCount++;<br>&#125;<br></code></pre></td></tr></table></figure>



<h5 id="删："><a href="#删：" class="headerlink" title="删："></a>删：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">linkedList.remove(); <span class="hljs-comment">//默认删除第一个</span><br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> E <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> removeFirst();<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> E <span class="hljs-title function_">removeFirst</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; f = first; <br>    <span class="hljs-keyword">if</span> (f == <span class="hljs-literal">null</span>) <span class="hljs-comment">//如果first为空，抛出异常</span><br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>();<br>    <span class="hljs-keyword">return</span> unlinkFirst(f); <span class="hljs-comment">//调用unlinkFirst</span><br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> E <span class="hljs-title function_">unlinkFirst</span><span class="hljs-params">(Node&lt;E&gt; f)</span> &#123;<br>    <span class="hljs-comment">// assert f == first &amp;&amp; f != null;</span><br>    <span class="hljs-keyword">final</span> <span class="hljs-type">E</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> f.item; <br>    <span class="hljs-keyword">final</span> Node&lt;E&gt; next = f.next; <span class="hljs-comment">//next 指向first的next</span><br>    f.item = <span class="hljs-literal">null</span>;<br>    f.next = <span class="hljs-literal">null</span>; <span class="hljs-comment">// help GC  //first的next置空</span><br>    first = next;  <span class="hljs-comment">//first指向next</span><br>    <span class="hljs-keyword">if</span> (next == <span class="hljs-literal">null</span>)  <br>        last = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">else</span>  <br>        next.prev = <span class="hljs-literal">null</span>; <span class="hljs-comment">//next的pre置空（原为first）</span><br>    size--; <span class="hljs-comment">//size减一</span><br>    modCount++;<br>    <span class="hljs-keyword">return</span> element;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>删除第一个，意味断掉原先指向first的节点与first的联系，再将first指向下一个结点。</p>
<p><strong>修改、查找和遍历操作</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//修改某个结点对象</span><br>linkedList.set(<span class="hljs-number">1</span>,<span class="hljs-number">999</span>);<br>System.out.println(<span class="hljs-string">&quot;linkedlist=&quot;</span>+linkedList);<br><span class="hljs-comment">//得到某个结点</span><br><span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> linkedList.get(<span class="hljs-number">1</span>);<br>System.out.println(o);<br><span class="hljs-comment">//遍历</span><br><span class="hljs-comment">//迭代器</span><br><span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> linkedList.iterator();<br><span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>  <span class="hljs-type">Object</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span>  iterator.next();<br>  System.out.println(<span class="hljs-string">&quot;next=&quot;</span>+next);<br><br>&#125;<br><span class="hljs-comment">//增强for</span><br><span class="hljs-keyword">for</span> (Object o1 : linkedList) &#123;<br>  System.out.println(<span class="hljs-string">&quot;o1=&quot;</span> + o1);<br>&#125;<br><span class="hljs-comment">//普通for</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; linkedList.size(); i++) &#123;<br>  System.out.println(linkedList.get(i));<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="ArrayList和LinkedList的比较"><a href="#ArrayList和LinkedList的比较" class="headerlink" title="ArrayList和LinkedList的比较"></a>ArrayList和LinkedList的比较</h3><table>
<thead>
<tr>
<th></th>
<th>底层结构</th>
<th>增删的效率</th>
<th>改查的效率</th>
</tr>
</thead>
<tbody><tr>
<td>ArrayList</td>
<td>可变数组</td>
<td>较低<br />数组扩容</td>
<td>较高</td>
</tr>
<tr>
<td>LinkedList</td>
<td>双向链表</td>
<td>较高，通过链表追加</td>
<td>较低</td>
</tr>
</tbody></table>
<p><strong>如何选择ArrayList和LinkedList:</strong></p>
<p>1）如果我们<strong>改查</strong>的操作多，选择<strong>ArrayList</strong></p>
<p>2）如果我们<strong>增删</strong>的操作多，选择<strong>LinkedList</strong></p>
<p>3） 一般来说，在程序中，80％－90％都是查询，因此大部分情况下会选择ArrayList</p>
<p>4）在一个项目中，根据业务灵活选择，也可能这样，一个模块使用的是ArrayList，另外一个模块是LinkedList.</p>
<h2 id="7-Set接口"><a href="#7-Set接口" class="headerlink" title="7.Set接口"></a>7.Set接口</h2><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230306204836888.png" srcset="/img/loading.gif" lazyload alt="image-20230306204836888" style="zoom:50%;" />

<h3 id="基本介绍-2"><a href="#基本介绍-2" class="headerlink" title="基本介绍"></a><strong>基本介绍</strong></h3><ol>
<li><p><strong>无序</strong>（添加和取出的顺序不一致），没有索引</p>
</li>
<li><p><strong>不允许重复元素</strong>，所以最多包含一个null</p>
</li>
<li><p>JDK API中Set接口的实现类有：</p>
<blockquote>
<h2 id="Interface-Set"><a href="#Interface-Set" class="headerlink" title="Interface Set"></a>Interface Set<E></h2><ul>
<li><ul>
<li><p><strong>参数类型</strong></p>
<p><code>E</code> - 由此集合维护的元素的类型 </p>
</li>
<li><p>All Superinterfaces: </p>
<p><a href="itss://chm/java/util/Collection.html">Collection</a> <E>， <a href="itss://chm/java/lang/Iterable.html">Iterable</a> <E></p>
</li>
<li><p>All Known Subinterfaces: </p>
<p><a href="itss://chm/java/util/NavigableSet.html">NavigableSet</a> <E>， <a href="itss://chm/java/util/SortedSet.html">SortedSet</a> <E></p>
</li>
<li><p>所有已知实现类：</p>
<p><a href="itss://chm/java/util/AbstractSet.html">AbstractSet</a> ， <a href="itss://chm/java/util/concurrent/ConcurrentHashMap.KeySetView.html">ConcurrentHashMap.KeySetView</a> ， <a href="itss://chm/java/util/concurrent/ConcurrentSkipListSet.html">ConcurrentSkipListSet</a> ， <a href="itss://chm/java/util/concurrent/CopyOnWriteArraySet.html">CopyOnWriteArraySet</a> ， <a href="itss://chm/java/util/EnumSet.html">EnumSet</a> ， <a href="itss://chm/java/util/HashSet.html">HashSet</a> ， <a href="itss://chm/javax/print/attribute/standard/JobStateReasons.html">JobStateReasons</a> ， <a href="itss://chm/java/util/LinkedHashSet.html">LinkedHashSet</a>， <a href="itss://chm/java/util/TreeSet.html">TreeSet</a></p>
</li>
</ul>
</li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="常用方法和遍历方式"><a href="#常用方法和遍历方式" class="headerlink" title="常用方法和遍历方式"></a>常用方法和遍历方式</h3><p><strong>常用方法：</strong></p>
<p>和List接口一样，Set接口也是Collection的子接口，因此，常<strong>用方法和 Collection接口一样</strong>.</p>
<p><strong>遍历方式：</strong></p>
<p>同Collection的遍历方式一样，因为Set接口是Collection接口的子接口。</p>
<p>1.可以使用迭代器</p>
<p>2.增强for</p>
<p>3.<strong>不能使用索引</strong>的方式来获取.（因为无序）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>set.add(<span class="hljs-string">&quot;john&quot;</span>);<br>set.add(<span class="hljs-string">&quot;lucy&quot;</span>);<br>set.add(<span class="hljs-string">&quot;john&quot;</span>);<br>set.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>set.add(<span class="hljs-literal">null</span>);<br>set.add(<span class="hljs-literal">null</span>);<br>System.out.println(<span class="hljs-string">&quot;set=&quot;</span>+set);<br><span class="hljs-comment">//输出：set=[null, john, lucy, jack]</span><br><span class="hljs-comment">//添加和输出顺序不同（无序），不能存放重复的元素，可以添加null但只限一个</span><br><span class="hljs-comment">//输出的顺序一直是相同的</span><br>set.add(<span class="hljs-string">&quot;mary&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;set=&quot;</span>+set);<br><span class="hljs-comment">//输出：set=[null, mary, john, lucy, jack]</span><br><br><span class="hljs-comment">//遍历</span><br><span class="hljs-comment">//1.迭代器</span><br><span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> set.iterator();<br><span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>    System.out.println(<span class="hljs-string">&quot;obj=&quot;</span>+obj);<br>&#125;<br><span class="hljs-comment">//obj=null</span><br><span class="hljs-comment">//obj=mary</span><br><span class="hljs-comment">//obj=john</span><br><span class="hljs-comment">//obj=lucy</span><br><span class="hljs-comment">//obj=jack</span><br><br><span class="hljs-comment">//2.增强for</span><br><span class="hljs-keyword">for</span> (Object o : set) &#123;<br>    System.out.println(<span class="hljs-string">&quot;o=&quot;</span>+o);<br>&#125;<br><span class="hljs-comment">//o=null</span><br><span class="hljs-comment">//o=mary</span><br><span class="hljs-comment">//o=john</span><br><span class="hljs-comment">//o=lucy</span><br><span class="hljs-comment">//o=jack</span><br><br><span class="hljs-comment">//无法使用普通for（因为不能通过索引获取）</span><br></code></pre></td></tr></table></figure>



<h2 id="8-HashSet"><a href="#8-HashSet" class="headerlink" title="8.HashSet"></a>8.HashSet</h2><h3 id="基本说明"><a href="#基本说明" class="headerlink" title="基本说明"></a>基本说明</h3><ol>
<li><p>HashSet实现了Set接口</p>
</li>
<li><p>HashSet实际上是HashMap (下为源码)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">HashSet</span><span class="hljs-params">()</span> &#123;<br>    map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>可以存放null，但只能存放一个</p>
</li>
<li><p>HashSet不保证元素是有序的，取决于hash后，再确定索引的结果（不保证存放元素的顺序和取出顺序一致）</p>
</li>
<li><p>不能有重复元素／对象.在前面Set接口使用已经讲过</p>
</li>
</ol>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">HashSet</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br><span class="hljs-comment">//执行add方法会返回boolean值，成功t，失败f</span><br>System.out.println(set.add(<span class="hljs-string">&quot;john&quot;</span>)); <span class="hljs-comment">//T</span><br>System.out.println(set.add(<span class="hljs-string">&quot;lucy&quot;</span>)); <span class="hljs-comment">//T</span><br>System.out.println(set.add(<span class="hljs-string">&quot;john&quot;</span>)); <span class="hljs-comment">//F</span><br>System.out.println(set.add(<span class="hljs-string">&quot;jack&quot;</span>)); <span class="hljs-comment">//T</span><br>System.out.println(set.add(<span class="hljs-string">&quot;Rose&quot;</span>)); <span class="hljs-comment">//T</span><br><br>set.remove(<span class="hljs-string">&quot;john&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;set=&quot;</span>+set);  <span class="hljs-comment">//set=[Rose, lucy, jack]</span><br><br>set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>System.out.println(<span class="hljs-string">&quot;set=&quot;</span>+set); <span class="hljs-comment">//0</span><br><br>set.add(<span class="hljs-string">&quot;lucy&quot;</span>);<br>set.add(<span class="hljs-string">&quot;lucy&quot;</span>); <span class="hljs-comment">//加入不了，因为和前一句指向同一常量池</span><br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;tom&quot;</span>)); <span class="hljs-comment">//OK</span><br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;tom&quot;</span>)); <span class="hljs-comment">//OK</span><br>System.out.println(<span class="hljs-string">&quot;set=&quot;</span>+set); <span class="hljs-comment">//set=[Dog&#123;name=&#x27;tom&#x27;&#125;, lucy, Dog&#123;name=&#x27;tom&#x27;&#125;]</span><br><br><span class="hljs-comment">/***/</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br><span class="hljs-comment">/***</span><br></code></pre></td></tr></table></figure>

<p>添加两个name属性相同的Dog对象是可行的。</p>
<p>但下面这种情况是不可行的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//经典面试题</span><br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;hsp&quot;</span>)); <span class="hljs-comment">//ok</span><br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;hsp&quot;</span>)); <span class="hljs-comment">//不ok</span><br></code></pre></td></tr></table></figure>



<h3 id="HashSet底层机制说明"><a href="#HashSet底层机制说明" class="headerlink" title="HashSet底层机制说明"></a>HashSet底层机制说明</h3><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230303174405971.png" srcset="/img/loading.gif" lazyload alt="image-20230303174405971" style="zoom:50%;" />

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//模拟一个HashSet的底层（HashMap的底层结构）</span><br><span class="hljs-comment">// 1.创建一个数组，数组类型为Node</span><br><span class="hljs-comment">// 2.（有些人直接称呼Node[]数组为链表）</span><br>Node[] table = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[<span class="hljs-number">16</span>];<br><span class="hljs-comment">// 3.创建结点</span><br><span class="hljs-type">Node</span> <span class="hljs-variable">john</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-literal">null</span>);<br>table[<span class="hljs-number">2</span>] = john;<br><span class="hljs-type">Node</span> <span class="hljs-variable">jack</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-literal">null</span>);<br>john.next = jack; <span class="hljs-comment">//将jack结点挂在到john</span><br><span class="hljs-type">Node</span> <span class="hljs-variable">rose</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;rose&quot;</span>, <span class="hljs-literal">null</span>);<br>jack.next = rose; <span class="hljs-comment">//将jack结点挂在到john</span><br><span class="hljs-type">Node</span> <span class="hljs-variable">lucy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">&quot;lucy&quot;</span>, <span class="hljs-literal">null</span>);<br>table[<span class="hljs-number">3</span>] = lucy; <span class="hljs-comment">//把lucy放在table表索引为3的位置</span><br>System.out.println(<span class="hljs-string">&quot;table=&quot;</span> + table);<br></code></pre></td></tr></table></figure>

<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230303174319784.png" srcset="/img/loading.gif" lazyload alt="image-20230303174319784" style="zoom:50%;" />

<h4 id="HashSet添加元素"><a href="#HashSet添加元素" class="headerlink" title="HashSet添加元素"></a>HashSet添加元素</h4><p><strong>⭐️结论</strong></p>
<ol>
<li>HashSet 底层是 HashMap</li>
<li>添加一个元素时，先得到hash值 －转成－＞索引值</li>
<li>找到存储数据表table，看这个<strong>索引</strong>位置<strong>是否已经存放</strong>的有元素<ul>
<li>如果<strong>没有</strong>，直接<strong>加入</strong></li>
<li>如果<strong>有</strong>，调用 <strong>equals</strong> 比较（equals方法需要程序员确定）。<ul>
<li>如果相同，就放弃添加</li>
<li>如果不相同，则添加到最后</li>
</ul>
</li>
</ul>
</li>
<li>在Java8中，如果一条链表的元素个数 到达 TREEIFY_THRESHOLD（默认是8），并且table的大小＞＝MIN_TREEIFY_CAPACITY（默认64），就会进行树化（红黑树）</li>
</ol>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">HashSet</span> <span class="hljs-variable">hashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>(); <span class="hljs-comment">//①</span><br>hashSet.add(<span class="hljs-string">&quot;java&quot;</span>); <span class="hljs-comment">//②第一次添加</span><br>hashSet.add(<span class="hljs-string">&quot;php&quot;</span>); <span class="hljs-comment">//③第二次添加</span><br>hashSet.add(<span class="hljs-string">&quot;java&quot;</span>); <span class="hljs-comment">//④添加一次已添加过的元素</span><br>System.out.println(<span class="hljs-string">&quot;set=&quot;</span>+hashSet);<br></code></pre></td></tr></table></figure>

<p>① 新建，构造器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">HashSet</span><span class="hljs-params">()</span> &#123;<br>    map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>②第一次添加，调用add</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123; <span class="hljs-comment">//e = &quot;java&quot;</span><br>    <span class="hljs-keyword">return</span> map.put(e, PRESENT)==<span class="hljs-literal">null</span>; <span class="hljs-comment">//调用put()</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>执行put方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> V <span class="hljs-title function_">put</span><span class="hljs-params">(K key, V value)</span> &#123;<span class="hljs-comment">//②-1</span><br>    <span class="hljs-keyword">return</span> putVal(hash(key), key, value, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">//②-2</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>②-1：key指e（java），value指PRESENT（统一占位用）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">PRESENT</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br></code></pre></td></tr></table></figure>

<p>②-2：hash(key)，key为空返回0，不为空使用hashCode返回传进来的key对应hash值。</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hash</span>(<span class="hljs-built_in">Object</span> <span class="hljs-built_in">key</span>) &#123;<br>    <span class="hljs-type">int</span> h;<br>    <span class="hljs-title function_">return</span> (<span class="hljs-built_in">key</span> == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : (h = <span class="hljs-built_in">key</span>.<span class="hljs-property">hashCode</span>()) ^ (h &gt;&gt;&gt; <span class="hljs-number">16</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>putVal（详细见下注释）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent,</span><br><span class="hljs-params">               <span class="hljs-type">boolean</span> evict)</span> &#123;<br>    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="hljs-type">int</span> n, i;  <span class="hljs-comment">//辅助变量</span><br>  <br>  <span class="hljs-comment">//table就是HashMap的一个数组，类型是Node[] （类似于上一个示例）</span><br>  <span class="hljs-comment">//如果当前table为null，或者大小为0</span><br>    <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>) <br>        n = (tab = resize()).length; <span class="hljs-comment">// n = 16，详细resize见②-2-1</span><br>  <span class="hljs-comment">//根据key得到hash值 去计算该key应该存放到table表的哪个索引位置，并把位置赋给p，再判断p是否为空</span><br>    <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == <span class="hljs-literal">null</span>)<br>      <span class="hljs-comment">//如果为空，表示没有存放过数据。</span><br>      <span class="hljs-comment">//创建一个node（key=“java”，value=PRESENT），放在table[i]</span><br>        tab[i] = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>    <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">//不进入，暂时省略</span><br>    &#125;<br>    ++modCount;<br>    <span class="hljs-keyword">if</span> (++size &gt; threshold) <span class="hljs-comment">//判断size是否到临界值</span><br>        resize();<br>    afterNodeInsertion(evict); <span class="hljs-comment">//空方法</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">//返回null，代表成功，回到②-2</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>②-2-1：resize</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;<br>    Node&lt;K,V&gt;[] oldTab = table; <span class="hljs-comment">//table为空</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldCap</span> <span class="hljs-operator">=</span> (oldTab == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : oldTab.length; <span class="hljs-comment">//oldTab: 0</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldThr</span> <span class="hljs-operator">=</span> threshold;<br>    <span class="hljs-type">int</span> newCap, newThr = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (oldCap &gt; <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">//不进入</span><br>      <span class="hljs-comment">//*** 省略 ***//</span><br>    <span class="hljs-keyword">else</span> &#123;               <span class="hljs-comment">// zero initial threshold signifies using defaults  //进入</span><br>        newCap = DEFAULT_INITIAL_CAPACITY; <span class="hljs-comment">//默认大小，1&lt;&lt;4，也就是16</span><br>        newThr = (<span class="hljs-type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); <span class="hljs-comment">//临界值，DEFAULT_LOAD_FACTOR=0.75，乘以16=12</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (newThr == <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">//不进入</span><br>        <span class="hljs-comment">//*** 省略 ***// </span><br>    &#125;<br>    threshold = newThr; <span class="hljs-comment">//threshold临界值 = 12</span><br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span><br>    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[newCap]; <span class="hljs-comment">//以值为16的newCap创建Node</span><br>    table = newTab; <span class="hljs-comment">//newTab赋给table</span><br>    <span class="hljs-keyword">if</span> (oldTab != <span class="hljs-literal">null</span>) &#123; <br> 			 <span class="hljs-comment">//*** 省略 ***// </span><br>    &#125;<br>    <span class="hljs-keyword">return</span> newTab; <span class="hljs-comment">//返回newTab</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>③第二次添加</p>
<p>调用put和hash 与第一次添加没什么不同。</p>
<p>调用putvalue。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent,</span><br><span class="hljs-params">               <span class="hljs-type">boolean</span> evict)</span> &#123;<br>  <span class="hljs-comment">//key为“php”，value为PRESENT</span><br>    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="hljs-type">int</span> n, i;<br>    <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>) <span class="hljs-comment">//有数据，所以不进入</span><br>        n = (tab = resize()).length;<br>    <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == <span class="hljs-literal">null</span>) <span class="hljs-comment">//计算的位置p是否为空</span><br>      <span class="hljs-comment">//创建一个node（key=“php”，value=PRESENT），放在table[i]</span><br>        tab[i] = newNode(hash, key, value, <span class="hljs-literal">null</span>); <br>    <span class="hljs-keyword">else</span> &#123;<br>       <span class="hljs-comment">//不进入，暂时省略</span><br>    &#125;<br>    ++modCount;<br>    <span class="hljs-keyword">if</span> (++size &gt; threshold) <span class="hljs-comment">//size=2，小于临界值12</span><br>        resize();<br>    afterNodeInsertion(evict); <br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>④添加一个已有的数据</p>
<p>add和hash和前面没什么区别，省略。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent,</span><br><span class="hljs-params">               <span class="hljs-type">boolean</span> evict)</span> &#123;<br>    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="hljs-type">int</span> n, i;<br>    <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>)<br>        n = (tab = resize()).length;<br>    <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == <span class="hljs-literal">null</span>) <span class="hljs-comment">//这里计算出的hash值和前面的第一次添加的相同，所以tab的该位置存在数据，所以不为空</span><br>        <span class="hljs-comment">//**省略***//</span><br>    <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">//进入该项</span><br>        Node&lt;K,V&gt; e; K k; <span class="hljs-comment">//辅助变量</span><br>      <span class="hljs-comment">//开发技巧提示：需要的地方再创建变量</span><br>      <span class="hljs-comment">//判断</span><br>        <span class="hljs-keyword">if</span> (p.hash == hash &amp;&amp;   <br>            ((k = p.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<br>          <span class="hljs-comment">//可能1</span><br>          <span class="hljs-comment">//如果当前索引位置对应的链表的第一个元素和准备添加的key的hash值相同</span><br>          <span class="hljs-comment">//并且，满足下面两个条件之一</span><br>          		<span class="hljs-comment">//1.1 准备加入的key和p指向的Node结点的key相同</span><br>          		<span class="hljs-comment">//1.2 key不为空，而且，key的equals()和准备加入的key比较后相同</span><br>            e = p;<span class="hljs-comment">//就不能加入</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p <span class="hljs-keyword">instanceof</span> TreeNode)<br>          <span class="hljs-comment">//可能2，p是红黑树</span><br>          <span class="hljs-comment">//使用红黑树的方式添加（putTreeVal），暂时不深入</span><br>            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="hljs-built_in">this</span>, tab, hash, key, value);<br>        <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">//可能3（不满足1、2）</span><br>          <span class="hljs-comment">//发现已经是一条链表，循环对比（依次和每个元素相比）</span><br>          <span class="hljs-comment">//3.1如果有相同的，退出循环</span><br>          <span class="hljs-comment">//3.2如果没有相同，加在链表的最后面</span><br>          	<span class="hljs-comment">//在元素添加到链表后，立即判断 该链表是否达到8个结点</span><br>          	<span class="hljs-comment">//如果达到，调用treeifyBin，对链表进行树化(专成红黑树)</span><br>          			<span class="hljs-comment">//* 内部还会继续进行判断，如果table的数组大小&lt;64，会先扩容。如果大于，才进行红黑树。</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">binCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; ; ++binCount) &#123; <span class="hljs-comment">//死循环</span><br>                <span class="hljs-keyword">if</span> ((e = p.next) == <span class="hljs-literal">null</span>) &#123;<br>                    p.next = newNode(hash, key, value, <span class="hljs-literal">null</span>);<span class="hljs-comment">//添加在最后</span><br>                    <span class="hljs-keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="hljs-number">1</span>) <span class="hljs-comment">// -1 for 1st</span><br>                        treeifyBin(tab, hash);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (e.hash == hash &amp;&amp;<br>                    ((k = e.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<span class="hljs-comment">//有相同的</span><br>                    <span class="hljs-keyword">break</span>;<br>                p = e;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// existing mapping for key</span><br>            <span class="hljs-type">V</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> e.value;<br>            <span class="hljs-keyword">if</span> (!onlyIfAbsent || oldValue == <span class="hljs-literal">null</span>)<br>                e.value = value;<br>            afterNodeAccess(e);<br>            <span class="hljs-keyword">return</span> oldValue;<br>        &#125;<br>    &#125;<br>    ++modCount;<br>    <span class="hljs-keyword">if</span> (++size &gt; threshold)<br>        resize();<br>    afterNodeInsertion(evict);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="HashSet扩容和转成红黑树机制"><a href="#HashSet扩容和转成红黑树机制" class="headerlink" title="HashSet扩容和转成红黑树机制"></a>HashSet扩容和转成红黑树机制</h4><p><strong>⭐️结论</strong></p>
<ol>
<li>HashSet底层是HashMap，第一次添加时，table 数组扩容到16，临界值<br>（threshold）是16＊加载因子（loadFactor）是0.75 ＝ 12</li>
<li>如果table 数组使用到了临界值12，就会扩容到16＊2＝32，新的临界值就是32＊0.75＝24，依次类推</li>
<li>在Java8中，如果一条链表的元素个数到 达 TREEIFY THRESHOLD（默认是8），并且table的大小＞＝IMIN_TREEIFY_CAPACITY（默认64），就会进行树化（红黑树），<strong>否则仍然采用数组扩容机制</strong></li>
</ol>
<p>注意：size指的是整个Node里的元素个数</p>
<h3 id="练习-4"><a href="#练习-4" class="headerlink" title="练习"></a>练习</h3><blockquote>
<p>定义一个Employee类，该类包含：private成员属性name，age 要求：</p>
<p>1.创建3个Employee 放入 HashSet中</p>
<p>2.当name和age的值相同时，认为是相同员工，不能添加到HashSet集合中</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//        定义一个Employee类，该类包含：private成员属性name，age 要求：</span><br><span class="hljs-comment">//        1.创建3个Employee 放入 HashSet中</span><br><span class="hljs-comment">//        2.当name和age的值相同时，认为是相同员工，不能添加到HashSet集合中</span><br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">hashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-number">21</span>));<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;pat&quot;</span>,<span class="hljs-number">23</span>));<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;tim&quot;</span>,<span class="hljs-number">22</span>));<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;tim&quot;</span>,<span class="hljs-number">22</span>));<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;tim&quot;</span>,<span class="hljs-number">22</span>));<br><br>        <span class="hljs-keyword">for</span> (Object o :hashSet) &#123;<br>            System.out.println(o);<br>        &#125;<br><br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br><br>    <span class="hljs-comment">//如果name和age值相同，则认为是相同的（重写equals和hashCode）</span><br>  <span class="hljs-comment">//可用快捷键生成</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">Employee</span> <span class="hljs-variable">employee</span> <span class="hljs-operator">=</span> (Employee) o;<br>        <span class="hljs-keyword">return</span> getAge() == employee.getAge() &amp;&amp; Objects.equals(getName(), employee.getName());<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Objects.hash(getName(), getAge());<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>Employee{name&#x3D;’pat’, age&#x3D;23}<br>Employee{name&#x3D;’jack’, age&#x3D;21}<br>Employee{name&#x3D;’tim’, age&#x3D;22}</p>
<h3 id="练习2-1"><a href="#练习2-1" class="headerlink" title="练习2"></a>练习2</h3><blockquote>
<p>定义一个Employee类，该类包含：private成员属性name，sal，birthday（MyDate类 型），其中birthday为MyDate类型（属性包括：year， month，day），要求：<br>1．创建3个Employee 放入 HashSet中<br>2．当name和birthday的值相同时，认为是相同员工，不能添加到HashSet集合中</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//        定义一个Employee类，该类包含：private成员属性name，sal，birthday（MyDate类型）</span><br><span class="hljs-comment">//        其中birthday为MyDate类型（属性包括：year， month，day），要求：</span><br><span class="hljs-comment">//        1．创建3个Employee 放入 HashSet中</span><br><span class="hljs-comment">//        2．当name和birthday的值相同时，认为是相同员工，不能添加到HashSet集合中</span><br>        <span class="hljs-type">HashSet</span> <span class="hljs-variable">hashSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee2</span>(<span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-number">2000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>)));<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee2</span>(<span class="hljs-string">&quot;pat&quot;</span>, <span class="hljs-number">3050</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">2002</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)));<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee2</span>(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-number">4000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>)));<br>        hashSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee2</span>(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-number">4000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>)));<br>        <span class="hljs-keyword">for</span> (Object o : hashSet) &#123;<br>            System.out.println(o);<br>        &#125;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee2</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-keyword">private</span> MyDate birthday;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">Employee2</span> <span class="hljs-variable">employee2</span> <span class="hljs-operator">=</span> (Employee2) o;<br>        <span class="hljs-keyword">return</span> Objects.equals(getName(), employee2.getName()) &amp;&amp; Objects.equals(getBirthday(), employee2.getBirthday());<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Objects.hash(getName(), getBirthday());<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Employee&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, sal=&quot;</span> + sal +<br>                <span class="hljs-string">&quot;, birthday=&quot;</span> + birthday +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee2</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> sal, MyDate birthday)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>        <span class="hljs-built_in">this</span>.birthday = birthday;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSal</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> sal;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSal</span><span class="hljs-params">(<span class="hljs-type">double</span> sal)</span> &#123;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> MyDate <span class="hljs-title function_">getBirthday</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> birthday;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBirthday</span><span class="hljs-params">(MyDate birthday)</span> &#123;<br>        <span class="hljs-built_in">this</span>.birthday = birthday;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDate</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> year;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> month;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> day;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-type">MyDate</span> <span class="hljs-variable">myDate</span> <span class="hljs-operator">=</span> (MyDate) o;<br>        <span class="hljs-keyword">return</span> getYear() == myDate.getYear() &amp;&amp; getMonth() == myDate.getMonth() &amp;&amp; getDay() == myDate.getDay();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Objects.hash(getYear(), getMonth(), getDay());<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> year + <span class="hljs-string">&quot;-&quot;</span> + month + <span class="hljs-string">&quot;-&quot;</span> + day;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getYear</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> year;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setYear</span><span class="hljs-params">(<span class="hljs-type">int</span> year)</span> &#123;<br>        <span class="hljs-built_in">this</span>.year = year;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMonth</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> month;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMonth</span><span class="hljs-params">(<span class="hljs-type">int</span> month)</span> &#123;<br>        <span class="hljs-built_in">this</span>.month = month;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDay</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> day;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDay</span><span class="hljs-params">(<span class="hljs-type">int</span> day)</span> &#123;<br>        <span class="hljs-built_in">this</span>.day = day;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyDate</span><span class="hljs-params">(<span class="hljs-type">int</span> year, <span class="hljs-type">int</span> month, <span class="hljs-type">int</span> day)</span> &#123;<br>        <span class="hljs-built_in">this</span>.year = year;<br>        <span class="hljs-built_in">this</span>.month = month;<br>        <span class="hljs-built_in">this</span>.day = day;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="9-LinkedHashSet"><a href="#9-LinkedHashSet" class="headerlink" title="9.LinkedHashSet"></a>9.LinkedHashSet</h2><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304094503016.png" srcset="/img/loading.gif" lazyload alt="image-20230304094503016" style="zoom:50%;" />

<h3 id="基本介绍-3"><a href="#基本介绍-3" class="headerlink" title="基本介绍"></a>基本介绍</h3><ol>
<li>LinkedHashSet是<strong>HashSet的子类</strong></li>
<li>LinkedHashSet 底层是一个LinkedHashMap，底层维护了一个<strong>数组＋双向链表</strong></li>
<li>LinkedHashSet 根据元素的 hashCode 值来决定元素的存储位置，同时使用链表维护元素的次序，这使得元素看起来是以插入顺序保存的。</li>
<li>LinkedHashSet 不允许添重复元素</li>
</ol>
<h3 id="底层机制"><a href="#底层机制" class="headerlink" title="底层机制"></a>底层机制</h3><p><strong>说明：</strong></p>
<ol>
<li><p>在LinkedHastSet 中维护了一个<strong>hash表和双向链表</strong> （LinkedHashSet有<strong>head</strong>和 <strong>tail</strong>）</p>
</li>
<li><p>每一个节点有pre和next属性，这样可以形成双向链表3）</p>
</li>
<li><p>在添加一个元素时，先求hash值，再求索引．，确定该元素在hashtable的位置，然后将添加的元素加入到双向链表（如果已经存在，不添加［原则和hashset一样］）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">tail.next ＝ newElement<span class="hljs-comment">//简单指定</span><br>newElement.pre =<span class="hljs-type">tail</span><br><span class="hljs-variable">tail</span> <span class="hljs-operator">=</span>newEelment；<br></code></pre></td></tr></table></figure>
</li>
<li><p>这样的话，我们遍历LinkedHashSet也能确保<strong>插入顺序和遍历顺序一致</strong></p>
</li>
</ol>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>(); <span class="hljs-comment">//①</span><br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;AA&quot;</span>)); <span class="hljs-comment">//②</span><br>set.add(<span class="hljs-number">456</span>); <span class="hljs-comment">//③</span><br>set.add(<span class="hljs-number">456</span>); <span class="hljs-comment">//④</span><br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Customer</span>(<span class="hljs-string">&quot;刘&quot;</span>,<span class="hljs-number">1001</span>));<br>set.add(<span class="hljs-number">123</span>);<br>set.add(<span class="hljs-string">&quot;HSP&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;set=&quot;</span>+set);<br></code></pre></td></tr></table></figure>

<p>①看debug可知，LinkedHashSet底层维护的是LinkedHashMap（HashMap的子类）</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304100604329.png" srcset="/img/loading.gif" lazyload alt="image-20230304100604329" style="zoom:50%;" />

<p>②第一次添加，直接将 数组table扩容到16，存放的节点类型是<strong>LinkedHashMap$Entry</strong><br><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304102751204.png" srcset="/img/loading.gif" lazyload alt="image-20230304102751204" style="zoom:50%;" /></p>
<p>数组是 <strong>HashMap$Node[]</strong> 存放的元素&#x2F;数据时 <strong>LinkedHashMap$Entry</strong> 类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Entry 继承了 HashMap  //该继承关系是在内部类完成</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Entry</span>&lt;K,V&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HashMap</span>.Node&lt;K,V&gt; &#123;<br>    Entry&lt;K,V&gt; before, after;<br>    Entry(<span class="hljs-type">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;<br>        <span class="hljs-built_in">super</span>(hash, key, value, next);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>③第二次添加，456before指向AA，AA的after指向456.</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304103408044.png" srcset="/img/loading.gif" lazyload alt="image-20230304103408044" style="zoom:50%;" />

<p>​	map的head指向AA，tail指向456.</p>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230304103824737.png" srcset="/img/loading.gif" lazyload alt="image-20230304103824737" style="zoom:50%;" />



<p>④添加重复数据，实际上HashSet没有区别，一样调用map.put()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    <span class="hljs-keyword">return</span> map.put(e, PRESENT)==<span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="10-Map接口"><a href="#10-Map接口" class="headerlink" title="10.Map接口"></a>10.Map接口</h2><p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230227180716337.png" srcset="/img/loading.gif" lazyload alt="image-20230227180716337"></p>
<p>set的key为输进去的对象，value为PRESENT（常量）。</p>
<p>map则不同。</p>
<h3 id="JDK8的MAP特点"><a href="#JDK8的MAP特点" class="headerlink" title="JDK8的MAP特点"></a>JDK8的MAP特点</h3><ol>
<li><p>Map与Collection并列存在。用于<strong>保存具有映射关系</strong>的数据：<strong>Key-Value</strong>（双列元素）</p>
</li>
<li><p>Map中的key和 value 可以是任何引用类型的数据，会封装到HashMap＄Node</p>
<p>对象中</p>
</li>
<li><p>Map中的<strong>key不允许重复</strong>（原因和HashSet 一样，前面分析过源码）</p>
<p>当有相同的key，等价于替换（新替旧）。</p>
</li>
<li><p>Map中的<strong>value 可以重复</strong></p>
</li>
<li><p>Map的key <strong>可以为 null，但只能有一个</strong>；value 可以为null，可以有多个.</p>
</li>
<li><p>常用String类作为Map的 key （其他的类型也可以）</p>
</li>
<li><p>key 和 value 之间存在单向一对一关系，即通过指定的key 总能找到对应的 value</p>
</li>
<li><p>Map存放数据的key-value示意图，一对 k-v是放在一个Node中的。</p>
<p>又因为Node 实现了 Entry 接口，有些书上也说 一对k-v就是一个Entry。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>&lt;K,V&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Map</span>.Entry&lt;K,V&gt; &#123;<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> hash;<br>    <span class="hljs-keyword">final</span> K key;<br>    V value;<br>    Node&lt;K,V&gt; next;<br><br>    Node(<span class="hljs-type">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;<br>        <span class="hljs-built_in">this</span>.hash = hash;<br>        <span class="hljs-built_in">this</span>.key = key;<br>        <span class="hljs-built_in">this</span>.value = value;<br>        <span class="hljs-built_in">this</span>.next = next;<br>    &#125;<br></code></pre></td></tr></table></figure>

<ol>
<li><p>k-v 最后是 HashMap＄Node node ＝ newNode（hash， key， value， null）</p>
</li>
<li><p>k-v 为了方便程序员的遍历，还会 创建 EntrySet 集合，该集合存放的元素的类型 Entry，而一个Entry对象就有k，v  EntrySet＜Entry＜K,V＞＞ </p>
<p>即： transient Set＜Map.Entry＜K,V＞＞ entrySet；</p>
</li>
<li><p>entrySet 中，定义的类型是 Map.Entry，但是实际上存放的还是 HashMap＄Node</p>
<blockquote>
<p><em>entrySet() 方法返回映射中包含的映射的 Set 视图</em></p>
</blockquote>
</li>
<li><p>当把HashMap$Node 对象存放到entrySet 就方便我们遍历。因为Map.Entry提供了重要方法：K getKey();  V getValue();</p>
</li>
</ol>
</li>
</ol>
<img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230305120023477.png" srcset="/img/loading.gif" lazyload alt="image-20230305120023477" style="zoom:50%;" />



<p>案例(1-7)：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//接口实现类的特点，使用实现类HashMap</span><br><span class="hljs-comment">//1.Map与Collection并列存在。用于保存具有映射关系的数据：Key-Value（双列元素）</span><br><span class="hljs-comment">//2.Map中的key和 value 可以是任何引用类型的数据，会封装到HashMap＄Node对象中（详见于debug）</span><br><span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>map.put(<span class="hljs-string">&quot;no1&quot;</span>, <span class="hljs-string">&quot;韩顺平&quot;</span>); <span class="hljs-comment">//k-v</span><br>map.put(<span class="hljs-string">&quot;no2&quot;</span>, <span class="hljs-string">&quot;张无忌&quot;</span>); <span class="hljs-comment">//k-v</span><br>System.out.println(map); <span class="hljs-comment">//&#123;no2=张无忌, no1=张无忌&#125;  ，输出顺序和加入顺序不同</span><br><span class="hljs-comment">//3.Map中的key不允许重复（原因和HashSet 一样，前面分析过源码）</span><br>map.put(<span class="hljs-string">&quot;no1&quot;</span>, <span class="hljs-string">&quot;张无忌&quot;</span>); <span class="hljs-comment">//key重复，新值替换旧值</span><br>System.out.println(map); <span class="hljs-comment">//输出&#123;no2=张无忌, no1=张无忌&#125;</span><br><span class="hljs-comment">//4.Map中的value 可以重复</span><br>map.put(<span class="hljs-string">&quot;no3&quot;</span>, <span class="hljs-string">&quot;张无忌&quot;</span>); <span class="hljs-comment">//key不同，value相同，也可以存放</span><br>System.out.println(map); <span class="hljs-comment">//&#123;no2=张无忌, no1=张无忌, no3=张无忌&#125;</span><br><span class="hljs-comment">//5.Map的key 可以为 null，但只能有一个</span><br><span class="hljs-comment">//      value 为null，可以多个.</span><br>map.put(<span class="hljs-literal">null</span>,<span class="hljs-literal">null</span>);<br>map.put(<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;abc&quot;</span>); <span class="hljs-comment">//替换</span><br>map.put(<span class="hljs-string">&quot;no4&quot;</span>,<span class="hljs-literal">null</span>);<br>map.put(<span class="hljs-string">&quot;no5&quot;</span>,<span class="hljs-literal">null</span>);<br>System.out.println(map);<br><span class="hljs-comment">//&#123;no2=张无忌, null=abc, no1=张无忌, no4=null, no3=张无忌, no5=null&#125;</span><br><span class="hljs-comment">//6.常用String类作为Map的 key （其他的类型也可以）</span><br>map.put(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;赵敏&quot;</span>);<br>map.put(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>(),<span class="hljs-string">&quot;金毛狮王&quot;</span>);<br>System.out.println(map);<br><span class="hljs-comment">//7.key 和 value 之间存在单向一对一关系，即通过指定的key 总能找到对应的 value</span><br><span class="hljs-comment">//通过get方法，传入key，会返回对应的value</span><br>System.out.println(map.get(<span class="hljs-string">&quot;no2&quot;</span>)); <span class="hljs-comment">//张无忌</span><br></code></pre></td></tr></table></figure>



<p>案例(8):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>map.put(<span class="hljs-string">&quot;no1&quot;</span>, <span class="hljs-string">&quot;韩顺平&quot;</span>); <span class="hljs-comment">//k-v</span><br>map.put(<span class="hljs-string">&quot;no2&quot;</span>, <span class="hljs-string">&quot;张无忌&quot;</span>); <span class="hljs-comment">//k-v</span><br><span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> map.entrySet();<br>System.out.println(set.getClass());<br><span class="hljs-keyword">for</span> (Object obj: set)&#123;<br>    <span class="hljs-comment">//先做一个向下转型</span><br>    Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> (Map.Entry) obj;<br>    System.out.println(entry.getKey()+<span class="hljs-string">&quot;-&quot;</span>+entry.getValue());<br>    <span class="hljs-comment">//输出：</span><br>    <span class="hljs-comment">//no2-张无忌</span><br>    <span class="hljs-comment">//no1-韩顺平</span><br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="Map接口常用方法"><a href="#Map接口常用方法" class="headerlink" title="Map接口常用方法"></a>Map接口常用方法</h3><p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230305031504111.png" srcset="/img/loading.gif" lazyload alt="image-20230305031504111"></p>
<ol>
<li>put:添加</li>
<li>remove:根据键删除映射关系 </li>
<li>get:根据键获取值</li>
<li>size:获取元素个数 </li>
<li>isEmpty:判断个数是否为0</li>
<li>clear:清除</li>
<li>containsKey:查找键是否存在</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java">        <span class="hljs-comment">//Map接口常用方法</span><br><span class="hljs-comment">//        1.  put:添加</span><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-string">&quot;邓超&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>(<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-number">100</span>));<br>        map.put(<span class="hljs-string">&quot;邓超&quot;</span>,<span class="hljs-string">&quot;孙俪&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;王宝强&quot;</span>,<span class="hljs-string">&quot;马蓉&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;宋喆&quot;</span>,<span class="hljs-string">&quot;马蓉&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;刘令博&quot;</span>,<span class="hljs-literal">null</span>);<br>        map.put(<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;刘亦菲&quot;</span>);<br>        map.put(<span class="hljs-string">&quot;鹿晗&quot;</span>,<span class="hljs-string">&quot;关晓婷&quot;</span>);<br>        System.out.println(map);<br>        <span class="hljs-comment">//&#123;邓超=孙俪, 宋喆=马蓉, 刘令博=null, null=刘亦菲, 王宝强=马蓉, 鹿晗=关晓婷&#125;</span><br><br><span class="hljs-comment">//        2. remove:根据键删除映射关系</span><br>        map.remove(<span class="hljs-literal">null</span>);<br>        System.out.println(map); <span class="hljs-comment">//&#123;邓超=孙俪, 宋喆=马蓉, 刘令博=null, 王宝强=马蓉, 鹿晗=关晓婷&#125;</span><br><span class="hljs-comment">//        3. get:根据键获取值</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">val</span> <span class="hljs-operator">=</span> map.get(<span class="hljs-string">&quot;鹿晗&quot;</span>);<br>        System.out.println(val); <span class="hljs-comment">//关晓彤</span><br><span class="hljs-comment">//        4. size:获取元素个数</span><br>        System.out.println(map.size()); <span class="hljs-comment">//5</span><br><span class="hljs-comment">//        5. isEmpty:判断个数是否为0</span><br>        System.out.println(map.isEmpty()); <span class="hljs-comment">//false</span><br><span class="hljs-comment">//        6. clear:清除</span><br>        map.clear();<br>        System.out.println(map); <span class="hljs-comment">//&#123;&#125;</span><br><span class="hljs-comment">//        7. containsKey:查找键是否存在</span><br>        System.out.println(map.containsKey(<span class="hljs-string">&quot;hsp&quot;</span>)); <span class="hljs-comment">//false</span><br>        map.put(<span class="hljs-string">&quot;hsp&quot;</span>,<span class="hljs-number">123</span>);<br>        System.out.println(map.containsKey(<span class="hljs-string">&quot;hsp&quot;</span>)); <span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure>



<h3 id="Map接口遍历方法"><a href="#Map接口遍历方法" class="headerlink" title="Map接口遍历方法"></a>Map接口遍历方法</h3><ol>
<li>containsKey:查找键是否存在</li>
<li>keySet:获取所有的键 </li>
<li>entrySet:获取所有关系k-v</li>
<li>values:获取所有的值</li>
</ol>
<p>几种遍历方法：</p>
<p>第一种：先取出所有的Key，通过Key取出对应的Value</p>
<p>第二种：取出所有的value</p>
<p>第三种：通过EntrySet 来获取K-V</p>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>    map.put(<span class="hljs-string">&quot;邓超&quot;</span>, <span class="hljs-string">&quot;孙俪&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;王宝强&quot;</span>, <span class="hljs-string">&quot;马蓉&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;宋喆&quot;</span>, <span class="hljs-string">&quot;马蓉&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;刘令博&quot;</span>, <span class="hljs-literal">null</span>);<br>    map.put(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;刘亦菲&quot;</span>);<br>    map.put(<span class="hljs-string">&quot;鹿晗&quot;</span>, <span class="hljs-string">&quot;关晓婷&quot;</span>);<br><br>    <span class="hljs-comment">//第一组：先取出所有的Key，通过Key取出对应的Value</span><br>    <span class="hljs-type">Set</span> <span class="hljs-variable">keyset</span> <span class="hljs-operator">=</span> map.keySet();<br>    <span class="hljs-comment">//1.增强for</span><br>    System.out.println(<span class="hljs-string">&quot;----第一钟方式----&quot;</span>);<br>    <span class="hljs-keyword">for</span> (Object key : keyset) &#123;<br>        System.out.println(key + <span class="hljs-string">&quot;-&quot;</span> + map.get(key));<br>    &#125;<br>    <span class="hljs-comment">//2.迭代器</span><br>    System.out.println(<span class="hljs-string">&quot;----第二钟方式----&quot;</span>);<br>    <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> keyset.iterator();<br>    <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> iterator.next();<br>        System.out.println(key + <span class="hljs-string">&quot;-&quot;</span> + map.get(key));<br>    &#125;<br><br>    <span class="hljs-comment">//第二组：取出所有的value</span><br>    <span class="hljs-type">Collection</span> <span class="hljs-variable">values</span> <span class="hljs-operator">=</span> map.values();<br>    <span class="hljs-comment">//这里可以使用Collection使用的遍历（两种）：增强for、迭代器（无法用get()所以不能使用普通for）</span><br>    <span class="hljs-comment">//例如：增强for</span><br>    System.out.println(<span class="hljs-string">&quot;----取出所有的value----&quot;</span>);<br>    <span class="hljs-keyword">for</span> (Object value : values) &#123;<br>        System.out.println(value);<br>    &#125;<br><br>    <span class="hljs-comment">//第三组：通过EntrySet 来获取K-V</span><br>    <span class="hljs-type">Set</span> <span class="hljs-variable">entrySet</span> <span class="hljs-operator">=</span> map.entrySet(); <span class="hljs-comment">//EntrySet&lt;Map.Entry&lt;K,V&gt;&gt;</span><br>    <span class="hljs-comment">//（1）增强for</span><br>    System.out.println(<span class="hljs-string">&quot;----使用EntrySet的增强for----&quot;</span>);<br>    <span class="hljs-keyword">for</span> (Object entry : entrySet) &#123;<br>        <span class="hljs-comment">//将entry转成Map.Entry</span><br>        Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (Map.Entry) entry;<br>        System.out.println(m.getKey()+<span class="hljs-string">&quot;-&quot;</span>+m.getValue());<br>    &#125;<br>    <span class="hljs-comment">//(2)迭代器</span><br>    System.out.println(<span class="hljs-string">&quot;----使用EntrySet的迭代器----&quot;</span>);<br>    <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator1</span> <span class="hljs-operator">=</span> entrySet.iterator();<br>    <span class="hljs-keyword">while</span> (iterator1.hasNext()) &#123;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> iterator1.next();<br>        <span class="hljs-comment">//向下转型 Map.Entry</span><br>        Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (Map.Entry) entry;<br>        System.out.println(m.getKey()+<span class="hljs-string">&quot;-&quot;</span>+m.getValue());<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>遍历的结果：</p>
<blockquote>
<p>邓超-孙俪<br>宋喆-马蓉<br>刘令博-null<br>null-刘亦菲<br>王宝强-马蓉<br>鹿晗-关晓婷</p>
</blockquote>
<h3 id="练习-5"><a href="#练习-5" class="headerlink" title="练习"></a>练习</h3><blockquote>
<p>MapExercise.java<br>使用HashMap添加3个员工对象，要求<br>键：员工id<br>值:员工对象</p>
<p>并遍历显示工资＞18000的员工（遍历方式最少两种）员工类：姓名、工资、员工id</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><span class="hljs-comment">//        使用HashMap添加3个员工对象，要求</span><br><span class="hljs-comment">//        键：员工id</span><br><span class="hljs-comment">//        值:员工对象</span><br><span class="hljs-comment">//        并遍历显示工资＞18000的员工（遍历方式最少两种）员工类：姓名、工资、员工id</span><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        map.put(<span class="hljs-number">100001</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-number">12000.0</span>,<span class="hljs-number">100001</span>));<br>        map.put(<span class="hljs-number">100002</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;john&quot;</span>,<span class="hljs-number">30000.0</span>,<span class="hljs-number">100001</span>));<br>        map.put(<span class="hljs-number">100003</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;pat&quot;</span>,<span class="hljs-number">10000.0</span>,<span class="hljs-number">100001</span>));<br>        map.put(<span class="hljs-number">100004</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;smith&quot;</span>,<span class="hljs-number">24000.0</span>,<span class="hljs-number">100001</span>));<br><br>        <span class="hljs-comment">//方法1：取出key  —— 使用keySet</span><br>        System.out.println(<span class="hljs-string">&quot;-----方法1keySet------&quot;</span>);<br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> map.keySet();<br>        <span class="hljs-keyword">for</span> (Object key : set) &#123;<br>            <span class="hljs-comment">//向下转型，获取value</span><br>            <span class="hljs-type">Employee</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> (Employee) map.get(key);<br>            <span class="hljs-keyword">if</span> (emp.getSal()&gt;<span class="hljs-number">18000</span>)&#123;<br>                System.out.println(emp);<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//方法2： 使用EntrySet ---迭代器</span><br>        System.out.println(<span class="hljs-string">&quot;-----方法2EntrySet ------&quot;</span>);<br>        <span class="hljs-type">Set</span> <span class="hljs-variable">entryset</span> <span class="hljs-operator">=</span> map.entrySet();<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> entryset.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (Map.Entry) iterator.next();<br>            <span class="hljs-comment">//通过entry 取得key和value</span><br>            <span class="hljs-type">Employee</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> (Employee) m.getValue();<br>            <span class="hljs-keyword">if</span> (emp.getSal()&gt;<span class="hljs-number">18000</span>)&#123;<br>                System.out.println(emp);<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> no;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Employee</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> sal, <span class="hljs-type">int</span> no)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.sal = sal;<br>        <span class="hljs-built_in">this</span>.no = no;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;姓名：&quot;</span>+name+<span class="hljs-string">&quot; 工资：&quot;</span>+sal +<span class="hljs-string">&quot; 员工id：&quot;</span>+no;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getSal</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> sal;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>数据被包裹了好几层。</p>
<p>先是K-V包裹在Node结点，再把Node包裹到EntrySet。</p>
<p>取出时，先取出Node，再取出employee，最后再取出employee中的数据。</p>
<h2 id="11-HashMap"><a href="#11-HashMap" class="headerlink" title="11.HashMap"></a>11.HashMap</h2><h3 id="HashMap小结"><a href="#HashMap小结" class="headerlink" title="HashMap小结"></a>HashMap小结</h3><ol>
<li><p>Map接口的常用实现类：<strong>HashMap、Hashtable和Properties</strong>。</p>
</li>
<li><p>HashMap是 Map 接口使用频率最高的实现类。</p>
</li>
<li><p>HashMap 是以key-val 对的方式来存储数据［案例 Entry］</p>
</li>
<li><p>key 不能重复，但是值可以重复，允许使用null键和null值。</p>
</li>
<li><p>如果添加相同的key，则会覆盖原来的key-val，等同于修改．</p>
<p>（key不会替换，val会替换）</p>
</li>
<li><p>与HashSet一样，不保证映射的顺序，因为底层是以hash表的方式来存储的．</p>
<p>（Jdk8 hashMap底层 数组+链表+红黑树）</p>
</li>
<li><p>HashMap没有实现同步，因此是线程不安全的（方法没有做同步互斥synchronized）</p>
</li>
</ol>
<h3 id="HashMap底层机制"><a href="#HashMap底层机制" class="headerlink" title="HashMap底层机制"></a>HashMap底层机制</h3><p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230305213233217.png" srcset="/img/loading.gif" lazyload alt="image-20230305213233217"></p>
<ol>
<li>（k，v） 是一个Node 实现了Map.Entry＜K，V＞，查看 HashMap的源码可以看到.</li>
<li>jdk7.0的hashmap 底层实现［数组＋链表］，jdk8.0 底层［数组＋链表＋红黑树］</li>
</ol>
<p><strong>⭐️结论</strong></p>
<p>1）HashMap底层维护了Node类型的数组table，默认为null</p>
<p>2）当创建对象时，将加载因子（loadfactor）初始化为0.75. （临界值）</p>
<p>3）当添加key-val时，通过<strong>key</strong>的哈希值得到在table的索引。然后判断<strong>该索引处是否有元素</strong></p>
<ul>
<li>如果没有元素直接添加。</li>
<li>如果该索引处有元素，继续判断该元素的key<strong>是否和准备加入的key相等</strong>。<ul>
<li>如果相等，则直接替换val；</li>
<li>如果不相等需要判断是树结构还是链表结构，做出相应处理。</li>
</ul>
</li>
<li>如果添加时发现容量不够，则需要扩容。</li>
</ul>
<p>4）第1次添加，则需要扩容table容量为16，临界值（threshold）为12.</p>
<p>5）以后再扩容，则需要扩容table容量为原来的2倍（32），临界值为原来的2倍，即24（32✖️0.75），依次类推． </p>
<p>6）在Java8中，如果一条链表的<strong>元素个数超过 TREEIFY THRESHOLD</strong>（默认是8），并<strong>且table的大小＞＝MIN TREEIFY_CAPACITY</strong>（默认64），就会进行树化（红黑树）</p>
<h3 id="HashMap源码解读"><a href="#HashMap源码解读" class="headerlink" title="HashMap源码解读"></a>HashMap源码解读</h3><p>（和前面HashSet区别不大）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">HashMap</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>(); <span class="hljs-comment">//①</span><br>map.put(<span class="hljs-string">&quot;java&quot;</span>,<span class="hljs-number">10</span>); <span class="hljs-comment">//ok     //②</span><br>map.put(<span class="hljs-string">&quot;php&quot;</span>,<span class="hljs-number">10</span>); <span class="hljs-comment">//ok</span><br>map.put(<span class="hljs-string">&quot;java&quot;</span>,<span class="hljs-number">20</span>); <span class="hljs-comment">//替换value //③</span><br></code></pre></td></tr></table></figure>

<p>① 执行构造器，初始化加载因子loadfactor（0.75）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">HashMap</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="hljs-comment">// all other fields defaulted</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>HashMap$Node[] table &#x3D;null;</p>
<p>②执行put，先装箱，再调用put()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> V <span class="hljs-title function_">put</span><span class="hljs-params">(K key, V value)</span> &#123;<br>    <span class="hljs-keyword">return</span> putVal(hash(key), key, value, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>hash()算法：计算key的哈希值，右移16位，按位异或</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hash</span><span class="hljs-params">(Object key)</span> &#123;<br>    <span class="hljs-type">int</span> h;<br>    <span class="hljs-keyword">return</span> (key == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="hljs-number">16</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>重点的putVal()方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent,</span><br><span class="hljs-params">               <span class="hljs-type">boolean</span> evict)</span> &#123;<br>    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="hljs-type">int</span> n, i;<br>    <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>) <span class="hljs-comment">//判断是否为空，空的话进行扩容（见resize())</span><br>        n = (tab = resize()).length; <span class="hljs-comment">//n=16</span><br>    <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == <span class="hljs-literal">null</span>) <span class="hljs-comment">//取出hash值对应的table的索引位置的Node，如果为null，就直接把加入的k-v创建成一个Node，加入该位置</span><br>        tab[i] = newNode(hash, key, value, <span class="hljs-literal">null</span>); <span class="hljs-comment">//为空，所以创建一个新的结点，挂在这个位置上（案例为3）</span><br>    <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">//不进入，省略</span><br>    &#125;<br>    ++modCount;  <br>    <span class="hljs-keyword">if</span> (++size &gt; threshold) <span class="hljs-comment">//判断size是否到临界值12</span><br>        resize(); <span class="hljs-comment">//如果大于，扩容</span><br>    afterNodeInsertion(evict); <br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Resize()方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;<br>    Node&lt;K,V&gt;[] oldTab = table;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldCap</span> <span class="hljs-operator">=</span> (oldTab == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : oldTab.length;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldThr</span> <span class="hljs-operator">=</span> threshold;  <br>    <span class="hljs-type">int</span> newCap, newThr = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (oldCap &gt; <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">//不进入</span><br>        <span class="hljs-keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;<br>            threshold = Integer.MAX_VALUE;<br>            <span class="hljs-keyword">return</span> oldTab;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="hljs-number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;<br>                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)<br>            newThr = oldThr &lt;&lt; <span class="hljs-number">1</span>; <span class="hljs-comment">// double threshold</span><br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oldThr &gt; <span class="hljs-number">0</span>) <span class="hljs-comment">// 不进入</span><br>        newCap = oldThr;<br>    <span class="hljs-keyword">else</span> &#123;               <span class="hljs-comment">// 进入，初始化</span><br>        newCap = DEFAULT_INITIAL_CAPACITY; <span class="hljs-comment">//默认16</span><br>        newThr = (<span class="hljs-type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (newThr == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-type">float</span> <span class="hljs-variable">ft</span> <span class="hljs-operator">=</span> (<span class="hljs-type">float</span>)newCap * loadFactor;<br>        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="hljs-type">float</span>)MAXIMUM_CAPACITY ?<br>                  (<span class="hljs-type">int</span>)ft : Integer.MAX_VALUE);<br>    &#125;<br>    threshold = newThr;<br>    <span class="hljs-meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span><br>    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[newCap]; <span class="hljs-comment">//第一次创建的核心代码 </span><br>    table = newTab; <span class="hljs-comment">//table从null扩容为16</span><br>    <span class="hljs-comment">/*** 以下省略 ***/</span><br></code></pre></td></tr></table></figure>

<p>③添加重复值，替换</p>
<p>直接看putVal():</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">final</span> V <span class="hljs-title function_">putVal</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">boolean</span> onlyIfAbsent,</span><br><span class="hljs-params">               <span class="hljs-type">boolean</span> evict)</span> &#123;<br>    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="hljs-type">int</span> n, i;<br>    <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-literal">null</span> || (n = tab.length) == <span class="hljs-number">0</span>)<br>        n = (tab = resize()).length;<br>    <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == <span class="hljs-literal">null</span>)<br>        tab[i] = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>    <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">//由于hash计算table对应的索引位置不为空，进入该项</span><br>        Node&lt;K,V&gt; e; K k; <span class="hljs-comment">//新建Node e;k=&quot;java&quot;</span><br>      <span class="hljs-comment">//如果table的索引位置的key的hash和新的key的hash值相同，</span><br>      <span class="hljs-comment">//并且满足（table现有的节点的key和准备添加的key是同一个对象） || equals返回真），就认为不能加入新的k-v</span><br>        <span class="hljs-keyword">if</span> (p.hash == hash &amp;&amp;<br>            ((k = p.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<br>            e = p; <span class="hljs-comment">// 新建的e指向p</span><br>      	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p <span class="hljs-keyword">instanceof</span> TreeNode) <span class="hljs-comment">//判断当前的table已有的Node是否为红黑树，如果是，按照红黑树的方式添加</span><br>                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="hljs-built_in">this</span>, tab, hash, key, value);<br>            <span class="hljs-keyword">else</span> &#123;  <br>              <span class="hljs-comment">//如果找到的节点，后面是链表，就循环比较（可见之前的详细分析）</span><br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">binCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; ; ++binCount) &#123;<br>                    <span class="hljs-keyword">if</span> ((e = p.next) == <span class="hljs-literal">null</span>) &#123;<br>                        p.next = newNode(hash, key, value, <span class="hljs-literal">null</span>);<br>                        <span class="hljs-keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="hljs-number">1</span>) <span class="hljs-comment">// -1 for 1st</span><br>                            treeifyBin(tab, hash);<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (e.hash == hash &amp;&amp;<br>                        ((k = e.key) == key || (key != <span class="hljs-literal">null</span> &amp;&amp; key.equals(k))))<br>                        <span class="hljs-keyword">break</span>;<br>                    p = e;<br>                &#125;<br>            &#125;<br>        <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">//e不为空</span><br>            <span class="hljs-type">V</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> e.value;  <span class="hljs-comment">//oldValue 指向第一个java的value（10）</span><br>            <span class="hljs-keyword">if</span> (!onlyIfAbsent || oldValue == <span class="hljs-literal">null</span>)  <span class="hljs-comment">//onlyIfAbsent为false，所以进入该条件</span><br>                e.value = value; <span class="hljs-comment">//替换，e的value指向新的value（20）</span><br>            afterNodeAccess(e);<br>            <span class="hljs-keyword">return</span> oldValue;<br>        &#125;<br>    &#125;<br>    ++modCount;<br>    <span class="hljs-keyword">if</span> (++size &gt; threshold)<br>        resize();<br>    afterNodeInsertion(evict);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>“java”的值替换为20.</p>
<h2 id="12-Hashtable-amp-Properties"><a href="#12-Hashtable-amp-Properties" class="headerlink" title="12.Hashtable&amp;Properties"></a>12.Hashtable&amp;Properties</h2><h3 id="1）Hashtable"><a href="#1）Hashtable" class="headerlink" title="1）Hashtable"></a>1）Hashtable</h3><h4 id="基本介绍-4"><a href="#基本介绍-4" class="headerlink" title="基本介绍"></a>基本介绍</h4><ol>
<li>存放的元素是键值对：即K-V</li>
<li>hashtable的<strong>键和值都不能为null</strong>，否则会抛出NullPointerException</li>
<li>hashTable 使用方法基本上和HashMap一样</li>
<li>hashTable <strong>是线程安全</strong>的(synchronized)，hashMap 是线程不安全的</li>
</ol>
<p><strong>HashMap和Hashtable的比较：</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>版本</th>
<th>线程安全（同步）</th>
<th>效率</th>
<th>允许null键null值</th>
</tr>
</thead>
<tbody><tr>
<td>HashMap</td>
<td>1.2</td>
<td>不安全</td>
<td>高</td>
<td>可以</td>
</tr>
<tr>
<td>Hashtable</td>
<td>1.0</td>
<td>安全</td>
<td>较低</td>
<td>不可以</td>
</tr>
</tbody></table>
<h4 id="应用案例"><a href="#应用案例" class="headerlink" title="应用案例"></a>应用案例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Hashtable</span> <span class="hljs-variable">table</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hashtable</span>();<br>table.put(<span class="hljs-string">&quot;john&quot;</span>,<span class="hljs-number">100</span>); <span class="hljs-comment">//ok</span><br>table.put(<span class="hljs-literal">null</span>,<span class="hljs-number">100</span>); <span class="hljs-comment">//抛出空指针异常</span><br>table.put(<span class="hljs-string">&quot;john&quot;</span>,<span class="hljs-literal">null</span>); <span class="hljs-comment">//抛出空指针异常</span><br>table.put(<span class="hljs-string">&quot;lucy&quot;</span>,<span class="hljs-number">100</span>); <span class="hljs-comment">//ok</span><br>table.put(<span class="hljs-string">&quot;lic&quot;</span>,<span class="hljs-number">100</span>); <span class="hljs-comment">//ok</span><br>table.put(<span class="hljs-string">&quot;lic&quot;</span>,<span class="hljs-number">80</span>); <span class="hljs-comment">//替换</span><br><br><span class="hljs-comment">//简单说明一下Hashtable的底层</span><br><span class="hljs-comment">//1．底层有数组 Hashtable＄Entry［］ 初始化大小为11</span><br><span class="hljs-comment">//2．临界值 threshold 8＝11＊0.75</span><br><span class="hljs-comment">//3.按照自己的扩容机制进行扩容</span><br><span class="hljs-comment">//	执行 方法addEntry(int hash, K key, V value, int index) 将K-V 封装到Entry</span><br><span class="hljs-comment">//	当if (count &gt;= threshold)满足时，就进行扩容</span><br><span class="hljs-comment">//	按照int newCapacity = (oldCapacity &lt;&lt; 1) + 1; 的大小进行扩容</span><br></code></pre></td></tr></table></figure>

<p> addEntry分析：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addEntry</span><span class="hljs-params">(<span class="hljs-type">int</span> hash, K key, V value, <span class="hljs-type">int</span> index)</span> &#123;<br>    modCount++;<br><br>    Entry&lt;?,?&gt; tab[] = table;<br>    <span class="hljs-keyword">if</span> (count &gt;= threshold) &#123; <span class="hljs-comment">//是否到临界值，满足则进行扩容</span><br>        <span class="hljs-comment">// Rehash the table if the threshold is exceeded</span><br>        rehash(); <span class="hljs-comment">//调用rehash() [详细见rehash分析]</span><br><br>        tab = table;<br>        hash = key.hashCode();<br>        index = (hash &amp; <span class="hljs-number">0x7FFFFFFF</span>) % tab.length;<br>    &#125;<br><br>    <span class="hljs-comment">// Creates the new entry.</span><br>    <span class="hljs-meta">@SuppressWarnings(&quot;unchecked&quot;)</span><br>    Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) tab[index];<br>    tab[index] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Entry</span>&lt;&gt;(hash, key, value, e);<br>    count++;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Rehash()分析:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rehash</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">oldCapacity</span> <span class="hljs-operator">=</span> table.length; <span class="hljs-comment">//</span><br>    Entry&lt;?,?&gt;[] oldMap = table;<br><br>    <span class="hljs-comment">// overflow-conscious code</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">newCapacity</span> <span class="hljs-operator">=</span> (oldCapacity &lt;&lt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>; <span class="hljs-comment">//oldCapacity × 2 + 1 = 11*2+1  （2倍+1的大小扩容）</span><br>    <span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">if</span> (oldCapacity == MAX_ARRAY_SIZE)<br>            <span class="hljs-comment">// Keep running with MAX_ARRAY_SIZE buckets</span><br>            <span class="hljs-keyword">return</span>;<br>        newCapacity = MAX_ARRAY_SIZE;<br>    &#125;<br>    Entry&lt;?,?&gt;[] newMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Entry</span>&lt;?,?&gt;[newCapacity];<br><br>    modCount++;<br>    threshold = (<span class="hljs-type">int</span>)Math.min(newCapacity * loadFactor, MAX_ARRAY_SIZE + <span class="hljs-number">1</span>);<br>    table = newMap;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> oldCapacity ; i-- &gt; <span class="hljs-number">0</span> ;) &#123;<br>        <span class="hljs-keyword">for</span> (Entry&lt;K,V&gt; old = (Entry&lt;K,V&gt;)oldMap[i] ; old != <span class="hljs-literal">null</span> ; ) &#123;<br>            Entry&lt;K,V&gt; e = old;<br>            old = old.next;<br><br>            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> (e.hash &amp; <span class="hljs-number">0x7FFFFFFF</span>) % newCapacity;<br>            e.next = (Entry&lt;K,V&gt;)newMap[index];<br>            newMap[index] = e;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="2）properties"><a href="#2）properties" class="headerlink" title="2）properties"></a>2）properties</h3><h4 id="基本介绍-5"><a href="#基本介绍-5" class="headerlink" title="基本介绍"></a>基本介绍</h4><ol>
<li><p>Properties类继承自Hashtable类并且实现了Map接口，也是使用一种<strong>键值对的</strong>形式来保存数据。</p>
</li>
<li><p>他的使用特点和Hashtable类似</p>
</li>
<li><p>Properties 还可以用于 从 xxx.properties 文件中，加载数据到Properties类对象，并进行读取和修改</p>
</li>
<li><p>说明：工作后 xxx.properties 文件通常作为配置文件，这个知识点在IO流举例，有兴趣可先看文章</p>
<blockquote>
<p>cnblogs.com&#x2F;xudong-bupt&#x2F;p&#x2F;3758136.html</p>
</blockquote>
</li>
</ol>
<h4 id="常用方法及案例"><a href="#常用方法及案例" class="headerlink" title="常用方法及案例"></a>常用方法及案例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br><span class="hljs-comment">//properties 继承了 Hashtable；可以通过k-v存放数据，但key和value都不能为null</span><br><br><span class="hljs-comment">//增加</span><br>properties.put(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-number">100</span>); <span class="hljs-comment">//k-v</span><br>properties.put(<span class="hljs-string">&quot;lucy&quot;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-comment">// properties.put(null,100); //抛出空指针异常</span><br><span class="hljs-comment">// properties.put(&quot;john&quot;,null); //抛出空指针异常</span><br>properties.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">100</span>);<br>properties.put(<span class="hljs-string">&quot;lic&quot;</span>, <span class="hljs-number">80</span>); <span class="hljs-comment">//替换</span><br>System.out.println(<span class="hljs-string">&quot;properties=&quot;</span> + properties);<br><span class="hljs-comment">//输出：properties=&#123;john=100, lic=80, lucy=100&#125;</span><br><br><span class="hljs-comment">//通过key获取对应值</span><br>System.out.println(properties.get(<span class="hljs-string">&quot;lic&quot;</span>)); <span class="hljs-comment">//80</span><br><br><span class="hljs-comment">//删除</span><br>properties.remove(<span class="hljs-string">&quot;lic&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;properties=&quot;</span> + properties);<br><span class="hljs-comment">//输出：properties=&#123;john=100, lucy=100&#125;</span><br><br><span class="hljs-comment">//修改</span><br>properties.put(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-string">&quot;约翰&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;properties=&quot;</span> + properties);<br><span class="hljs-comment">//输出：properties=&#123;john=约翰, lucy=100&#125;</span><br></code></pre></td></tr></table></figure>



<h2 id="13-TreeSet-amp-TreeMap"><a href="#13-TreeSet-amp-TreeMap" class="headerlink" title="13.TreeSet&amp;TreeMap"></a>13.TreeSet&amp;TreeMap</h2><h3 id="1）TreeSet"><a href="#1）TreeSet" class="headerlink" title="1）TreeSet"></a>1）TreeSet</h3><ol>
<li>当我们使用无参构造器，创造TreeSet时，仍然是无序的</li>
<li>希望添加的元素，按照字符串大小来排序</li>
<li>使用treeset提供的一个构造器，可以传入一个比较器（匿名内部类），并指定排序规则</li>
</ol>
<p>案例分析：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1.当我们使用无参构造器，创造TreeSet时，仍然是无序的</span><br><span class="hljs-comment">//2.希望添加的元素，按照字符串大小来排序</span><br><span class="hljs-comment">//3.使用treeset提供的一个构造器，可以传入一个比较器（匿名内部类）</span><br><span class="hljs-comment">//  并指定排序规则</span><br><br><span class="hljs-type">TreeSet</span> <span class="hljs-variable">treeSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<span class="hljs-comment">//①</span><br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>  <span class="hljs-keyword">return</span> ((String)o1).compareTo((String)o2);<br>&#125;<br>&#125;);<br>treeSet.add(<span class="hljs-string">&quot;jack&quot;</span>);<br>treeSet.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>treeSet.add(<span class="hljs-string">&quot;sp&quot;</span>);<br>treeSet.add(<span class="hljs-string">&quot;a&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;treeSet=&quot;</span>+ treeSet);<br></code></pre></td></tr></table></figure>

<p>①.构造器把传入的比较器对象，赋给了 TreeSet的底层 TreeMap的属性this.comparator</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//构造器</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">TreeSet</span><span class="hljs-params">(Comparator&lt;? <span class="hljs-built_in">super</span> E&gt; comparator)</span> &#123;<br>  <span class="hljs-built_in">this</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;(comparator));<br>&#125;<br></code></pre></td></tr></table></figure>

<p>②添加jack，调用add()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> &#123;<br>    <span class="hljs-keyword">return</span> m.put(e, PRESENT)==<span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>再调用put，发现调用的是TreeMap下的put。</p>
<p>③.在调用treeSet.add(“tom”); 底层会执行（进行比较）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java">Comparator&lt;? <span class="hljs-built_in">super</span> K&gt; cpr = comparator;<br><span class="hljs-keyword">if</span> (cpr != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">//cpr就是我们传进去的匿名内部类（对象）</span><br>    <span class="hljs-keyword">do</span> &#123;<br>        parent = t;<br>      <span class="hljs-comment">//动态绑定到我们的匿名内部类（对象）compare</span><br>        cmp = cpr.compare(key, t.key);<br>        <span class="hljs-keyword">if</span> (cmp &lt; <span class="hljs-number">0</span>)<br>            t = t.left;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmp &gt; <span class="hljs-number">0</span>)<br>            t = t.right;<br>        <span class="hljs-keyword">else</span> <span class="hljs-comment">//如果相等，即返回0，这个key就不加入</span><br>            <span class="hljs-keyword">return</span> t.setValue(value);<br>    &#125; <span class="hljs-keyword">while</span> (t != <span class="hljs-literal">null</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>若想改变排序规则，例如按照长度排序，修改匿名内部类的return即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">TreeSet</span> <span class="hljs-variable">treeSet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>	<span class="hljs-keyword">return</span> ((String)o1).length()-((String)o2).length();<br>&#125;<br>&#125;);<br></code></pre></td></tr></table></figure>



<h3 id="2）TreeMap"><a href="#2）TreeMap" class="headerlink" title="2）TreeMap"></a>2）TreeMap</h3><p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java">        <span class="hljs-comment">//默认的构造器，无序</span><br><span class="hljs-comment">//        TreeMap treeMap = new TreeMap();</span><br>        <span class="hljs-comment">//按照传入的k(String)的大小进行排序</span><br>        <span class="hljs-type">TreeMap</span> <span class="hljs-variable">treeMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123; <span class="hljs-comment">//①</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-keyword">return</span> ((String)o1).compareTo((String)o2);<br>            &#125;<br>        &#125;);<br>        treeMap.put(<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-string">&quot;杰克&quot;</span>); <span class="hljs-comment">//②</span><br>        treeMap.put(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-string">&quot;汤姆&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;kristina&quot;</span>,<span class="hljs-string">&quot;克瑞斯提诺&quot;</span>);<br>        treeMap.put(<span class="hljs-string">&quot;smith&quot;</span>,<span class="hljs-string">&quot;斯密斯&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;treemap=&quot;</span>+treeMap);<br></code></pre></td></tr></table></figure>

<p>①：构造器。把传入的实现了 Comparator接口的匿名内部类（对象），传给给TreeMap</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">TreeMap</span><span class="hljs-params">(Comparator&lt;? <span class="hljs-built_in">super</span> K&gt; comparator)</span> &#123;<br>    <span class="hljs-built_in">this</span>.comparator = comparator;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>②：调用put方法</p>
<p>第一次添加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">Entry&lt;K,V&gt; t = root; <span class="hljs-comment">//root为null</span><br><span class="hljs-keyword">if</span> (t == <span class="hljs-literal">null</span>) &#123;<br>    compare(key, key); <span class="hljs-comment">// type (and possibly null) check</span><br>  <span class="hljs-comment">//第一次添加的两个key是同一值，compare用于检查是否为空</span><br><br>    root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Entry</span>&lt;&gt;(key, value, <span class="hljs-literal">null</span>);<br>    size = <span class="hljs-number">1</span>;<br>    modCount++;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>以后添加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">Comparator&lt;? <span class="hljs-built_in">super</span> K&gt; cpr = comparator;<br><span class="hljs-keyword">if</span> (cpr != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">do</span> &#123; <span class="hljs-comment">//遍历所有key，给当前key找到适当位置</span><br>        parent = t;<br>        cmp = cpr.compare(key, t.key); <span class="hljs-comment">//动态绑定到我们的匿名内部类的compara</span><br>        <span class="hljs-keyword">if</span> (cmp &lt; <span class="hljs-number">0</span>)<br>            t = t.left;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmp &gt; <span class="hljs-number">0</span>)<br>            t = t.right;<br>        <span class="hljs-keyword">else</span> <span class="hljs-comment">//如果遍历过程中，发现准备添加的key和当前已有的key相等，就不添加</span><br>            <span class="hljs-keyword">return</span> t.setValue(value);<br>    &#125; <span class="hljs-keyword">while</span> (t != <span class="hljs-literal">null</span>);<br>&#125;<br></code></pre></td></tr></table></figure>





<h2 id="开发中如何选择集合实现类"><a href="#开发中如何选择集合实现类" class="headerlink" title="*开发中如何选择集合实现类"></a>*开发中如何选择集合实现类</h2><p>在开发中，选择什么集合实现类，主要取决于业务操作特点，然后根据集合实现类特性进行选择，分析如下：</p>
<ol>
<li>先判断存储的类型（一组对象或一组键值对）</li>
<li>**一组对象[单列]**：Collection接口<ul>
<li>允许重复:List<ul>
<li>增删多：LinkedList ［底层维护了一个双向链表］</li>
<li>改查多：ArrayList ［底层维护 Object类型的可变数组］</li>
</ul>
</li>
<li>不允许重复：Set<ul>
<li>无序：HashSet ［底层是HashMap，维护了一个哈希表 即（<strong>数组＋链表＋红黑树</strong>）］</li>
<li>排序：TreeSet</li>
<li>插入和取出顺序一致：LinkedHashSet，维护数组＋双向链表</li>
</ul>
</li>
</ul>
</li>
<li><strong>一组键值对</strong>：Map<ul>
<li>键无序:HashMap ［底层是：哈希表 jdk7:数组＋链表，jdk8:数组＋链表＋红黑树］</li>
<li>键排序：TreeMap</li>
<li>键插入和取出顺序一致:LinkedHashMap</li>
<li>读取文件 Properties</li>
</ul>
</li>
</ol>
<h2 id="14-Collections工具类"><a href="#14-Collections工具类" class="headerlink" title="14.Collections工具类"></a>14.Collections工具类</h2><h3 id="Collections工具类介绍"><a href="#Collections工具类介绍" class="headerlink" title="Collections工具类介绍"></a>Collections工具类介绍</h3><p>Collections是一个操作Set、List和Map等集合的工具类。</p>
<p>Collections 中提供了一系列静态的方法对集合元素进行排序、查询和修改等操作</p>
<h3 id="测试案例"><a href="#测试案例" class="headerlink" title="测试案例"></a>测试案例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>list.add(<span class="hljs-string">&quot;tom&quot;</span>);<br>list.add(<span class="hljs-string">&quot;smith&quot;</span>);<br>list.add(<span class="hljs-string">&quot;king&quot;</span>);<br>list.add(<span class="hljs-string">&quot;milan&quot;</span>);<br></code></pre></td></tr></table></figure>

<ul>
<li><p><strong>排序操作：（均为static方法）</strong></p>
<ol>
<li>reverse(List)：反转 List 中元素的顺序</li>
<li>shuffle(List)：对 List集合元素进行随机排序</li>
<li>sort(List)：根据元素的自然顺序对指定 List集合元素按升序排序</li>
<li>sort(List， Comparator)：根据指定的 Comparator 产生的顺序对List集合元素进行 排序</li>
<li>swap(List， int， int)：将指定 list 集合中的i处元素和j处元素进行交换</li>
</ol>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java">  <span class="hljs-number">1.</span> reverse(List)：反转 List 中元素的顺序<br>        Collections.reverse(list);<br>        System.out.println(<span class="hljs-string">&quot;反转list=&quot;</span>+list);<br><span class="hljs-comment">//        2. shuffle(List)：对 List集合元素进行随机排序</span><br>        Collections.shuffle(list);<br>        System.out.println(<span class="hljs-string">&quot;随机list=&quot;</span>+list);<br>        Collections.shuffle(list);<br>        System.out.println(<span class="hljs-string">&quot;随机2list=&quot;</span>+list);<br><span class="hljs-comment">//        3. sort(List)：根据元素的自然顺序对指定 List集合元素按升序排序</span><br>        Collections.sort(list);<br>        System.out.println(<span class="hljs-string">&quot;自然排序list=&quot;</span>+list);<br><span class="hljs-comment">//        4. sort(List， Comparator)：根据指定的 Comparator 产生的顺序对List集合元素进行 排序</span><br>        <span class="hljs-comment">//例如：按照字符串的长度大小排序</span><br>        Collections.sort(list, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1,Object o2)</span>&#123;<br>                <span class="hljs-keyword">return</span> ((String)o1).length() - ((String)o2).length();<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;字符串长度排序list=&quot;</span>+list);<br><span class="hljs-comment">//        5. swap(List， int， int)：将指定 list 集合中的i处元素和j处元素进行交换</span><br>        Collections.swap(list,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);<br>        System.out.println(<span class="hljs-string">&quot;交换0、1后list=&quot;</span>+list);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>输出：</p>
<p>list&#x3D;[tom, smith, king, milan]<br>反转list&#x3D;[milan, king, smith, tom]<br>随机list&#x3D;[tom, milan, king, smith]<br>随机2list&#x3D;[king, milan, smith, tom]<br>自然排序list&#x3D;[king, milan, smith, tom]<br>字符串长度排序list&#x3D;[tom, king, milan, smith]<br>交换0、1后list&#x3D;[king, tom, milan, smith]</p>
</blockquote>
</li>
<li><p><strong>查找、替换</strong></p>
<ol>
<li>Object max（Collection）：根据元素的自然顺序，返回给定集合中的最大元素</li>
<li>Object max（Collection， Comparator）：根据 Comparator 指定的顺序，返回给定集合中的最大元素</li>
<li>Object min(Collection)</li>
<li>Object min(Collection, Comparator)</li>
<li>int frequency（Collection， Object）：返回指定集合中指定元素的出现次数</li>
<li>void copy（List dest，List src）：将src中的内容复制到dest中</li>
<li>boolean replaceAll（List list， Object oldVal， Object newVal）：使用新值替换 List 对象的所有旧值</li>
</ol>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//      查找、替换</span><br><span class="hljs-comment">//        1. Object max（Collection）：根据元素的自然顺序，返回给定集合中的最大元素</span><br>        System.out.println(<span class="hljs-string">&quot;自然顺序最大元素：&quot;</span>+Collections.max(list));<br><span class="hljs-comment">//        2. Object max（Collection， Comparator）：根据 Comparator 指定的顺序，返回给定集合中的最大元素</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">maxObject</span> <span class="hljs-operator">=</span> Collections.max(list, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Object o1, Object o2)</span> &#123;<br>                <span class="hljs-keyword">return</span> ((String) o1).length() - ((String) o2).length();<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;长度最大的元素=&quot;</span>+maxObject);<br><span class="hljs-comment">//        3. Object min(Collection)</span><br><span class="hljs-comment">//        4. Object min(Collection, Comparator)</span><br><span class="hljs-comment">//        上面两个方法，参考max即可</span><br><br><span class="hljs-comment">//        5. int frequency（Collection， Object）：返回指定集合中指定元素的出现次数</span><br>        System.out.println(<span class="hljs-string">&quot;tom出现的次数=&quot;</span>+Collections.frequency(list,<span class="hljs-string">&quot;tom&quot;</span>));<br><span class="hljs-comment">//        6. void copy（List dest，List src）：将src中的内容复制到dest中</span><br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">dest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        <span class="hljs-comment">//拷贝（需要dest和list大小一致）</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; list.size(); i++) &#123;<br>            dest.add(<span class="hljs-string">&quot;&quot;</span>);<br>        &#125;<br>        Collections.copy(dest,list);<br>        System.out.println(<span class="hljs-string">&quot;dest=&quot;</span>+dest);<br><br><span class="hljs-comment">//        7. boolean replaceAll（List list， Object oldVal， Object newVal）：使用新值替换 List 对象的所有旧值</span><br>        <span class="hljs-comment">//如果list中有tom，就替换成汤姆</span><br>        Collections.replaceAll(list,<span class="hljs-string">&quot;tom&quot;</span>,<span class="hljs-string">&quot;汤姆&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;修改后list=&quot;</span>+list);<br></code></pre></td></tr></table></figure>

<blockquote>
<p>自然顺序最大元素：tom<br>长度最大的元素&#x3D;milan<br>tom出现的次数&#x3D;1<br>dest&#x3D;[king, tom, milan, smith]<br>修改后list&#x3D;[king, 汤姆, milan, smith]</p>
</blockquote>
</li>
</ul>
<h2 id="简略总结"><a href="#简略总结" class="headerlink" title="简略总结"></a>简略总结</h2><p>集合特点：动态保存、提供方法、使用方便</p>
<p>集合主要分为<strong>单列集合（Collection）</strong>和<strong>双列集合（Map）</strong>。</p>
<h3 id="单列集合"><a href="#单列集合" class="headerlink" title="单列集合"></a>单列集合</h3><p>Collection接口有两个重要的字接口，<strong>List</strong>和<strong>Set</strong>。</p>
<p>collection接口实现类的特点：1.可存放多元素 2.没有直接的实现子类，通过子接口Set和List来实现。</p>
<p>常用的遍历方式有三种：<strong>Iterator迭代器、增强for</strong></p>
<p><strong>Iterator迭代器的原理：</strong></p>
<p>1）创建一个集合的迭代器 </p>
<p>2）while循环，条件为下一针是都否为空</p>
<p> 3）指针下移，下移后返回该位置的元素</p>
<p>*遍历后如果要重新遍历，需要重置迭代器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1。希望能得到col对应的迭代器</span><br><span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> col.iterator();<br><span class="hljs-comment">//2.使用while循环遍历（快捷键itit）</span><br><span class="hljs-keyword">while</span>(iterator.hasNext())&#123;<span class="hljs-comment">//判断是否还有数据</span><br>    <span class="hljs-comment">//返回下一个元素，类型是Object</span><br>    <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> iterator.next();<br>    System.out.println(<span class="hljs-string">&quot;obj=&quot;</span>+obj);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>增强for：</strong></p>
<p>底层仍然为迭代器，可以理解为简化版本的迭代器遍历</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">for</span>（元素类型 元素名：集合名或数组名）｛<br>访问元素<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="List接口"><a href="#List接口" class="headerlink" title="List接口"></a>List接口</h4><p><strong>有序、可重复、添加和取出顺序一致、支持索引</strong>。</p>
<p>list.add()添加，list.get()获取位置，list.set()设置指定位置上的元素</p>
<p>list三种遍历方式：iterator、增强for、普通for</p>
<p>list常见的实现类：<strong>ArrayList、LinkedList和Vector</strong>。</p>
<h5 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a><strong>ArrayList</strong></h5><p>可变数组，允许所有元素，可加入多个空，通过数组实现数据存储，线程不安全。</p>
<p>1）使用无参构造器，初始容量为0。<strong>第一次添加，扩容为10</strong>。再次扩容为原容量的<strong>1.5倍</strong>。</p>
<p>2）使用指定大小的构造器，扩容为原容量的<strong>1.5倍</strong>。</p>
<p><strong>Vector</strong></p>
<p>线程安全的（做安全验证）</p>
<p>无参默认容量为10，扩容按两倍扩容。</p>
<p><strong>LinkedList</strong></p>
<p>双向链表，维护了两个属性first（首结点）和last（尾结点）。</p>
<p>每个结点维护了prev、next、item三个属性。</p>
<h4 id="Set接口"><a href="#Set接口" class="headerlink" title="Set接口"></a>Set接口</h4><p>无序、不允许重复元素、无索引。</p>
<p>三种遍历方式：iterator、增强for、普通for</p>
<p>常用的实现类：HashSet、LinkedHashSet</p>
<p><strong>HashSet</strong></p>
<p>实质上是HashMap、可以存放一个null、不保证元素有序。</p>
<p>底层：获取hash、计算索引、查看该索引是否有数据。如果有调用equals方法比较，相同放弃，不相同添加。如果无直接添加。</p>
<p>扩容：第一次添加时，table 数组扩容到16，临界值（threshold）是16＊加载因子（loadFactor）是0.75 ＝ 12。</p>
<p>如果table 数组使用到了临界值12，就会扩容到16＊2＝32，新的临界值就是32＊0.75＝24，依次类推</p>
<p>在Java8中，如果一条链表的元素个数到达8，并且table的大小＞＝64，就会进行树化（红黑树）</p>
<p><strong>LinkedHashSet</strong></p>
<p>底层维护了一个数组＋双向链表。据元素的 hashCode 值来决定存储位置，同时使用链表维护元素的次序，这使得元素看起来是以插入顺序保存的。</p>
<p>底层：每一个节点有pre和next属性，这样可以形成双向链表。在添加一个元素时，先求hash值，再求索引．，确定该元素在hashtable的位置，然后将添加的元素加入到双向链表（如果已经存在，不添加［原则和hashset一样］）</p>
<h3 id="双列集合（Map接口）"><a href="#双列集合（Map接口）" class="headerlink" title="双列集合（Map接口）"></a>双列集合（Map接口）</h3><p>保存具有映射关系的数据：<strong>Key-Value</strong>（双列元素）。key不允许重复，value 可以重复。</p>
<p>几种遍历方法：</p>
<p>第一种：先取出所有的Key，通过Key取出对应的Value</p>
<p>第二种：取出所有的value</p>
<p>第三种：通过EntrySet 来获取K-V</p>
<p>Map接口的常用实现类：<strong>HashMap、Hashtable和Properties</strong>。</p>
<h4 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h4><p>线程不安全、k-v存储。不保证映射的顺序，以hash表的方式存储。添加相同的key会替换。线程不安全。</p>
<p>扩容：第一次添加，table扩容为16，临界值12 。以后扩容，按照原来的两倍（例如第二次32），临界值为容量x0.75。</p>
<p>在Java8中，如果一条链表的<strong>元素个数超过 TREEIFY THRESHOLD</strong>（默认是8），并<strong>且table的大小＞＝MIN TREEIFY_CAPACITY</strong>（默认64），就会进行树化（红黑树）</p>
<h4 id="Hashtable"><a href="#Hashtable" class="headerlink" title="Hashtable"></a>Hashtable</h4><p>线程安全、键和值都不能为null，使用方法基本和hashmap一样。</p>
<h4 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h4><p>继承自Hashtable类并且实现了Map接口，通常作为配置文件。</p>
<h4 id="TreeSet-amp-TreeMap"><a href="#TreeSet-amp-TreeMap" class="headerlink" title="TreeSet&amp;TreeMap"></a>TreeSet&amp;TreeMap</h4><p>使用无参构造器，创造TreeSet时，仍然是无序的。</p>
<p>希望添加的元素，按照字符串大小来排序</p>
<p>使用treeset提供的一个构造器，可以传入一个比较器（匿名内部类），并指定排序规则</p>
<h3 id="Collections工具类"><a href="#Collections工具类" class="headerlink" title="Collections工具类"></a>Collections工具类</h3><p>Collections是一个操作Set、List和Map等集合的工具类。</p>
<p>Collections 中提供了一系列静态的方法对集合元素进行排序、查询和修改等操作</p>
<h2 id="本章作业-2"><a href="#本章作业-2" class="headerlink" title="本章作业"></a>本章作业</h2><h3 id="题目1-5"><a href="#题目1-5" class="headerlink" title="题目1"></a>题目1</h3><blockquote>
<p>按要求实现：<br>（1） 封装一个新闻类，包含标题和内容属性，提供get、set方法，重写toString方法，打印对象时只打印标题；</p>
<p>（2） 只提供一个带参数的构造器，实例化对象时，只初始化标题；并且实例化两个对象：</p>
<p>新闻一：新冠确诊病例超千万，数百万印度教信徒赴恒河“圣浴”引民众担忧<br>新闻二：男子突然想起2个月前钓的鱼还在网兜里，捞起一看赶紧放生<br>（3） 将新闻对象添加到ArrayList集合中，并且进行倒序遍历；</p>
<p>（4）在遍历集合过程中，对新闻标题进行处理，超过15字的只保留前15个，然后在后边加“．..”</p>
<p>（5）在控制台打印遍历出经过处理的新闻标题；</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Homework1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ArrayList</span> <span class="hljs-variable">arraylist</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>        arraylist.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">News</span>(<span class="hljs-string">&quot;新冠确诊病例超千万，数百万印度教信徒赴恒河“圣浴”引民众担忧&quot;</span>));<br>        arraylist.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">News</span>(<span class="hljs-string">&quot;男子突然想起2个月前钓的鱼还在网兜里，捞起一看赶紧放生&quot;</span>));<br>        <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> arraylist.size();<br>        <span class="hljs-comment">//倒序输出</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> size-<span class="hljs-number">1</span>; i &gt;=<span class="hljs-number">0</span>; i--) &#123;<br>            <span class="hljs-type">News</span> <span class="hljs-variable">news</span> <span class="hljs-operator">=</span> (News)arraylist.get(i);<br>            System.out.println(processTitle(news.getTitle()));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">processTitle</span><span class="hljs-params">(String title)</span>&#123;<br>        <span class="hljs-keyword">if</span> (title==<span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (title.length()&gt;<span class="hljs-number">15</span>)&#123;<br>            <span class="hljs-keyword">return</span> title.substring(<span class="hljs-number">0</span>,<span class="hljs-number">15</span>)+<span class="hljs-string">&quot;...&quot;</span>;<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> title;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">News</span>&#123;<br>    <span class="hljs-keyword">private</span> String title;<br>    <span class="hljs-keyword">private</span> String content;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">News</span><span class="hljs-params">(String title)</span> &#123;<br>        <span class="hljs-built_in">this</span>.title = title;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> title;<br>    &#125;<br>  <span class="hljs-comment">/**省略get、set方法</span><br></code></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>男子突然想起2个月前钓的鱼还在…<br>新冠确诊病例超千万，数百万印度…</p>
</blockquote>
<h3 id="题目2-6"><a href="#题目2-6" class="headerlink" title="题目2"></a>题目2</h3><blockquote>
<p>使用ArrayList 完成对 对象 Car ｛name， price｝ 的各种操作<br>Car car ＝ new Car（＂宝马＂， 400000）；</p>
<p>Car car2 ＝ new Car（＂宾利＂， 5000000）；</p>
<p>1．add：添加单个元素<br>2．remove：删除指定元素</p>
<p>3．contains：查找元素是否存在</p>
<p>4．size：获取元素个数<br>5．isEmpty：判断是否为空<br>6．clear：清空<br>7．addAll：添加多个元素<br>8．containsAll：查找多个元素是否都存在<br>9．removeAll：删除多个元素<br>使用增强for和 迭代器来遍历所有的car，需要重写Car 的toString方法</p>
</blockquote>
<p>详细代码见文件。</p>
<h3 id="题目3-4"><a href="#题目3-4" class="headerlink" title="题目3"></a>题目3</h3><blockquote>
<p>按要求完成下列任务<br>1） 使用HashMap类实例化一个Map类型的对象m，键（String）和值（int）分别用于存储员工的姓名和工资，存入数据如下： jack-650元；tom-1200元；smith-2900元；<br>2）将jack的工资更改为2600元<br>3）为所有员工工资加薪100元；<br>4）遍历集合中所有的员工<br>5）遍历集合中所有的工资</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//        1） 使用HashMap类实例化一个Map类型的对象m，</span><br><span class="hljs-comment">//        键（String）和值（int）分别用于存储员工的姓名和工资，</span><br><span class="hljs-comment">//        存入数据如下： jack-650元；tom-1200元；smith-2900元；</span><br>        <span class="hljs-type">Map</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>        m.put(<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-number">650</span>);<br>        m.put(<span class="hljs-string">&quot;tom&quot;</span>,<span class="hljs-number">1200</span>);<br>        m.put(<span class="hljs-string">&quot;smith&quot;</span>,<span class="hljs-number">2900</span>);<br><span class="hljs-comment">//        2）将jack的工资更改为2600元</span><br>        m.put(<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-number">2600</span>);<br>        System.out.println(m);<br><span class="hljs-comment">//        3）为所有员工工资加薪100元；</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> m.keySet();<br>        <span class="hljs-keyword">for</span> (Object key :set) &#123;<br>            m.put(key,(Integer)m.get(key)+<span class="hljs-number">100</span>);<br>        &#125;<br>        System.out.println(m);<br><br><span class="hljs-comment">//        4）遍历集合中所有的员工</span><br>        <span class="hljs-type">Set</span> <span class="hljs-variable">entrySet</span> <span class="hljs-operator">=</span> m.entrySet();<br>        System.out.println(<span class="hljs-string">&quot;遍历集合中所有的员工:&quot;</span>);<br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> entrySet.iterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext())&#123;<br>            Map.<span class="hljs-type">Entry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> (Map.Entry)iterator.next();<br>            System.out.println(entry.getKey()+<span class="hljs-string">&quot;-&quot;</span>+entry.getValue());<br>        &#125;<br><br><span class="hljs-comment">//        5）遍历集合中所有的工资</span><br>        <span class="hljs-type">Collection</span> <span class="hljs-variable">values</span> <span class="hljs-operator">=</span> m.values();<br>        System.out.println(<span class="hljs-string">&quot;遍历集合中所有的工资:&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Object o :values) &#123;<br>            System.out.println(o);<br>        &#125;<br></code></pre></td></tr></table></figure>



<h3 id="简答题4"><a href="#简答题4" class="headerlink" title="简答题4"></a>简答题4</h3><blockquote>
<p>试分析HashSet和TreeSet分别如何实现去重的</p>
</blockquote>
<p>HashSet的去重机制：hashCode() + equals() 。底层先通过存入对象，进行运算得到一个hash值，通过hash值对应得到索引。如果发现table表索引所在的位置，没有数据，就直接存放。如果有数据，就进行equals比较[遍历比较]。如果比较后不相同就加入，否则不加入。</p>
<p>TreeSet的去重机制：如果传入了一个Comparator匿名对象，就是用实现的compare去重，如果方法返回0，就认为是相同的元素&#x2F;数据，就不添加。如果没有传入一个Comparator匿名对象，则以你添加的对象实现的Compareable接口的compareTo去重。</p>
<h3 id="题目5-1"><a href="#题目5-1" class="headerlink" title="题目5"></a>题目5</h3><blockquote>
<p>下面代码运行会不会抛出异常，并从源码层面说明原因.［考察 读源码＋接口编程＋动态绑定］ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">TreeSet treeSet= <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>();<br>treeSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>());<br></code></pre></td></tr></table></figure>
</blockquote>
<p>会抛出异常。</p>
<p>因为TreeSet()的构造器没有传入Comparator接口的匿名内部类。</p>
<p>所以：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">Comparator&lt;? <span class="hljs-keyword">super</span> K&gt; k=（<span class="hljs-built_in">Comparable</span>&lt;? <span class="hljs-keyword">super</span> K) key;<br></code></pre></td></tr></table></figure>

<p>即，把Person转成Comparable类型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">treeSet.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()); <span class="hljs-comment">//ClassCastException</span><br></code></pre></td></tr></table></figure>



<h3 id="分析题6"><a href="#分析题6" class="headerlink" title="分析题6"></a>分析题6</h3><blockquote>
<p>&#x2F;&#x2F;老韩提示： 这道题很有意思，稍不注意就掉进陷阱.<br>已知： Person类按照id和name重写了hashCode和equals方法，问下面代码输出什么？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">HashSet</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br><span class="hljs-type">Person</span> <span class="hljs-variable">p1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;AA&quot;</span>);<br><span class="hljs-type">Person</span> <span class="hljs-variable">p2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;BB&quot;</span>);<br>set.add(p1);<br>set.add(p2);<br>p1.name = <span class="hljs-string">&quot;CC&quot;</span>;<br>set.remove(p1);<br>System.out.println(set);<br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;CC&quot;</span>));<br>System.out.println(set);<br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;AA&quot;</span>));<br>System.out.println(set);<br></code></pre></td></tr></table></figure>
</blockquote>
<p> 输出：</p>
<blockquote>
<p>[Person{id&#x3D;1002, name&#x3D;’BB’}, Person{id&#x3D;1001, name&#x3D;’CC’}]<br>[Person{id&#x3D;1002, name&#x3D;’BB’}, Person{id&#x3D;1001, name&#x3D;’CC’}, Person{id&#x3D;1001, name&#x3D;’CC’}]<br>[Person{id&#x3D;1002, name&#x3D;’BB’}, Person{id&#x3D;1001, name&#x3D;’CC’}, Person{id&#x3D;1001, name&#x3D;’CC’}, Person{id&#x3D;1001, name&#x3D;’AA’}]</p>
</blockquote>
<p>分析：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">HashSet</span> <span class="hljs-variable">set</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>();<br><span class="hljs-type">Person</span> <span class="hljs-variable">p1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;AA&quot;</span>);<br><span class="hljs-type">Person</span> <span class="hljs-variable">p2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;BB&quot;</span>);<br>set.add(p1);<br>set.add(p2);<br>p1.name = <span class="hljs-string">&quot;CC&quot;</span>;<br>set.remove(p1);<br>System.out.println(set);<br></code></pre></td></tr></table></figure>

<p>输出：Person{id&#x3D;1002, name&#x3D;’BB’}, Person{id&#x3D;1001, name&#x3D;’CC’}]</p>
<p>因为remove并没有成功。remove是根据当前id和name来删除（加入“CC”后，虽然p1还在原位置上，但计算出来的hash值变了），由于name被更改所以删除失败了。</p>
<p>如果重写hashcode方法时，不选择name，可以删除成功。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;CC&quot;</span>));<br>System.out.println(set);<br></code></pre></td></tr></table></figure>

<p>放在计算的hash值位置上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;AA&quot;</span>));<br>System.out.println(set);<br></code></pre></td></tr></table></figure>

<p>由于和一开始的p1相同，hash值相同，但内容和现在的p1并不相同，所以挂在p1的后面。</p>
<h3 id="简答7"><a href="#简答7" class="headerlink" title="简答7"></a>简答7</h3><blockquote>
<p>试写出Vector和ArrayList的比较?</p>
</blockquote>
<table>
<thead>
<tr>
<th></th>
<th>底层结构</th>
<th>版本</th>
<th>线程安全（同步）效率</th>
<th>扩容倍数</th>
</tr>
</thead>
<tbody><tr>
<td>ArrayList</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Vector</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>答案见前。</p>
<h1 id="章节15-泛型"><a href="#章节15-泛型" class="headerlink" title="章节15 泛型"></a>章节15 泛型</h1><h2 id="1-引入泛型"><a href="#1-引入泛型" class="headerlink" title="1.引入泛型"></a>1.引入泛型</h2><p>需求：</p>
<p>1） 请编写程序，在ArrayList中，添加3个Dog对象</p>
<p>2）Dog对象含有name和 age，并输出name 和 age（要求使用getXxx（））</p>
<p>传统方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//传统方法</span><br><span class="hljs-type">ArrayList</span> <span class="hljs-variable">arrayList</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;旺财&quot;</span>,<span class="hljs-number">10</span>));<br>arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;发财&quot;</span>,<span class="hljs-number">1</span>));<br>arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;小黄&quot;</span>,<span class="hljs-number">5</span>));<br><span class="hljs-comment">//遍历</span><br><span class="hljs-keyword">for</span> (Object o :arrayList) &#123;<br>    <span class="hljs-comment">//向下转型</span><br>    <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> (Dog) o;<br>    System.out.println(dog.getName()+<span class="hljs-string">&quot;-&quot;</span>+dog.getAge());<br>&#125;<br></code></pre></td></tr></table></figure>

<p>但如果在添加的时候，不小心添加了一个别的对象（例如一只猫），编译器无法发现异常。在遍历时才会抛出错误。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//不小心添加了一只猫</span><br>arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">&quot;招财猫&quot;</span>,<span class="hljs-number">8</span>));<br></code></pre></td></tr></table></figure>

<blockquote>
<p>Exception in thread “main” java.lang.ClassCastException: com.hspedu.generic.Cat cannot be cast to com.hspedu.generic.Dog<br>    at com.hspedu.generic.Generic01.main(Generic01.java:23)</p>
</blockquote>
<h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a><strong>问题分析</strong></h3><p>1）<strong>不能</strong>对加入到集合 ArrayList中的数据类型<strong>进行约束</strong>（不安全）</p>
<p>2）遍历的时候，需要进行类型转换，如果集合中的数据量较大，<strong>对效率有影响</strong></p>
<p>这是一个隐患，所以引出泛型。</p>
<p>泛型方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//使用泛型</span><br><span class="hljs-comment">//1.当使用 ArrayList&lt;Dog&gt; 表示存放到ArrayList集合中的元素是Dog类型</span><br>ArrayList&lt;Dog&gt; arrayList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Dog&gt;();<br>arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;旺财&quot;</span>,<span class="hljs-number">10</span>));<br>arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;发财&quot;</span>,<span class="hljs-number">1</span>));<br>arrayList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">&quot;小黄&quot;</span>,<span class="hljs-number">5</span>));<br><br><span class="hljs-comment">//2.如果编译器发现添加的类型，不满足类型就会报错</span><br><span class="hljs-comment">//arrayList.add(new Cat(&quot;招财猫&quot;,8));</span><br><br><span class="hljs-comment">//3.在遍历的时候可以直接取出Dog类型，而不是Object</span><br><span class="hljs-keyword">for</span> (Dog d :arrayList) &#123;<br>    System.out.println(d.getName()+<span class="hljs-string">&quot;-&quot;</span>+d.getAge());<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="泛型的好处"><a href="#泛型的好处" class="headerlink" title="泛型的好处"></a><strong>泛型的好处</strong></h3><ol>
<li><p>编译时，检查添加元素的类型，<strong>提高了安全性</strong></p>
</li>
<li><p><strong>减少了类型转换的次数</strong>，提高效率</p>
<p>例如：</p>
<ul>
<li>不使用泛型<br>Dog －加入－＞ Object －取出－＞ Dog &#x2F;&#x2F;放入到ArrayList 会先转成 Object，在取出时，还需要转换成 Dog</li>
<li>使用泛型<br>Dog －＞ Dog －＞Dog&#x2F;&#x2F;放入时，和取出时，不需要类型转换，提高效率</li>
</ul>
</li>
<li><p>不再提示编译警告</p>
</li>
</ol>
<h2 id="2-泛型说明"><a href="#2-泛型说明" class="headerlink" title="2.泛型说明"></a>2.泛型说明</h2><p>泛型就是一种可以表示数据类型的数据类型。</p>
<p>int a &#x3D; 10、1、2、3….</p>
<p>E &#x3D; Integer、String、Dog..</p>
<p>理解： 泛（广泛）型（类型） ＝＞ Integer， String，Dog</p>
<p>1）泛型又称<strong>参数化类型，</strong>是Jdk5.0出现的新特性，<strong>解决数据类型的安全性问题</strong></p>
<p>2）在类声明或实例化时只要<strong>指定好需要的具体的类型</strong>即可。</p>
<p>3）Java泛型可以保证如果程序在编译时没有发出警告，运行时就不会产生<br>ClassCastException异常。同时，代码更加简洁、健壮</p>
<p>4）泛型的作用是：<strong>可以在类声明时通过一个标识表示类中某个属性的类型</strong>，或者是某个方法的返回值的类型，或者是参数类型。［举例Generic03.java］</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java">Person&lt;String&gt; stringPerson = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>&lt;String&gt;(<span class="hljs-string">&quot;韩顺平教育&quot;</span>);<br>Person&lt;Integer&gt; integerPerson = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>&lt;Integer&gt;(<span class="hljs-number">100</span>);<br>stringPerson.show(); <span class="hljs-comment">//class java.lang.String</span><br>integerPerson.show(); <span class="hljs-comment">//class java.lang.Integer</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&lt;E&gt;&#123;<br>    E s; <span class="hljs-comment">//该数据类型，在定义Person对象的时候指定，即在编译期间，就确定E是什么类型。</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(E s)</span> &#123;<br>        <span class="hljs-built_in">this</span>.s = s;<br>    &#125;<br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">f</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">//返回类型使用E</span><br>        <span class="hljs-keyword">return</span> s;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(s.getClass()); <span class="hljs-comment">//显示s的运行类型</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="泛型的声明"><a href="#泛型的声明" class="headerlink" title="泛型的声明"></a><strong>泛型的声明</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">interface 接口&lt;T&gt;&#123;&#125; 和 class 类&lt;K,V&gt;&#123;&#125;<br></code></pre></td></tr></table></figure>

<ol>
<li>其中，T、K、V不代表值，而是表示类型</li>
<li>任意字母都可以。常用T表示，是Type的缩写</li>
</ol>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//list接口</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">List</span>&lt;E&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Collection</span>&lt;E&gt; &#123;...&#125;<br></code></pre></td></tr></table></figure>



<h3 id="泛型的实例化"><a href="#泛型的实例化" class="headerlink" title="泛型的实例化"></a><strong>泛型的实例化</strong></h3><p>要在类名后面指定类型参数的值（类型）。如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; strList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>Iterator&lt;Customer&gt; iterator = customers.iterator();<br></code></pre></td></tr></table></figure>



<h3 id="举例说明"><a href="#举例说明" class="headerlink" title="举例说明"></a><strong>举例说明</strong></h3><blockquote>
<p>泛型在HashSet和HashMap的使用情况</p>
<p>练习：<br>1.创建 3个学生对象</p>
<p>2.放入到HashSet学生对象，使用.</p>
<p>3.放入到 HashMap中，要求 Key是 String name，Value就是 学生对象</p>
<p>4.使用两种方式遍历</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1. HashSet</span><br>HashSet&lt;Student&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;Student&gt;();<br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;john&quot;</span>,<span class="hljs-number">12</span>));<br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;jack&quot;</span>,<span class="hljs-number">18</span>));<br>set.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;mary&quot;</span>,<span class="hljs-number">20</span>));<br><span class="hljs-comment">//遍历-增强for</span><br>System.out.println(<span class="hljs-string">&quot;hashset遍历-增强for&quot;</span>);<br><span class="hljs-keyword">for</span> (Student o :set) &#123;<br>    System.out.println(o);<br>&#125;<br><span class="hljs-comment">//遍历-迭代器</span><br>System.out.println(<span class="hljs-string">&quot;hashset遍历-迭代器&quot;</span>);<br>Iterator&lt;Student&gt; iterator = set.iterator();<br><span class="hljs-keyword">while</span>(iterator.hasNext())&#123;<br>    <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> iterator.next();<br>    System.out.println(student);<br>&#125;<br><br><span class="hljs-comment">//2. HashMap</span><br>HashMap&lt;String, Student&gt; hashMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Student&gt;();<br>hashMap.put(<span class="hljs-string">&quot;tim&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;tim&quot;</span>,<span class="hljs-number">13</span>));<br>hashMap.put(<span class="hljs-string">&quot;smith&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;smith&quot;</span>,<span class="hljs-number">20</span>));<br>hashMap.put(<span class="hljs-string">&quot;hsp&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;hsp&quot;</span>,<span class="hljs-number">28</span>));<br><span class="hljs-comment">//遍历-entryset</span><br>System.out.println(<span class="hljs-string">&quot;hashmap遍历-entryset&quot;</span>);<br>Set&lt;Map.Entry&lt;String, Student&gt;&gt; entries = hashMap.entrySet();<br>Iterator&lt;Map.Entry&lt;String, Student&gt;&gt; iterator1 = entries.iterator();<br><span class="hljs-keyword">while</span> (iterator1.hasNext()) &#123;<br>    Map.Entry&lt;String, Student&gt; next =  iterator1.next();<br>    System.out.println(next);<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="3-泛型的注意事项"><a href="#3-泛型的注意事项" class="headerlink" title="3.泛型的注意事项"></a>3.泛型的注意事项</h2><ol>
<li>interface List＜T＞{}， public class HashSet＜E＞{}… 等等</li>
</ol>
<p>   说明：<strong>T，E 只能是引用类型</strong></p>
<p>   看看下面语句是否正确？：</p>
   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;Integer&gt; list =<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;(); <span class="hljs-comment">//OK</span><br>List&lt;<span class="hljs-type">int</span>&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;<span class="hljs-type">int</span>&gt;(); 			<span class="hljs-comment">//报错（不能是基本数据类型）</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><p>在<strong>指定泛型具体类型后</strong>，可以传入<strong>该类型</strong>或者其<strong>子类类型</strong></p>
</li>
<li><p>泛型使用形式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;Integer&gt; list1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt; ();<br>List&lt;Integer&gt; list2 ＝ <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();  <span class="hljs-comment">//简写</span><br><span class="hljs-comment">//编译器会进行类型推断，实际开发中，往往选择简写</span><br></code></pre></td></tr></table></figure></li>
</ol>
<p>如果我们这样写 List list3 ＝new ArrayList()；</p>
<p>默认给它的 泛型是 Object</p>
<p>即：<code>List&lt;Object&gt; list3 ＝new ArrayList&lt;&gt;();</code></p>
<h2 id="练习-6"><a href="#练习-6" class="headerlink" title="练习"></a>练习</h2><blockquote>
<p> 定义Employee类<br>1） 该类包含：private成员变量name，sal，birthday，其中birthday为MyDate 类的对象；<br>2） 为每一个属性定义 getter，setter 方法；<br>3）重写 toString 方法输出 name，sal，birthday<br>4） MyDate类包含： private成员变量month，day，year；并为每一个属性定义 getter setter 方法；<br>5）创建该类的3个对象，并把这些对象放入 ArrayList集合中（ArrayList 需使用泛型来定义），对集合中的元素进行排序，并遍历输出：</p>
<p>排序方式: 调用ArrayList 的 sort 方法，传入 Comparator对象［使用泛型］，先按照name排序，如果name相同，则按生日日期的先后排序。【即：定制排序】<br>有一定难度，比较经典泛型使用案例</p>
</blockquote>
<p>Employee类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> String name;<br><span class="hljs-keyword">private</span> <span class="hljs-type">double</span> sal;<br><span class="hljs-keyword">private</span> MyDate birthday;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;名字：&quot;</span> + name +<br>            <span class="hljs-string">&quot;, 薪水：&quot;</span> + sal +<br>            <span class="hljs-string">&quot;, 生日：&quot;</span> + birthday<br>            ;<br>&#125;<br><span class="hljs-comment">/** 省略构造器、getset、tostring详细代码 **/</span><br></code></pre></td></tr></table></figure>

<p>MyDate类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDate</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Comparable</span>&lt;MyDate&gt;&#123;<br>    <span class="hljs-comment">//MyDate类包含： private成员变量month，day，year；并为每一个属性定义 getter setter 方法；</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> year;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> month;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> day;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(MyDate o)</span> &#123;<br>        <span class="hljs-comment">//比较birthday</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">yearMinus</span> <span class="hljs-operator">=</span> year - o.getYear();<br>        <span class="hljs-keyword">if</span> (yearMinus!=<span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">return</span> yearMinus;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">monthMinus</span> <span class="hljs-operator">=</span> month - o.getMonth();<br>        <span class="hljs-keyword">if</span> (monthMinus!=<span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">return</span> monthMinus;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">dayMinus</span> <span class="hljs-operator">=</span> day - o.getMonth();<br>        <span class="hljs-keyword">return</span> dayMinus;<br>    &#125;<br>  <br>  <span class="hljs-comment">/** 省略构造器、getset、tostring详细代码 **/</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>Main: 添加数据，调用方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java">ArrayList&lt;Employee&gt; employees = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;john&quot;</span>, <span class="hljs-number">1200</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">2000</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)));<br>employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;mary&quot;</span>, <span class="hljs-number">3800</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">1999</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>)));<br>employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-number">3900</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">2002</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)));<br>employees.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;mary&quot;</span>, <span class="hljs-number">3800</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDate</span>(<span class="hljs-number">1999</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>)));<br>employees.sort(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparator</span>&lt;Employee&gt;() &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Employee o1, Employee o2)</span> &#123;<br>        <span class="hljs-comment">//先对传入的参数进行验证</span><br>        <span class="hljs-keyword">if</span> (!(o1 <span class="hljs-keyword">instanceof</span> Employee &amp;&amp; o2 <span class="hljs-keyword">instanceof</span> Employee)) &#123;<br>            System.out.println(<span class="hljs-string">&quot;类型不正确&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-comment">//比较name</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> (o1.getName()).compareTo(o2.getName());<br>        <span class="hljs-keyword">if</span> (a != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> a;<br>        &#125;<br>        <span class="hljs-comment">//比较birthday</span><br>        <span class="hljs-keyword">return</span> o1.getBirthday().compareTo(o2.getBirthday());<br>    &#125;<br>&#125;);<br><span class="hljs-comment">//遍历输出</span><br><span class="hljs-keyword">for</span> (Employee o : employees) &#123;<br>    System.out.println(o);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>名字：john, 薪水：1200.0, 生日：2000-1-2<br>名字：mary, 薪水：3800.0, 生日：1999-5-1<br>名字：mary, 薪水：3800.0, 生日：1999-6-1<br>名字：tom, 薪水：3900.0, 生日：2002-4-5</p>
</blockquote>
<h2 id="4-自定义泛型"><a href="#4-自定义泛型" class="headerlink" title="4.自定义泛型"></a>4.自定义泛型</h2><h3 id="自定义泛型"><a href="#自定义泛型" class="headerlink" title="自定义泛型"></a>自定义泛型</h3><h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">class 类名&lt;T,R...&gt;&#123;<br>	成员<br>&#125;<br></code></pre></td></tr></table></figure>

<ol>
<li>普通成员可以使用泛型（属性、方法）</li>
<li>使用泛型的数组，<strong>不能初始化</strong></li>
<li><strong>静态方法中不能</strong>使用类的泛型</li>
<li>泛型类的类型，是在<strong>创建对象时确定</strong>的（因为创建对象时，需要指定确定类型）</li>
<li>如果在创建对象时，没有指定类型，<strong>默认为Object</strong></li>
</ol>
<p>测试：说明自定义泛型代码是否正确，并说明原因</p>
<blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//MyGeneric&lt;T,R,M&gt;</span><br>MyGeneric&lt;Double,String,Integer&gt; g = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyGeneric</span>&lt;&gt;(<span class="hljs-string">&quot;john&quot;</span>);<br>g.setT(<span class="hljs-number">10.9</span>): <span class="hljs-comment">//</span><br>g.setT(<span class="hljs-string">&quot;yy&quot;</span>);<span class="hljs-comment">//</span><br>System.out.println(g);<br><span class="hljs-type">MyGeneric</span> <span class="hljs-variable">g2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyGeneric</span>(<span class="hljs-string">&quot;john~~&quot;</span>); <br>g2.setT(<span class="hljs-string">&quot;yy&quot;</span>); <span class="hljs-comment">//</span><br>System.out.println(<span class="hljs-string">&quot;g2=&quot;</span> + g2);<br><br></code></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">        <span class="hljs-comment">//MyGeneric&lt;T,R,M&gt;</span><br>        MyGeneric&lt;Double,String,Integer&gt; g = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyGeneric</span>&lt;&gt;(<span class="hljs-string">&quot;john&quot;</span>);<br>        g.setT(<span class="hljs-number">10.9</span>); <span class="hljs-comment">//OK</span><br><span class="hljs-comment">//        g.setT(&quot;yy&quot;);//类型有误,一开始就定义了T 为 Double</span><br>        System.out.println(g);<br><br>        <span class="hljs-type">MyGeneric</span> <span class="hljs-variable">g2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyGeneric</span>(<span class="hljs-string">&quot;john~~&quot;</span>); <span class="hljs-comment">//泛型默认为Object</span><br>        g2.setT(<span class="hljs-string">&quot;yy&quot;</span>); <br>				g2.setT(<span class="hljs-number">111</span>); <span class="hljs-comment">//添加的元素会覆盖原先的，不会报错</span><br>        System.out.println(<span class="hljs-string">&quot;g2=&quot;</span> + g2);<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<p>MyGeneric{name&#x3D;’john’, r&#x3D;null, m&#x3D;null, t&#x3D;10.9}<br>g2&#x3D;MyGeneric{name&#x3D;’john~~’, r&#x3D;null, m&#x3D;null, t&#x3D;111}</p>
<h3 id="自定义泛型接口"><a href="#自定义泛型接口" class="headerlink" title="自定义泛型接口"></a>自定义泛型接口</h3><h4 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">interface 接口名&lt;T,R...&gt;&#123;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="注意细节"><a href="#注意细节" class="headerlink" title="注意细节"></a>注意细节</h4><ol>
<li>接口中，静态成员也不能使用泛型（这个和泛型类规定一样）</li>
<li>泛型接口的类型，在<strong>继承接口</strong>或者<strong>实现接口</strong>时确定</li>
<li>没有指定类型，默认为Object</li>
</ol>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IUsb</span>&lt;U,R&gt;&#123;<br>    <span class="hljs-comment">//普通方法中，可以使用接口泛型</span><br>    R <span class="hljs-title function_">get</span><span class="hljs-params">(U u)</span>;<br>    <span class="hljs-comment">//U name; 不能这样使用</span><br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(R r)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(R r1, R r2, U u1, U u2)</span>;<br>    <span class="hljs-comment">//在jdk8 中，可以在接口中，使用默认方法，也是可以使用泛型</span><br>    <span class="hljs-keyword">default</span> R <span class="hljs-title function_">method</span><span class="hljs-params">(U u)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//在继承接口 指定泛型接口的类型</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IUsb</span>&lt;String,Double&gt;&#123;<br>&#125;<br><span class="hljs-comment">//当我们去实现IA接口时，因为IA在继承IUsu接口时，指定了U为String，R为Double</span><br><span class="hljs-comment">//在实现IUsu接口的方法时，使用String替换U，Double替换D</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IA</span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">get</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(Double aDouble)</span> &#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Double r1, Double r2, String u1, String u2)</span> &#123;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//实现接口时，直接指定泛型接口的类型</span><br><span class="hljs-comment">//给U 指定Integer 给 R 指定了 Float</span><br><span class="hljs-comment">//所以，当我们实现IUsb方法时，会使用Integer替换U，使用Float替换R</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUsb</span>&lt;Integer,Float&gt;&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Float <span class="hljs-title function_">get</span><span class="hljs-params">(Integer integer)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(Float aFloat)</span> &#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Float r1, Float r2, Integer u1, Integer u2)</span> &#123;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//没有指定类型，默认Object</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CC</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUsb</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">get</span><span class="hljs-params">(Object o)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(Object o)</span> &#123;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(Object r1, Object r2, Object u1, Object u2)</span> &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="自定义泛型方法"><a href="#自定义泛型方法" class="headerlink" title="自定义泛型方法"></a>自定义泛型方法</h3><h4 id="基本语法-2"><a href="#基本语法-2" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">修饰符 ＜T，R..＞ 返回类型 方法名（参数列表）｛<br>｝<br></code></pre></td></tr></table></figure>

<h4 id="注意细节-1"><a href="#注意细节-1" class="headerlink" title="注意细节"></a>注意细节</h4><ol>
<li>泛型方法，可以定义在普通类中，也可以定义在泛型类 中</li>
<li>当泛型方法被调用时，类型会确定</li>
<li>public void eat(E e){}，修饰符后没有&lt;T，R..&gt;eat方法不是泛型方法，而是使用了泛型</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();<br>        car.fly(<span class="hljs-string">&quot;宝马&quot;</span>,<span class="hljs-number">100</span>); <span class="hljs-comment">//调用方法时，传入参数，编译器会确定类型</span><br><br>        <span class="hljs-comment">//测试</span><br>        <span class="hljs-comment">//T-&gt;String, R-&gt;ArrayList</span><br>        Fish&lt;String, ArrayList&gt; fish = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fish</span>&lt;&gt;();<br>        fish.hello(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(),<span class="hljs-number">11.3f</span>);<br>        <span class="hljs-comment">//class java.util.ArrayList  class java.lang.Float</span><br>    &#125;<br><span class="hljs-comment">//泛型方法，可以定义在普通类中，也可以定义在泛型类中</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span>&#123; <span class="hljs-comment">//普通类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span>&#123; <span class="hljs-comment">//普通方法</span><br>    &#125;<br>    <span class="hljs-comment">//说明</span><br>    <span class="hljs-comment">//1.&lt;T,R&gt;就是泛型</span><br>    <span class="hljs-comment">//2.是提供给fly使用的</span><br>    <span class="hljs-keyword">public</span> &lt;T,R&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">(T t,R r)</span>&#123; <span class="hljs-comment">//泛型方法</span><br>        System.out.println(t.getClass());<br>        System.out.println(r.getClass());<br>    &#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Fish</span>&lt;T,R&gt;&#123; <span class="hljs-comment">//泛型类</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span>&#123;<span class="hljs-comment">//普通方法</span><br>    &#125;<br>    <span class="hljs-keyword">public</span>&lt;U,M&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">(U u,M m)</span>&#123; <span class="hljs-comment">//泛型方法</span><br>    &#125;<br>    <span class="hljs-comment">// 下面的hi（）不是泛型方法</span><br>    <span class="hljs-comment">// 而是方法使用了类声明的泛型</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hi</span><span class="hljs-params">(T t)</span>&#123;&#125;<br>    <span class="hljs-comment">//泛型方法，可以使用类声明的泛型，也可以使用自己声明泛型</span><br>    <span class="hljs-keyword">public</span>&lt;K&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">hello</span><span class="hljs-params">(R r,K k)</span>&#123;<br>        System.out.println(r.getClass());<br>        System.out.println(k.getClass());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<p>练习</p>
<blockquote>
<p>下面的代码是否正确，如果有错误，修改正确，并说明输出什么</p>
<p><img src="https://soya-1300102518.cos.ap-shenzhen-fsi.myqcloud.com/2022/image-20230312155028492.png" srcset="/img/loading.gif" lazyload alt="image-20230312155028492"></p>
</blockquote>
<p>是否有错：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Apple</span>&lt;T, R, M&gt; &#123;<br>    <span class="hljs-keyword">public</span> &lt;E&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">(E e)</span> &#123; <span class="hljs-comment">//泛型方法</span><br>        System.out.println(e.getClass().getSimpleName());<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">(U u)</span> &#123;&#125; <span class="hljs-comment">//错误，U没有声明</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(M m)</span> &#123;&#125; <span class="hljs-comment">//ok</span><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">Apple&lt;String, Integer, Double&gt; apple = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Apple</span>&lt;&gt;();<br>apple.fly(<span class="hljs-number">10</span>); <span class="hljs-comment">//10 会被自动装箱 Integer10  //Integer</span><br>apple.fly(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>()); <span class="hljs-comment">//Dog</span><br></code></pre></td></tr></table></figure>



<h2 id="5-泛型的继承和通配符"><a href="#5-泛型的继承和通配符" class="headerlink" title="5.泛型的继承和通配符"></a>5.泛型的继承和通配符</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>1）泛型<strong>不具备继承性</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;Object&gt; list ＝ <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;()；<span class="hljs-comment">//会报错</span><br></code></pre></td></tr></table></figure>

<p>2） &lt;?&gt;：支持<strong>任意泛型</strong>类型</p>
<p>3） ＜？ extends A＞：支持A类以及A类的<strong>子类</strong>，<strong>规定了泛型的上限</strong></p>
<p>4） ＜？ super A＞： 支持A类以及A类的<strong>父类</strong>，不限于直接父类，<strong>规定了泛型的下限</strong></p>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a><strong>案例</strong></h3><p>类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AA</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AA</span>&#123;&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AA</span>&#123;&#125;<br></code></pre></td></tr></table></figure>

<p>方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//编写几个方法</span><br><span class="hljs-comment">//说明：List&lt;?&gt; 任意泛型都可以接受</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollection1</span><span class="hljs-params">(List&lt;?&gt; c)</span> &#123;<br>    <span class="hljs-keyword">for</span>(Object object : c)&#123; <span class="hljs-comment">//通配符，取出时，就是Object</span><br>        System.out.println(object);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//?extends AA 表示 上限，可以接受 AA或者AA子类</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollection2</span><span class="hljs-params">(List&lt;? extends AA&gt; c)</span> &#123;<br>    <span class="hljs-keyword">for</span>(Object object : c)&#123;<br>        System.out.println(object);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//?super 子类类名AA；支持AA类以及AA类的父类，不限于直接父类，</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollection3</span><span class="hljs-params">(List&lt;? <span class="hljs-built_in">super</span> AA&gt; c)</span> &#123;<br>    <span class="hljs-keyword">for</span>(Object object : c)&#123;<br>        System.out.println(object);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Main:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//举例说明下面三个方法的使用</span><br>List&lt;Object&gt; list1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>List&lt;String&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>List&lt;AA&gt; list3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>List&lt;BB&gt; list4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>List&lt;CC&gt; list5 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br><span class="hljs-comment">//如果List&lt;?&gt; c, 可以接受任意的泛型类型</span><br>printCollection1(list1);<br>printCollection1(list2);<br>printCollection1(list3);<br>printCollection1(list4);<br>printCollection1(list5);<br><br><span class="hljs-comment">//List&lt;?extends AA&gt; 可以接受 AA或者AA子类</span><br>printCollection2(list1); <span class="hljs-comment">//错误，类型为Object，不符合要求</span><br>printCollection2(list2); <span class="hljs-comment">//错误</span><br>printCollection2(list3); <span class="hljs-comment">//正确</span><br>printCollection2(list4); <span class="hljs-comment">//正确</span><br>printCollection2(list5); <span class="hljs-comment">//正确</span><br><br><span class="hljs-comment">//List&lt;?super 子类类名AA&gt;；支持AA类以及AA类的父类，不限于直接父类，</span><br>printCollection3(list1); <span class="hljs-comment">//正确</span><br>printCollection3(list2); <span class="hljs-comment">//错误</span><br>printCollection3(list3); <span class="hljs-comment">//正确</span><br>printCollection3(list4); <span class="hljs-comment">//错误</span><br>printCollection3(list5); <span class="hljs-comment">//错误</span><br></code></pre></td></tr></table></figure>



<h2 id="JUnit"><a href="#JUnit" class="headerlink" title="JUnit"></a>JUnit</h2><p><strong>为什么需要JUnit?</strong></p>
<p>1.一个类有很多功能代码需要测试，为了测试，就需要写入到main方法中</p>
<p>2.如果有多个功能代码测试，就需要来回注销，切换很麻烦</p>
<p>3.如果可以直接运行一个方法，就方便很多，并且可以给出相关信息，就好了－＞JUnit</p>
<p><strong>基本介绍</strong></p>
<ul>
<li>JUnit是一个Java语言的单元测试框架</li>
<li>多数Java的开发环境都已经集成了JUnit作为单元测试的工具</li>
</ul>
<p><strong>快捷键：⌥+enter （win：control+enter）</strong></p>
<h2 id="本章作业-3"><a href="#本章作业-3" class="headerlink" title="本章作业"></a>本章作业</h2><h3 id="编程题1"><a href="#编程题1" class="headerlink" title="编程题1"></a>编程题1</h3><blockquote>
<p>定义个泛型类DAO＜T＞，在其中定义一个Map成员变量，Map 的键为String 类型，值为T类型。<br>分别创建以下方法：<br>（1） public void save（String id，T entity）：保存T类型的对象到 Map成员变量中<br>（2） public T get（String id）： 从 map 中获取 id 对应的对象<br>（3） public void update（String id，T entity）：替换 map 中key为id的内容，改为 entity 对象（4） public List＜T＞ list（）：返回 map 中存放的所有T对象<br>（5） public void delete（String id）：删除指定 id 对象</p>
<p>定义一个User类:<br>该类包含:private成员变量（int类型） id，age；（String 类型）name。</p>
<p>创建 DAO 类的对象，分别调用其save、get、update、list、delete 方法来操作 User对象，使用 Junit 单元测试类进行测试。</p>
</blockquote>
<p>User类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> String name;<br>	<span class="hljs-comment">/**省略get、set、tostring、构造器**/</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>Dao类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DAO</span>&lt;T&gt;&#123;<br>    <span class="hljs-keyword">private</span> Map&lt;String,T&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-comment">//方法</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(String id,T entity)</span>&#123;<br>        map.put(id,entity);<br>    &#125;<br>    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">get</span><span class="hljs-params">(String id)</span>&#123;<br>        <span class="hljs-keyword">return</span> map.get(id);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(String id,T entity)</span>&#123;<br>        map.put(id,entity);<br>    &#125;<br>    <span class="hljs-keyword">public</span> List&lt;T&gt; <span class="hljs-title function_">list</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//遍历</span><br>        <span class="hljs-comment">//先遍历map，再把value封装到ArrayList返回</span><br>        List&lt;T&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        Set&lt;String&gt; keys = map.keySet();<br>        <span class="hljs-keyword">for</span> (String key:keys) &#123;<br>            list.add(get(key));<br>        &#125;<br>        <span class="hljs-keyword">return</span> list;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(String id)</span>&#123;<br>        map.remove(id);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Test:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testList</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//创建 DAO 类的对象，</span><br>    <span class="hljs-comment">// 分别调用其save、get、update、list、delete 方法来操作 User对象，</span><br>    <span class="hljs-comment">// 使用 Junit 单元测试类进行测试。</span><br>    DAO&lt;Object&gt; dao = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DAO</span>&lt;&gt;();<br>    dao.save(<span class="hljs-string">&quot;1001&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1001</span>,<span class="hljs-number">18</span>,<span class="hljs-string">&quot;john&quot;</span>));<br>    dao.save(<span class="hljs-string">&quot;1002&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1002</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&quot;tom&quot;</span>));<br>    dao.save(<span class="hljs-string">&quot;1003&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1003</span>,<span class="hljs-number">17</span>,<span class="hljs-string">&quot;king&quot;</span>));<br>    List&lt;Object&gt; list = dao.list();<br>    System.out.println(<span class="hljs-string">&quot;list&quot;</span>+list);<br>    dao.update(<span class="hljs-string">&quot;1001&quot;</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1003</span>,<span class="hljs-number">22</span>,<span class="hljs-string">&quot;smith&quot;</span>));<br>    list = dao.list();<br>    System.out.println(<span class="hljs-string">&quot;list&quot;</span>+list);<br>    dao.delete(<span class="hljs-string">&quot;1002&quot;</span>);<br>    list = dao.list();<br>    System.out.println(<span class="hljs-string">&quot;list&quot;</span>+list);<br><br>&#125;<br></code></pre></td></tr></table></figure>

<p>输出：</p>
<blockquote>
<p>list[User{id&#x3D;1003, age&#x3D;17, name&#x3D;’king’}, User{id&#x3D;1002, age&#x3D;20, name&#x3D;’tom’}, User{id&#x3D;1001, age&#x3D;18, name&#x3D;’john’}]<br>list[User{id&#x3D;1003, age&#x3D;17, name&#x3D;’king’}, User{id&#x3D;1002, age&#x3D;20, name&#x3D;’tom’}, User{id&#x3D;1003, age&#x3D;22, name&#x3D;’smith’}]<br>list[User{id&#x3D;1003, age&#x3D;17, name&#x3D;’king’}, User{id&#x3D;1003, age&#x3D;22, name&#x3D;’smith’}]</p>
</blockquote>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Java/">#Java</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>java基础——中</div>
      <div>http://example.com/2023/10/28/2023/java基础（第二阶段-上）/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>咩包</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年10月28日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/10/28/2023/java%E5%9F%BA%E7%A1%80%EF%BC%88%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%EF%BC%89/" title="java基础——上">
                        <span class="hidden-mobile">java基础——上</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  




  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       主题： <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
